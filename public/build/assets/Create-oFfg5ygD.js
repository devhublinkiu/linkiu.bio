import{u as C,j as e,H as S,L as c}from"./app-D9wldZxo.js";import{S as w}from"./SuperAdminLayout-CPtcwFpO.js";import{B as d}from"./button-Dadb_Lep.js";import{I as y}from"./input-rMsYcH4C.js";import{L as k}from"./label-DoqMNi9Z.js";import{C as p}from"./checkbox-DWcs_tY8.js";import{C as x,a as A,b as L,c as R,d as u}from"./card-DbFVjWqh.js";import{A as F}from"./arrow-left-CN9XnZib.js";import{S as G}from"./shield-check-BbdwYXtK.js";import{S as B}from"./save-BHLpUb0H.js";import"./dropdown-menu-C4-9o8Rw.js";import"./createLucideIcon-CJjlOp5I.js";import"./utils-B0KHI9vB.js";import"./chevron-right-BSwXEIvG.js";import"./index-BDWpq_YI.js";import"./index-BrcTw33p.js";import"./index-BMdzuiHN.js";import"./index-tfOuMV4B.js";import"./circle-check-CN90YBLh.js";import"./trash-2-CMPgRqgc.js";import"./check-BAxbGpAF.js";import"./credit-card-CPDlDYf1.js";import"./shopping-bag-CQGcPT0-.js";import"./dialog-C0Lg02Tk.js";import"./x-dvUxMxq3.js";import"./separator-L5pP8n2q.js";import"./index-CZBSMaku.js";import"./sheet-BP6KOnln.js";import"./index-CbR7iZJO.js";import"./index-DeHGgcwY.js";import"./index-CXzOyCXW.js";import"./index-DdTS5Ad2.js";import"./index-fFU5c_p6.js";import"./index-Dvu8qGWr.js";import"./index-D4lOZYra.js";import"./echo-CmTENghG.js";import"./chevrons-up-down-Cepco8Sn.js";import"./badge-check-CEpGdEtW.js";import"./ApplicationLogo-DuPOXIDR.js";import"./users-OjDIvTV8.js";import"./layout-grid-DMUl8Ye2.js";import"./index--Jev_GdI.js";function Ne({permissions:h}){const{data:t,setData:m,post:f,processing:l,errors:n}=C({name:"",permissions:[]}),j=(r,i)=>{i?m("permissions",[...t.permissions,r]):m("permissions",t.permissions.filter(o=>o!==r))},g=(r,i)=>{const o=r.map(a=>a.name);if(i){const a=new Set([...t.permissions,...o]);m("permissions",Array.from(a))}else m("permissions",t.permissions.filter(a=>!o.includes(a)))},b=r=>{r.preventDefault(),f(route("roles.store"))};return e.jsxs(w,{header:"Crear Nuevo Rol",children:[e.jsx(S,{title:"Crear Rol"}),e.jsx("div",{className:"mb-6",children:e.jsx(d,{variant:"ghost",asChild:!0,className:"pl-0 hover:bg-transparent hover:text-blue-600",children:e.jsxs(c,{href:route("roles.index"),children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Volver a Roles"]})})}),e.jsx("form",{onSubmit:b,children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs(x,{children:[e.jsxs(A,{children:[e.jsx(L,{children:"Información Básica"}),e.jsx(R,{children:"Asigna un nombre único para este rol."})]}),e.jsx(u,{children:e.jsxs("div",{className:"grid w-full max-w-md items-center gap-1.5",children:[e.jsx(k,{htmlFor:"name",children:"Nombre del Rol"}),e.jsx(y,{id:"name",value:t.name,onChange:r=>m("name",r.target.value),placeholder:"Ej. Administrador de Soporte",className:n.name?"border-destructive":"",required:!0}),n.name&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:n.name})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Sistema Global"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona las acciones y accesos para este rol."})]}),e.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:[t.permissions.length," permisos seleccionados"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(h).map(([r,i])=>{const o=i.map(s=>s.name),a=o.every(s=>t.permissions.includes(s)),v=o.some(s=>t.permissions.includes(s));return e.jsxs(x,{className:"overflow-hidden border-border bg-card",children:[e.jsxs("div",{className:"bg-muted p-3 border-b border-border flex items-center justify-between",children:[e.jsxs("div",{className:"font-bold flex items-center gap-2 text-foreground",children:[e.jsx(G,{className:`h-4 w-4 ${v?"text-primary":"text-muted-foreground"}`}),r]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:`module-${r}`,checked:a,onCheckedChange:s=>g(i,s===!0)}),e.jsx("label",{htmlFor:`module-${r}`,className:"text-xs font-medium text-muted-foreground cursor-pointer select-none",children:"Todos"})]})]}),e.jsx(u,{className:"p-3 grid gap-2",children:i.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx(p,{id:s.name,checked:t.permissions.includes(s.name),onCheckedChange:N=>j(s.name,N===!0)}),e.jsx("div",{className:"grid gap-1.5 leading-none",children:e.jsx("label",{htmlFor:s.name,className:"text-sm font-medium leading-none cursor-pointer",children:s.label||s.name})})]},s.id))})]},r)})})]}),n.permissions&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:n.permissions}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 pb-12",children:[e.jsx(d,{variant:"outline",asChild:!0,children:e.jsx(c,{href:route("roles.index"),children:"Cancelar"})}),e.jsxs(d,{type:"submit",disabled:l,className:"min-w-[150px] font-bold",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),l?"Guardando...":"Guardar Rol"]})]})]})})]})}export{Ne as default};
