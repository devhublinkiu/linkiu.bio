import{r as y,u as I,j as e,H as k,L as C}from"./app-Bo0l-nyL.js";import{S as F}from"./SuperAdminLayout-C--MnbTX.js";import{B as n}from"./button-10Bc0E3d.js";import{C as x,a as j,b as v,c as g,d as _}from"./card-CLdEHqC0.js";import{I as b}from"./input-BQLGMA-c.js";import{L as t}from"./label-BvJxTSA7.js";import{T as L}from"./textarea-DtyekHu-.js";import{S as d,a as p,b as m,c as h,d as c}from"./select-CeEoLi0a.js";import{S as E}from"./switch-BptM_5y0.js";import{F as o}from"./field-_ms5T_fW.js";import{R as P}from"./RichTextEditor-C-FmmdJe.js";import{A as V}from"./arrow-left-iwTIuTJY.js";import{U}from"./upload-CESSpqcB.js";import"./dropdown-menu-BLdek0j6.js";import"./createLucideIcon-3AckdKRt.js";import"./utils-DvD3N-9F.js";import"./chevron-right-B4UhmXxg.js";import"./index-Bj75TZ4c.js";import"./index-nKjDUAgZ.js";import"./index-CXl70Eho.js";import"./index-BaTs_s0z.js";import"./circle-check-D-62-mjA.js";import"./trash-2-CGD0dP--.js";import"./check-BxakoWLx.js";import"./credit-card-C_0EBMTX.js";import"./shopping-bag-ovPa-jWO.js";import"./dialog-NO27f9rI.js";import"./x-0PRwyTAe.js";import"./separator-rnPeP9N4.js";import"./index-CS0_ycFC.js";import"./sheet-Bz3Lea4F.js";import"./index-UkxbaV1a.js";import"./index-Ce-cpEu5.js";import"./index-DU1na7Ze.js";import"./index-DlxfeT00.js";import"./index-DY8QIQU5.js";import"./index-BrTki0md.js";import"./index-Q_gv5oQO.js";import"./chevrons-up-down-CDiH0g-q.js";import"./badge-check-DcDsd9yF.js";import"./ApplicationLogo-BrXO3AMH.js";import"./users-Cl7FA0jJ.js";import"./layout-grid-CS-h8BvL.js";import"./index-BdQq_4o_.js";import"./index-DwXGMyUE.js";import"./chevron-down-CPoZLJYe.js";import"./chevron-up-BkpbFJvV.js";import"./list-ordered-DswW-DBG.js";import"./list-CejUrcFf.js";const A=[{value:"new",label:"Nuevo"},{value:"fix",label:"Corrección"},{value:"improvement",label:"Mejora"},{value:"security",label:"Seguridad"},{value:"performance",label:"Rendimiento"}],B=[{value:"none",label:"Sin icono"},{value:"CalendarRange",label:"CalendarRange"},{value:"Sparkles",label:"Sparkles"},{value:"Package",label:"Package"},{value:"Wrench",label:"Wrench"},{value:"Shield",label:"Shield"},{value:"Zap",label:"Zap"}];function Pe({release:s,categories:N}){const f=y.useRef(null),[S]=y.useState(()=>s.body??""),{data:i,setData:r,post:w,processing:R,errors:l}=I({_method:"PUT",release_note_category_id:s.release_note_category_id.toString(),title:s.title,slug:s.slug,type:s.type,icon_name:s.icon_name||"",cover_path:s.cover_path||"",cover_preview:s.cover_url,cover:null,hero_path:s.hero_path||"",snippet:s.snippet||"",body:s.body||"",published_at:s.published_at?s.published_at.slice(0,10):"",status:s.status,is_featured:s.is_featured}),T=a=>{a.preventDefault(),w(route("release-notes.update",s.id))};return e.jsxs(F,{header:"Editar Release Note",children:[e.jsx(k,{title:"Editar Release Note"}),e.jsxs("div",{className:"max-w-3xl mx-auto py-6",children:[e.jsx(n,{variant:"ghost",className:"mb-4 pl-0",asChild:!0,children:e.jsxs(C,{href:route("release-notes.index"),className:"flex items-center gap-2 text-muted-foreground hover:text-gray-900",children:[e.jsx(V,{className:"h-4 w-4"}),"Volver al listado"]})}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Contenido"}),e.jsx(g,{children:"Título, categoría, tipo y resumen."})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Categoría"}),e.jsxs(d,{value:i.release_note_category_id,onValueChange:a=>r("release_note_category_id",a),children:[e.jsx(p,{children:e.jsx(m,{placeholder:"Selecciona categoría"})}),e.jsx(h,{children:N.map(a=>e.jsx(c,{value:String(a.id),children:a.name},a.id))})]}),e.jsx(o,{children:l.release_note_category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Tipo"}),e.jsxs(d,{value:i.type,onValueChange:a=>r("type",a),children:[e.jsx(p,{children:e.jsx(m,{})}),e.jsx(h,{children:A.map(a=>e.jsx(c,{value:a.value,children:a.label},a.value))})]}),e.jsx(o,{children:l.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Icono"}),e.jsxs(d,{value:i.icon_name===""?"none":i.icon_name,onValueChange:a=>r("icon_name",a==="none"?"":a),children:[e.jsx(p,{children:e.jsx(m,{placeholder:"Icono (Lucide)"})}),e.jsx(h,{children:B.map(a=>e.jsx(c,{value:a.value,children:a.label},a.value))})]}),e.jsx(o,{children:l.icon_name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"title",children:"Título"}),e.jsx(b,{id:"title",value:i.title,onChange:a=>r("title",a.target.value)}),e.jsx(o,{children:l.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"slug",children:"Slug"}),e.jsx(b,{id:"slug",value:i.slug,onChange:a=>r("slug",a.target.value)}),e.jsx(o,{children:l.slug})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"snippet",children:"Resumen / Snippet"}),e.jsx(L,{id:"snippet",value:i.snippet,onChange:a=>r("snippet",a.target.value),rows:3}),e.jsx(o,{children:l.snippet})]})]})]}),e.jsxs(x,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Imagen y cuerpo"}),e.jsx(g,{children:"Portada y cuerpo en HTML o texto."})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Imagen de portada (cover)"}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-start",children:[e.jsxs(n,{type:"button",variant:"outline",onClick:()=>f.current?.click(),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Abrir ventana de carga"]}),e.jsx("input",{ref:f,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/svg+xml",className:"hidden",onChange:a=>{const u=a.target.files?.[0];u&&(r("cover",u),r("cover_preview",URL.createObjectURL(u)),r("cover_path","")),a.target.value=""}}),i.cover_preview&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:i.cover_preview,alt:"Vista previa",className:"h-24 w-32 object-cover rounded border"}),e.jsx(n,{type:"button",variant:"ghost",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0 rounded-full bg-muted",onClick:()=>{r("cover",null),r("cover_preview",null),r("cover_path","")},children:"×"})]})]}),e.jsx(o,{children:l.cover_path})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Cuerpo"}),e.jsx(P,{initialContent:S,onChange:a=>r("body",a),placeholder:"Contenido del release…",uploadImageUrl:route("release-notes.upload-image")}),e.jsx(o,{children:l.body})]})]})]}),e.jsxs(x,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Publicación"}),e.jsx(g,{children:"Fecha, estado y destacado."})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"published_at",children:"Fecha de publicación"}),e.jsx(b,{id:"published_at",type:"date",value:i.published_at,onChange:a=>r("published_at",a.target.value)}),e.jsx(o,{children:l.published_at})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Estado"}),e.jsxs(d,{value:i.status,onValueChange:a=>r("status",a),children:[e.jsx(p,{children:e.jsx(m,{})}),e.jsxs(h,{children:[e.jsx(c,{value:"draft",children:"Borrador"}),e.jsx(c,{value:"published",children:"Publicado"})]})]}),e.jsx(o,{children:l.status})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{id:"is_featured",checked:i.is_featured,onCheckedChange:a=>r("is_featured",a)}),e.jsx(t,{htmlFor:"is_featured",children:"Marcar como destacado"})]}),e.jsx(o,{children:l.is_featured})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{type:"submit",disabled:R,children:"Guardar cambios"}),e.jsx(n,{type:"button",variant:"outline",asChild:!0,children:e.jsx(C,{href:route("release-notes.index"),children:"Cancelar"})})]})]})]})]})}export{Pe as default};
