import{r as m,j as e,H as v,a as p}from"./app-arqQV-bc.js";import{S as N}from"./SuperAdminLayout-DBJxSbv0.js";import{C as x,d as h,a as S,b as C,c as w}from"./card-BQPJWSk4.js";import{T as b,a as E,b as c,c as r,d as T,e as s}from"./table-BF9Ri8Ro.js";import{B as t}from"./badge-t3wrEXXG.js";import{I as _}from"./input-CnYabjbM.js";import{L as D}from"./label-DAA58jPO.js";import{S as I,a as P,b as H,c as A,d as i}from"./select-Ci9oU9C1.js";import{S as B}from"./Pagination-BdXxqbJr.js";import{E as L,a as k,b as M,c as V,d as z}from"./empty-MTzv4CqT.js";import{S as F}from"./search-BL2TDUYY.js";import{C as O}from"./credit-card-4AdI57T8.js";import{C as R}from"./calendar-DHlqI9qY.js";import"./button-Bd640uTA.js";import"./utils-BegMJZHH.js";import"./dropdown-menu-mNq1McYa.js";import"./createLucideIcon-kbomgvBs.js";import"./chevron-right-CyE8jcbn.js";import"./index-CwhdJaVg.js";import"./index-B_Os2ghw.js";import"./index-CJZqa-kr.js";import"./index-C9GonLHF.js";import"./circle-check-CJmQNw_U.js";import"./trash-2-D8UpIHBH.js";import"./check-BZhepUpU.js";import"./shopping-bag-TtCDC01g.js";import"./dialog-Do7ESPrT.js";import"./x-hBSqTjfa.js";import"./separator-DpUia1Ar.js";import"./index-C-vN8jX4.js";import"./sheet-BJFcoitR.js";import"./index-CfChaKac.js";import"./index-DzhEK4jt.js";import"./index-iS2GCZ5y.js";import"./index-CVnnicxK.js";import"./index-Bz80iYGN.js";import"./index-DiBfayRM.js";import"./index-DDCOIm2e.js";import"./chevrons-up-down-CmD-hWyD.js";import"./badge-check-C3DjHgnO.js";import"./ApplicationLogo-CDotYN88.js";import"./users-DyLj9nwM.js";import"./layout-grid-DSJln_pY.js";import"./index-BdQq_4o_.js";import"./index-DLsOI5U2.js";import"./chevron-down-CS-ozzzB.js";import"./chevron-up-D9DUAay6.js";import"./ellipsis-DmatcEia.js";import"./chevron-left-BDLIoQOo.js";function Ve({subscriptions:l,filters:d}){const[n,u]=m.useState(d.search||""),[o,j]=m.useState(d.status||"all"),f=a=>{a.preventDefault(),p.get(route("subscriptions.index"),{search:n,status:o},{preserveState:!0})},g=a=>{j(a),p.get(route("subscriptions.index"),{search:n,status:a},{preserveState:!0})},y=a=>{switch(a){case"active":return e.jsx(t,{className:"bg-green-600",children:"Activa"});case"trialing":return e.jsx(t,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"En Prueba"});case"past_due":return e.jsx(t,{variant:"destructive",children:"En Mora"});case"cancelled":return e.jsx(t,{variant:"outline",className:"text-gray-500",children:"Cancelada"});case"expired":return e.jsx(t,{variant:"outline",className:"text-gray-500",children:"Expirada"});default:return e.jsx(t,{variant:"outline",children:a})}};return e.jsxs(N,{header:"Gestión de Suscripciones",children:[e.jsx(v,{title:"Suscripciones"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{className:"mb-6",children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[e.jsxs("form",{onSubmit:f,className:"relative w-full sm:w-80",children:[e.jsx(F,{className:"absolute left-3 top-2 h-4 w-4 text-gray-400"}),e.jsx(_,{placeholder:"Buscar por ID de cliente o tienda...",value:n,onChange:a=>u(a.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(D,{className:"text-sm font-medium text-muted-foreground whitespace-nowrap",children:"Estado:"}),e.jsxs(I,{value:o,onValueChange:g,children:[e.jsx(P,{className:"w-[180px]",children:e.jsx(H,{placeholder:"Filtrar estado"})}),e.jsxs(A,{children:[e.jsx(i,{value:"all",children:"Todas las suscripciones"}),e.jsx(i,{value:"active",children:"Activas"}),e.jsx(i,{value:"trialing",children:"En Prueba"}),e.jsx(i,{value:"past_due",children:"En Mora"}),e.jsx(i,{value:"cancelled",children:"Canceladas"})]})]})]})]})})}),e.jsxs(x,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Listado de Suscripciones"}),e.jsx(w,{children:"Visualiza el estado de las suscripciones de tus clientes."})]}),e.jsxs(h,{children:[e.jsxs(b,{children:[e.jsx(E,{children:e.jsxs(c,{children:[e.jsx(r,{children:"ID Suscripción"}),e.jsx(r,{children:"Tienda"}),e.jsx(r,{children:"Plan"}),e.jsx(r,{children:"Estado"}),e.jsx(r,{children:"Ciclo"}),e.jsx(r,{children:"Próximo Pago"})]})}),e.jsx(T,{children:l.data.length===0?e.jsx(c,{children:e.jsx(s,{colSpan:6,className:"h-[400px]",children:e.jsxs(L,{className:"h-full",children:[e.jsx(k,{children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-full mb-4",children:e.jsx(O,{className:"h-8 w-8 text-gray-400"})})}),e.jsxs(M,{children:[e.jsx(V,{children:"No hay suscripciones"}),e.jsx(z,{children:"Aún no se han registrado suscripciones activas en el sistema."})]})]})})}):l.data.map(a=>e.jsxs(c,{children:[e.jsxs(s,{className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:["#",a.id]}),e.jsx(s,{className:"font-medium",children:a.tenant?.name||`Tienda #${a.tenant?.id}`}),e.jsx(s,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:a.plan?.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[new Intl.NumberFormat("es-CO",{style:"currency",currency:a.plan?.currency||"COP"}).format(a.plan?.monthly_price||0),"/mes"]})]})}),e.jsx(s,{children:y(a.status)}),e.jsx(s,{className:"capitalize",children:a.billing_cycle==="monthly"?"Mensual":a.billing_cycle==="yearly"?"Anual":a.billing_cycle==="quarterly"?"Trimestral":a.billing_cycle==="weekly"?"Semanal":a.billing_cycle==="daily"?"Diario":a.billing_cycle}),e.jsx(s,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(R,{className:"h-4 w-4"}),a.next_payment_date?new Date(a.next_payment_date).toLocaleDateString():"-"]})})]},a.id))})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(B,{links:l.links})})]})]})]})]})}export{Ve as default};
