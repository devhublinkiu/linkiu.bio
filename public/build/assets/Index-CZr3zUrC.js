import{r as u,j as e,H as D,a as j,t as b}from"./app-BxeeMXn5.js";import{A}from"./AdminLayout-qCE3vY7L.js";import{B as g}from"./button-7JWLOcK_.js";import{T as P,a as y,b as c,c as t,d as C,e as i}from"./table-3dZB4sa5.js";import{P as T,D as S,i as E,l as R,m as M,p as f}from"./dropdown-menu-y9rp4bWE.js";import{B as d}from"./badge-lrHzGyyu.js";import{A as k,a as B,b as H,c as _,d as q,e as z,f as F,g as I}from"./alert-dialog-M1Oqq8sv.js";import{P as L}from"./plus-CGb4S1OW.js";import{S as O}from"./shield-Bco25DSE.js";import{E as G}from"./ellipsis-BUaddE5J.js";import{S as J}from"./square-pen-DyMbWI9a.js";import{T as K}from"./trash-2-Cefy4eHW.js";import"./utils-C-R0dfCD.js";import"./card-CZ4HJuOG.js";import"./progress-BPtmN4cS.js";import"./index-D1_1hXqK.js";import"./index-Dtj3r8is.js";import"./menuConfig--lJI1wgO.js";import"./video-BBI0Mdxh.js";import"./createLucideIcon-MMsaX1RM.js";import"./chef-hat-BUkOBHO9.js";import"./table-YYiP2uiH.js";import"./user-CUi44rAN.js";import"./map-pin-DbqcMmJZ.js";import"./banknote-o40mAnOF.js";import"./star-Cxzywz77.js";import"./users-Bu-h6n7y.js";import"./calendar-check-DZWxogn-.js";import"./calendar-BmHj6uld.js";import"./briefcase-ClT8Apdn.js";import"./truck-Dctgs6Id.js";import"./message-circle-BPpK8KIf.js";import"./credit-card-DdNcKhKR.js";import"./package-1Cz2kpnt.js";import"./shopping-bag-CWfZSTHo.js";import"./layout-dashboard-BHjPtgyJ.js";import"./badge-check-DHBa0N5U.js";import"./lock-D8DYOORy.js";import"./chevron-right-DPgD6mkS.js";import"./sparkles-Bns8Lzd1.js";import"./separator-0SREGApO.js";import"./external-link-BEZwjyKz.js";import"./chevron-down-CUwoWnp1.js";import"./headphones-DG2WmJqQ.js";import"./sonner-CzgRTX_z.js";import"./index-B6i64pSH.js";import"./index-BAK1YxAc.js";import"./index-YFI2wHgC.js";import"./index-qgmO2-AH.js";import"./circle-check-BQHjiPz9.js";import"./check-DyXxeGP9.js";import"./dialog-bj0tKiGn.js";import"./x-CpN8cc9J.js";import"./input-DAizBa_g.js";import"./sheet-Bbp6VhsK.js";import"./index-BUGEk3O6.js";import"./index-B6sjIBFy.js";import"./index-D8L8_pCG.js";import"./index-DWUEdQX6.js";import"./index-B9B_fttR.js";function Ue({auth:Q,roles:p,currentUserRole:o,currentTenant:a}){const[N,n]=u.useState(!1),[l,m]=u.useState(null),h=s=>o?o.is_owner||o.permissions.includes("*")||o.permissions.includes(s):!1,x=(s,r,w)=>{s.preventDefault(),h(r)?j.visit(w):n(!0)},v=(s,r)=>{h(s)?j.delete(r,{onSuccess:()=>b.success("Rol eliminado con éxito")}):n(!0)};return e.jsxs(A,{title:"Roles y Permisos",children:[e.jsx(D,{title:"Roles y Permisos"}),e.jsx(T,{open:N,onOpenChange:n}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Roles y Permisos"}),e.jsx("p",{className:"text-slate-500",children:"Administra los roles y niveles de acceso de tu equipo."})]}),e.jsxs(g,{className:"cursor-pointer",onClick:s=>x(s,"roles.create",route("tenant.roles.create",{tenant:a?.slug})),children:[e.jsx(L,{}),"Crear Nuevo Rol"]})]}),e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white overflow-hidden shadow-sm",children:e.jsxs(P,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(t,{className:"w-[300px]",children:"Nombre del Rol"}),e.jsx(t,{children:"Permisos Asignados"}),e.jsx(t,{children:"Tipo"}),e.jsx(t,{className:"text-right",children:"Acciones"})]})}),e.jsxs(C,{children:[p.map(s=>e.jsxs(c,{children:[e.jsx(i,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),s.name]})}),e.jsx(i,{children:e.jsxs(d,{variant:"secondary",className:"font-mono",children:[s.permissions_count," permisos"]})}),e.jsx(i,{children:s.is_system?e.jsx(d,{variant:"secondary",children:"Sistema"}):e.jsx(d,{variant:"outline",children:"Personalizado"})}),e.jsx(i,{className:"text-right",children:e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Abrir menú"})]})}),e.jsxs(R,{align:"end",children:[e.jsx(M,{children:"Acciones"}),e.jsxs(f,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onClick:r=>x(r,"roles.update",route("tenant.roles.edit",{tenant:a?.slug,role:s.id})),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Editar Permisos"]}),!s.is_system&&e.jsx(e.Fragment,{children:e.jsxs(f,{variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onSelect:()=>m(s),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Eliminar Rol"]})})]})]})})]},s.id)),p.length===0&&e.jsx(c,{children:e.jsx(i,{colSpan:4,className:"h-24 text-center text-slate-500",children:"No hay roles creados."})})]})]})})]}),e.jsx(k,{open:!!l,onOpenChange:s=>!s&&m(null),children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(_,{children:"¿Eliminar Rol?"}),e.jsxs(q,{children:["¿Estás seguro de que deseas eliminar el rol ",e.jsx("span",{className:"font-bold",children:l?.name}),"? Esta acción no se puede deshacer."]})]}),e.jsxs(z,{children:[e.jsx(F,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Cancelar"}),e.jsx(I,{onClick:()=>{v("roles.delete",route("tenant.roles.destroy",{tenant:a?.slug,role:l?.id})),m(null)},variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Eliminar"})]})]})})]})}export{Ue as default};
