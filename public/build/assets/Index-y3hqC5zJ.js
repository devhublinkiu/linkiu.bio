import{r as u,j as e,H as D,a as j,t as b}from"./app-BWcZUh_k.js";import{A}from"./AdminLayout-B1UOdNJe.js";import{B as g}from"./button-Bx2UyVdr.js";import{T as P,a as y,b as c,c as t,d as C,e as i}from"./table-C6BCtdGR.js";import{P as T,D as S,i as E,l as R,m as M,p as f}from"./dropdown-menu-CAUtCpeY.js";import{B as d}from"./badge-CBYtAEFo.js";import{A as k,a as B,b as H,c as _,d as q,e as z,f as F,g as I}from"./alert-dialog-BycbrUrL.js";import{P as L}from"./plus-CeP7VFm4.js";import{S as O}from"./shield-CH8G-oHZ.js";import{E as G}from"./ellipsis-Cjb3yZJR.js";import{S as J}from"./square-pen-DpRZjwi6.js";import{T as K}from"./trash-2-CET8ErO_.js";import"./utils-kbTUnUPe.js";import"./card-DoCIMrrQ.js";import"./progress-xlTaPrZn.js";import"./index-C3JqQcmO.js";import"./index-Cr5NXUSq.js";import"./menuConfig-CEHCLp95.js";import"./video-CpkL3IeV.js";import"./createLucideIcon-DfYzJ-dS.js";import"./chef-hat-BQH1ZOqC.js";import"./table-DFCKiiJU.js";import"./user-D-VQ4bLa.js";import"./map-pin-BgI0Fwjd.js";import"./banknote-7cPYNmAK.js";import"./star-cbFfhcmw.js";import"./users-DVRxXIYk.js";import"./calendar-check-wNs4LiRY.js";import"./calendar-Do7Le9Bn.js";import"./briefcase-Ba4-n3eX.js";import"./truck-YC6dQT8N.js";import"./message-circle-CIDtOzq-.js";import"./credit-card-wYINwV0d.js";import"./package-CsHU_uPD.js";import"./shopping-bag-D1_yKv0G.js";import"./layout-dashboard-MM33-NJe.js";import"./badge-check-CDye1NaZ.js";import"./lock-eVECApui.js";import"./chevron-right-BEfVsxal.js";import"./sparkles-cnY1d8ny.js";import"./separator-RbFfPp9_.js";import"./external-link-C1tvWK6f.js";import"./chevron-down-B1sQTrrJ.js";import"./headphones-Bv4Q0kgK.js";import"./sonner-DUQUgho7.js";import"./index-CwGn2cVl.js";import"./index-POewg-3Z.js";import"./index-DR22RqQm.js";import"./index-CjaLlWml.js";import"./circle-check-DQmrUMdF.js";import"./check-CmqAQkxG.js";import"./dialog-BbHe0xOg.js";import"./x-CnE69C72.js";import"./input-CMGBXTtX.js";import"./sheet-CXe3NyIA.js";import"./index-B74vV9QQ.js";import"./index-gldBq1zT.js";import"./index-_mriArsD.js";import"./index-DqPTcVec.js";import"./index-nDWJybZ2.js";import"./index-q6x7vkRP.js";function es({auth:Q,roles:p,currentUserRole:o,currentTenant:a}){const[N,n]=u.useState(!1),[l,m]=u.useState(null),h=s=>o?o.is_owner||o.permissions.includes("*")||o.permissions.includes(s):!1,x=(s,r,w)=>{s.preventDefault(),h(r)?j.visit(w):n(!0)},v=(s,r)=>{h(s)?j.delete(r,{onSuccess:()=>b.success("Rol eliminado con éxito")}):n(!0)};return e.jsxs(A,{title:"Roles y Permisos",children:[e.jsx(D,{title:"Roles y Permisos"}),e.jsx(T,{open:N,onOpenChange:n}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Roles y Permisos"}),e.jsx("p",{className:"text-slate-500",children:"Administra los roles y niveles de acceso de tu equipo."})]}),e.jsxs(g,{className:"cursor-pointer",onClick:s=>x(s,"roles.create",route("tenant.roles.create",{tenant:a?.slug})),children:[e.jsx(L,{}),"Crear Nuevo Rol"]})]}),e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white overflow-hidden shadow-sm",children:e.jsxs(P,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(t,{className:"w-[300px]",children:"Nombre del Rol"}),e.jsx(t,{children:"Permisos Asignados"}),e.jsx(t,{children:"Tipo"}),e.jsx(t,{className:"text-right",children:"Acciones"})]})}),e.jsxs(C,{children:[p.map(s=>e.jsxs(c,{children:[e.jsx(i,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),s.name]})}),e.jsx(i,{children:e.jsxs(d,{variant:"secondary",className:"font-mono",children:[s.permissions_count," permisos"]})}),e.jsx(i,{children:s.is_system?e.jsx(d,{variant:"secondary",children:"Sistema"}):e.jsx(d,{variant:"outline",children:"Personalizado"})}),e.jsx(i,{className:"text-right",children:e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Abrir menú"})]})}),e.jsxs(R,{align:"end",children:[e.jsx(M,{children:"Acciones"}),e.jsxs(f,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onClick:r=>x(r,"roles.update",route("tenant.roles.edit",{tenant:a?.slug,role:s.id})),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Editar Permisos"]}),!s.is_system&&e.jsx(e.Fragment,{children:e.jsxs(f,{variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onSelect:()=>m(s),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Eliminar Rol"]})})]})]})})]},s.id)),p.length===0&&e.jsx(c,{children:e.jsx(i,{colSpan:4,className:"h-24 text-center text-slate-500",children:"No hay roles creados."})})]})]})})]}),e.jsx(k,{open:!!l,onOpenChange:s=>!s&&m(null),children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(_,{children:"¿Eliminar Rol?"}),e.jsxs(q,{children:["¿Estás seguro de que deseas eliminar el rol ",e.jsx("span",{className:"font-bold",children:l?.name}),"? Esta acción no se puede deshacer."]})]}),e.jsxs(z,{children:[e.jsx(F,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Cancelar"}),e.jsx(I,{onClick:()=>{v("roles.delete",route("tenant.roles.destroy",{tenant:a?.slug,role:l?.id})),m(null)},variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Eliminar"})]})]})})]})}export{es as default};
