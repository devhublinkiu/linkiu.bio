import{c as g,r as N,t as b,j as e,H as C,a as c}from"./app-D9wldZxo.js";import{S as _}from"./SuperAdminLayout-CPtcwFpO.js";import{C as S,a as v,b as w,c as T,d as E}from"./card-DbFVjWqh.js";import{T as y,a as R,b as l,c as t,d as H,e as a}from"./table-B6cmMBvL.js";import{S as d,a as x,b as h,c as j,d as n}from"./select-Bbe1RuXu.js";import{S as A}from"./Pagination-3BS96hmy.js";import{C as I}from"./circle-alert-BvfX9dxT.js";import{E as V}from"./external-link-pORnC0H4.js";import{I as k}from"./image-DcvZ4YHL.js";import{f as z}from"./formatDistanceToNow-CJnsltzk.js";import{e as D}from"./es-BteQoBuv.js";import"./button-Dadb_Lep.js";import"./utils-B0KHI9vB.js";import"./dropdown-menu-C4-9o8Rw.js";import"./createLucideIcon-CJjlOp5I.js";import"./chevron-right-BSwXEIvG.js";import"./index-BDWpq_YI.js";import"./index-BrcTw33p.js";import"./index-BMdzuiHN.js";import"./index-tfOuMV4B.js";import"./circle-check-CN90YBLh.js";import"./trash-2-CMPgRqgc.js";import"./check-BAxbGpAF.js";import"./credit-card-CPDlDYf1.js";import"./shopping-bag-CQGcPT0-.js";import"./dialog-C0Lg02Tk.js";import"./x-dvUxMxq3.js";import"./input-rMsYcH4C.js";import"./separator-L5pP8n2q.js";import"./index-CZBSMaku.js";import"./sheet-BP6KOnln.js";import"./index-CbR7iZJO.js";import"./index-DeHGgcwY.js";import"./index-CXzOyCXW.js";import"./index-DdTS5Ad2.js";import"./index-fFU5c_p6.js";import"./index-Dvu8qGWr.js";import"./index-D4lOZYra.js";import"./echo-CmTENghG.js";import"./chevrons-up-down-Cepco8Sn.js";import"./badge-check-CEpGdEtW.js";import"./ApplicationLogo-DuPOXIDR.js";import"./users-OjDIvTV8.js";import"./layout-grid-DMUl8Ye2.js";import"./index-BdQq_4o_.js";import"./index--Jev_GdI.js";import"./chevron-down-Dux0wLDw.js";import"./chevron-up-IlwuOcq-.js";import"./ellipsis-BfbyL5_C.js";import"./chevron-left-BFxUkP0a.js";import"./constructNow-ChcPjMH_.js";import"./differenceInCalendarMonths-B3kfrhWB.js";import"./endOfMonth-DL9zlqV0.js";function De({reports:i,filters:m,statuses:p}){const{flash:o}=g().props;N.useEffect(()=>{o?.success&&b.success(o.success)},[o?.success]);const u=(s,r)=>{c.patch(route("superadmin.store-reports.update-status",s),{status:r},{preserveScroll:!0})};return e.jsxs(_,{header:"Reportes tiendas",children:[e.jsx(C,{title:"Reportes tiendas"}),e.jsx("div",{className:"space-y-6",children:e.jsxs(S,{children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"size-5"}),"Reportes de problemas con negocios"]}),e.jsx(T,{children:"Reportes enviados por usuarios desde las tiendas. Email y WhatsApp son opcionales (pueden ser anónimos)."})]}),e.jsxs(E,{children:[e.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:e.jsxs(d,{value:m.status??"all",onValueChange:s=>c.get(route("superadmin.store-reports.index"),{...m,status:s==="all"?void 0:s},{preserveState:!0}),children:[e.jsx(x,{className:"w-[180px]",children:e.jsx(h,{placeholder:"Estado"})}),e.jsxs(j,{children:[e.jsx(n,{value:"all",children:"Todos los estados"}),Object.entries(p).map(([s,r])=>e.jsx(n,{value:s,children:r},s))]})]})}),e.jsxs(y,{children:[e.jsx(R,{children:e.jsxs(l,{children:[e.jsx(t,{children:"Tienda"}),e.jsx(t,{children:"Categoría"}),e.jsx(t,{children:"Mensaje"}),e.jsx(t,{children:"Contacto"}),e.jsx(t,{children:"Evidencia"}),e.jsx(t,{children:"Estado"}),e.jsx(t,{children:"Fecha"})]})}),e.jsx(H,{children:i.data.length===0?e.jsx(l,{children:e.jsx(a,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No hay reportes."})}):i.data.map(s=>e.jsxs(l,{children:[e.jsx(a,{children:s.tenant?e.jsxs("a",{href:route("tenants.show",s.tenant.id),target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:[s.tenant.name,e.jsx(V,{className:"size-3"})]}):e.jsx("span",{className:"text-muted-foreground",children:"—"})}),e.jsx(a,{children:e.jsx("span",{className:"text-sm",children:s.category_label})}),e.jsx(a,{className:"max-w-[200px]",children:e.jsx("span",{className:"text-sm line-clamp-2",title:s.message,children:s.message_preview})}),e.jsx(a,{className:"text-sm",children:s.reporter_email||s.reporter_whatsapp?e.jsxs("span",{children:[s.reporter_email&&e.jsx("span",{children:s.reporter_email}),s.reporter_email&&s.reporter_whatsapp&&" · ",s.reporter_whatsapp&&e.jsx("span",{children:s.reporter_whatsapp})]}):e.jsx("span",{className:"text-muted-foreground",children:"Anónimo"})}),e.jsx(a,{children:s.image_url?e.jsxs("a",{href:s.image_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1 text-sm",children:[e.jsx(k,{className:"size-4"}),"Ver"]}):e.jsx("span",{className:"text-muted-foreground",children:"—"})}),e.jsx(a,{children:e.jsxs(d,{value:s.status,onValueChange:r=>u(s.id,r),children:[e.jsx(x,{className:"w-[140px]",children:e.jsx(h,{})}),e.jsx(j,{children:Object.entries(p).map(([r,f])=>e.jsx(n,{value:r,children:f},r))})]})}),e.jsx(a,{className:"text-sm text-muted-foreground",children:z(new Date(s.created_at),{addSuffix:!0,locale:D})})]},s.id))})]}),i.data.length>0&&e.jsx(A,{links:i.links,className:"mt-4"})]})]})})]})}export{De as default};
