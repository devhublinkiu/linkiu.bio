import{r as o,c as P,j as e,t as z,a as A,L as q,T as K}from"./app-Bo0l-nyL.js";import{A as W}from"./index-XobX3gjF.js";import{m as U}from"./proxy-BxiFCJPO.js";import{S as $}from"./shopping-bag-ovPa-jWO.js";import{C as B}from"./chevron-right-B4UhmXxg.js";import{L as H}from"./lock-C0idjUkm.js";import{T as G}from"./truck-NgeJ0yFz.js";import{C as J}from"./credit-card-C_0EBMTX.js";import{H as Q}from"./headphones-CjhisdwC.js";import{c as V}from"./createLucideIcon-3AckdKRt.js";import{c as F}from"./utils-DvD3N-9F.js";import{D as X,a as Y,b as Z,c as ee,d as te,e as se}from"./dialog-NO27f9rI.js";import{B as D}from"./button-10Bc0E3d.js";import{I}from"./input-BQLGMA-c.js";import{L as _}from"./label-BvJxTSA7.js";import{T as ae}from"./textarea-DtyekHu-.js";import{A as re}from"./arrow-right-C4DgQIQq.js";import{M as ie}from"./map-pin-D3kvadl2.js";const ne=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],R=V("arrow-up-right",ne),M=o.createContext(void 0);function oe({children:r}){const[n,i]=o.useState([]),[d,m]=o.useState(!1),[p,j]=o.useState(null),[y,C]=o.useState(null),[h,S]=o.useState(!1);function g(t){return`${t.id}_${JSON.stringify(t.variant_options||[])}`}o.useEffect(()=>{const t=localStorage.getItem("gastronomy_cart");if(t)try{const a=JSON.parse(t).map(c=>({...c,lineKey:c.lineKey||g(c)}));i(a)}catch{i([])}S(!0)},[]),o.useEffect(()=>{h&&localStorage.setItem("gastronomy_cart",JSON.stringify(n))},[n,h]);const{selectedTable:b}=P().props;o.useEffect(()=>{b&&j(b)},[b]);function N(t){const s=t?.image_url??t?.imageUrl;if(typeof s!="string")return;const a=s.trim();return a.startsWith("http://")||a.startsWith("https://")?a:void 0}const k=t=>{const s=t.variant_options||[],a=g({id:t.id,variant_options:s}),c=N(t);i(u=>u.find(f=>f.lineKey===a)?(z.success(`Agregaste otro ${t.name}`,{description:"Cantidad actualizada",duration:2e3}),u.map(f=>f.lineKey===a?{...f,quantity:f.quantity+(t.quantity||1),image_url:c??f.image_url}:f)):(z.success("Producto agregado",{description:`${t.name} añadido al carrito`,duration:2e3}),[...u,{id:t.id,name:t.name,price:Number(t.price),original_price:t.original_price?Number(t.original_price):void 0,image_url:c??void 0,quantity:t.quantity||1,variant_options:s,lineKey:a}]))},x=t=>{i(s=>s.filter(a=>a.lineKey!==t))},v=(t,s)=>{if(s<1){x(t);return}i(a=>a.map(c=>c.lineKey===t?{...c,quantity:s}:c))},T=()=>{i([]),localStorage.removeItem("gastronomy_cart")},L=t=>{const s=new Map(t.map(a=>[a.id,a.image_url]));i(a=>a.map(c=>{const u=s.get(c.id);if(u==null)return c;const w=typeof u=="string"?u.trim():"";return!w||!w.startsWith("http://")&&!w.startsWith("https://")?c:{...c,image_url:w}}))},l=n.reduce((t,s)=>t+s.price*s.quantity,0),E=n.reduce((t,s)=>t+s.quantity,0);return e.jsx(M.Provider,{value:{items:n,addToCart:k,removeFromCart:x,updateQuantity:v,clearCart:T,mergeProductImageUrls:L,cartTotal:l,cartCount:E,isCartOpen:d,setIsCartOpen:m,selectedTable:p,setSelectedTable:j,selectedPaymentMethod:y,setSelectedPaymentMethod:C,isLoaded:h},children:r})}function O(){const r=o.useContext(M);if(r===void 0)throw new Error("useCart must be used within a CartProvider");return r}function le(){const{cartCount:r,cartTotal:n}=O(),{tenant:i}=P().props,d=m=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(m);return e.jsx(W,{children:r>0&&e.jsx("div",{className:"fixed bottom-4 md:bottom-8 left-4 right-4 z-50 pointer-events-none flex justify-center",children:e.jsxs(U.button,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},onClick:()=>A.visit(route("tenant.cart",i.slug)),className:"pointer-events-auto w-[calc(100%-2rem)] max-w-[448px] bg-slate-900/90 backdrop-blur-md text-white p-4 rounded-2xl shadow-xl shadow-slate-900/20 flex items-center justify-between group active:scale-[0.98] transition-all border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"bg-white/20 p-2 rounded-xl relative",children:[e.jsx($,{className:"w-5 h-5 text-white"}),e.jsx("span",{className:"absolute -top-1 -right-1 bg-amber-400 text-slate-900 text-[10px] font-bold w-4 h-4 flex items-center justify-center rounded-full",children:r})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-xs text-slate-300 font-medium",children:"Total Estimado"}),e.jsx("span",{className:"text-lg font-black tracking-tight",children:d(n)})]})]}),e.jsxs("div",{className:"flex items-center gap-1 pl-4 border-l border-white/10 group-hover:translate-x-1 transition-transform",children:[e.jsx("span",{className:"text-sm font-bold",children:"Ver Pedido"}),e.jsx(B,{className:"w-4 h-4"})]})]})})})}const ce=[{slug:"terminos-y-condiciones",label:"Términos y condiciones"},{slug:"politica-privacidad",label:"Política de privacidad"},{slug:"politica-cookies",label:"Política de cookies"},{slug:"condiciones-uso",label:"Condiciones de uso"},{slug:"politica-devoluciones",label:"Política de devoluciones y reembolsos"},{slug:"condiciones-reservas",label:"Condiciones de reservas"},{slug:"informacion-consumidores",label:"Información para consumidores"}];function de(){const r=P(),i=(r.props.currentTenant??r.props.tenant)?.slug??"";return e.jsx("footer",{className:"mt-auto bg-slate-950 px-8 py-12 text-sm text-slate-300 pb-32",children:e.jsxs("div",{className:"mx-auto max-w-[480px] space-y-6",children:[e.jsxs("section",{className:"grid grid-cols-2 gap-2 text-center sm:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-xl bg-emerald-500/25 text-emerald-400 shadow-[0_0_20px_rgba(16,185,129,0.35)]",children:e.jsx(H,{className:"size-5","aria-hidden":!0})}),e.jsx("span",{className:"text-xs font-medium text-slate-300",children:"Seguridad SSL"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-xl bg-blue-500/25 text-blue-400 shadow-[0_0_20px_rgba(59,130,246,0.35)]",children:e.jsx(G,{className:"size-5","aria-hidden":!0})}),e.jsx("span",{className:"text-xs font-medium text-slate-300",children:"Envíos seguros"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-xl bg-violet-500/25 text-violet-400 shadow-[0_0_20px_rgba(139,92,246,0.35)]",children:e.jsx(J,{className:"size-5","aria-hidden":!0})}),e.jsx("span",{className:"text-xs font-medium text-slate-300",children:"Pagos seguros"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-xl bg-amber-500/25 text-amber-400 shadow-[0_0_20px_rgba(245,158,11,0.35)]",children:e.jsx(Q,{className:"size-5","aria-hidden":!0})}),e.jsx("span",{className:"text-xs font-medium text-slate-300",children:"Soporte"})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"mb-3 flex items-center gap-2 font-semibold uppercase tracking-wider text-slate-200",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"Legal"})}),e.jsx("ul",{className:"flex flex-col gap-1",children:ce.map(d=>e.jsx("li",{children:e.jsxs(q,{href:i?route("tenant.legal.show",{tenant:i,slug:d.slug}):"#",className:"flex items-center gap-2 py-0.5 text-slate-400 transition-colors hover:text-slate-100",children:[e.jsx(R,{className:"size-3.5 shrink-0 text-slate-500","aria-hidden":!0}),d.label]})},d.slug))})]}),e.jsx("section",{children:e.jsx("h3",{className:"mb-3 flex items-center gap-2 font-semibold uppercase tracking-wider text-slate-200",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"Medios de pago"})})}),e.jsx("section",{children:e.jsxs("a",{href:"https://linkiu.bio",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center text-slate-300 transition-colors hover:text-slate-100",children:[e.jsxs("span",{className:"font-medium text-gray-400",children:["Hecho con amor por ",e.jsx("span",{className:"text-white font-bold",children:"Linkiu"})]}),e.jsx(R,{className:"size-3.5 text-white","aria-hidden":!0})]})})]})})}const me=({children:r,className:n,shimmerWidth:i=100,...d})=>e.jsx("span",{style:{"--shiny-width":`${i}px`},className:F("mx-auto max-w-md text-neutral-600/70 dark:text-neutral-400/70","animate-shiny-text [background-size:var(--shiny-width)_100%] bg-clip-text [background-position:0_0] bg-no-repeat [transition:background-position_1s_cubic-bezier(.6,.6,0,1)_infinite]","bg-gradient-to-r from-transparent via-black/80 via-50% to-transparent dark:via-white/80",n),...d,children:r}),xe=[{value:"problema_pedido",label:"Problema con pedido"},{value:"publicidad_enganosa",label:"Publicidad engañosa"},{value:"trato_indebido",label:"Trato indebido"},{value:"producto_servicio",label:"Producto o servicio"},{value:"otro",label:"Otro"}];function ue({open:r,onOpenChange:n,tenantSlug:i}){const[d,m]=o.useState("otro"),[p,j]=o.useState(""),[y,C]=o.useState(""),[h,S]=o.useState(""),[g,b]=o.useState(null),[N,k]=o.useState(!1),[x,v]=o.useState({}),T=()=>{m("otro"),j(""),C(""),S(""),b(null),v({})},L=l=>{if(l.preventDefault(),v({}),!p.trim()){v({message:"Describe el problema (obligatorio)."});return}k(!0);const E=route("tenant.report.store",{tenant:i}),t={category:d,message:p.trim(),url_context:typeof window<"u"?window.location.href:""};y.trim()&&(t.reporter_email=y.trim()),h.trim()&&(t.reporter_whatsapp=h.trim()),g&&(t.image=g),A.post(E,t,{forceFormData:!0,onSuccess:()=>{z.success("Gracias, hemos recibido tu reporte. Lo revisaremos a la brevedad."),n(!1),T()},onError:s=>{const a={};if(typeof s=="object"&&s!==null)for(const[c,u]of Object.entries(s))a[c]=Array.isArray(u)?u[0]:String(u);v(a),z.error("Revisa los campos e intenta de nuevo.")},onFinish:()=>k(!1)})};return e.jsx(X,{open:r,onOpenChange:n,children:e.jsxs(Y,{className:"sm:max-w-md",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Reportar problema con este negocio"}),e.jsx(te,{children:"Tu reporte es confidencial. Los datos de contacto son opcionales si prefieres ser anónimo."})]}),e.jsxs("form",{onSubmit:L,className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(_,{htmlFor:"report-category",children:"Categoría"}),e.jsx("select",{id:"report-category",value:d,onChange:l=>m(l.target.value),className:F("h-9 w-full rounded-lg border border-input bg-transparent px-2.5 py-1 text-sm outline-none focus-visible:ring-2 focus-visible:ring-ring"),children:xe.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(_,{htmlFor:"report-message",children:"Mensaje *"}),e.jsx(ae,{id:"report-message",value:p,onChange:l=>j(l.target.value),placeholder:"Describe el problema...",rows:4,maxLength:2e3,className:x.message?"border-destructive":""}),x.message&&e.jsx("p",{className:"text-xs text-destructive",children:x.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(_,{htmlFor:"report-email",children:"Correo (opcional)"}),e.jsx(I,{id:"report-email",type:"email",value:y,onChange:l=>C(l.target.value),placeholder:"para poder contactarte"}),x.reporter_email&&e.jsx("p",{className:"text-xs text-destructive",children:x.reporter_email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(_,{htmlFor:"report-whatsapp",children:"WhatsApp (opcional)"}),e.jsx(I,{id:"report-whatsapp",type:"text",value:h,onChange:l=>S(l.target.value),placeholder:"ej. 3001234567"}),x.reporter_whatsapp&&e.jsx("p",{className:"text-xs text-destructive",children:x.reporter_whatsapp})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(_,{htmlFor:"report-image",children:"Evidencia con imagen (opcional)"}),e.jsx(I,{id:"report-image",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:l=>b(l.target.files?.[0]??null)}),g&&e.jsx("p",{className:"text-xs text-muted-foreground",children:g.name}),x.image&&e.jsx("p",{className:"text-xs text-destructive",children:x.image})]}),e.jsxs(se,{showCloseButton:!1,children:[e.jsx(D,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:N,children:"Cancelar"}),e.jsx(D,{type:"submit",disabled:N,children:N?"Enviando...":"Enviar reporte"})]})]})]})})}function pe(){const[r,n]=o.useState(!1),m=P().props.currentTenant?.slug??"";return m?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>n(!0),className:F("group flex w-full items-center justify-center border-y border-black/5 bg-neutral-100 py-2 px-4 text-base text-white transition-all ease-in hover:cursor-pointer hover:bg-neutral-200 dark:border-white/5 dark:bg-neutral-900 dark:hover:bg-neutral-800"),children:e.jsxs(me,{className:"inline-flex items-center justify-center gap-1.5 px-4 py-1 transition ease-out hover:text-neutral-600 hover:duration-300 hover:dark:text-neutral-400",children:[e.jsxs("span",{children:["¿Problemas con este negocio? ",e.jsx("span",{className:"text-red-600 font-bold",children:"Reporta aquí"})]}),e.jsx(re,{className:"ml-1 size-3 shrink-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0.5","aria-hidden":!0})]})}),e.jsx(ue,{open:r,onOpenChange:n,tenantSlug:m})]}):null}const he=({children:r,bgColor:n,renderBottomAction:i,showFloatingCart:d=!0})=>{const m=O(),{selectedTable:p}=m;return e.jsxs("div",{className:"h-dvh w-full flex justify-center items-stretch relative overflow-hidden transition-colors duration-500 bg-white",children:[e.jsx("div",{className:"fixed inset-0 -z-30 bg-[url('https://images.unsplash.com/photo-1554118811-1e0d58224f24?q=80&w=2000&auto=format&fit=crop')] bg-cover bg-center"}),e.jsx("div",{className:"fixed inset-0 -z-20 transition-colors duration-500 mix-blend-multiply opacity-80",style:{backgroundColor:n||"#f0f2f5"}}),e.jsx("div",{className:"fixed inset-0 -z-10 backdrop-blur-[100px] bg-white/10"}),e.jsxs("div",{className:"w-full max-w-[480px] h-full max-h-[100dvh] bg-white shadow-2xl overflow-hidden flex flex-col relative mx-auto z-10",children:[p&&e.jsxs("div",{className:"bg-primary/10 text-primary px-4 py-2.5 text-[11px] font-black uppercase tracking-wider flex items-center justify-center gap-2 border-b border-primary/20 animate-in fade-in slide-in-from-top duration-700 z-50",children:[e.jsx(ie,{className:"w-3 h-3 animate-bounce"}),"Pidiendo en: ",e.jsx("span",{className:"opacity-80",children:p.name})," ",p.zone?.name&&e.jsxs("span",{className:"text-[9px] opacity-60 ml-0.5",children:["[",p.zone.name,"]"]})]}),e.jsx("div",{className:"scrollbar-public flex-1 min-h-0 relative overflow-y-auto overflow-x-hidden",children:e.jsxs("div",{className:"min-h-full flex flex-col",children:[e.jsx("div",{className:"flex-1",children:r}),e.jsx(pe,{}),e.jsx(de,{})]})}),d&&e.jsx(le,{}),i&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 px-6 z-40 sm:absolute sm:bottom-0",children:i(m)}),e.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-32 h-1 bg-slate-200 rounded-full sm:block hidden pointer-events-none mb-1 z-50"})]})]})};function Fe(r){return e.jsxs(oe,{children:[e.jsx(he,{...r}),e.jsx(K,{position:"top-center"})]})}export{Fe as P,O as u};
