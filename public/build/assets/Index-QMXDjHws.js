import{r as u,j as e,H as D,a as j,t as b}from"./app-B2i56772.js";import{A}from"./AdminLayout-DpFX9UTo.js";import{B as g}from"./button-BddZHLbc.js";import{T as P,a as y,b as c,c as t,d as C,e as i}from"./table-DbBtwsSd.js";import{P as T,D as S,i as E,l as R,m as M,p as f}from"./dropdown-menu-DmXnVWVS.js";import{B as d}from"./badge-v4EM3Inb.js";import{A as k,a as B,b as H,c as _,d as q,e as z,f as F,g as I}from"./alert-dialog-yqHfK6BW.js";import{P as L}from"./plus-CXHr8mdQ.js";import{S as O}from"./shield-BMdEYS_D.js";import{E as G}from"./ellipsis-CHJbh5YJ.js";import{S as J}from"./square-pen-C5XBxQsK.js";import{T as K}from"./trash-2-DFiSLFW9.js";import"./utils-DyIEM9Hy.js";import"./card-BWsdLjRP.js";import"./progress-CHg3IQdJ.js";import"./index-DBzmoSVG.js";import"./index-CAHj415D.js";import"./index-BKbrreay.js";import"./menuConfig-DmcJDscn.js";import"./video-DGfX4q0e.js";import"./createLucideIcon-D_eBnp1W.js";import"./chef-hat-CvyNNXzc.js";import"./table-BLLfHlez.js";import"./user-DHzOQ6OD.js";import"./map-pin-ri_iNx9P.js";import"./banknote-DNARpvAy.js";import"./star-BpzXTGgh.js";import"./users-4ML6WyRj.js";import"./calendar-check-CnVNb9CI.js";import"./calendar-Ck1wG4bv.js";import"./briefcase-C3iT5Z4z.js";import"./truck-lFBp_-Xb.js";import"./message-circle-5eeJlDPf.js";import"./credit-card-C_C5Gl_c.js";import"./package-DDNPJLjr.js";import"./shopping-bag-Bo9Pazs1.js";import"./layout-dashboard-Cd8XF3JQ.js";import"./badge-check-D1_tuun5.js";import"./lock-DD0Y-Lpl.js";import"./chevron-right-CbumkvGd.js";import"./sparkles-hzHxndp_.js";import"./separator-BeNm-P6u.js";import"./external-link-B2fnfMGN.js";import"./chevron-down-BDQOlKUd.js";import"./headphones-CDKhQ2od.js";import"./sonner-BG1d_7G1.js";import"./dialog-BfzucGwq.js";import"./index-DJSPV-or.js";import"./index-ykKLN3SD.js";import"./index-DvWOdVYN.js";import"./x-B5LJUYBC.js";import"./circle-check-qwWqnypp.js";import"./check-BXudH8di.js";import"./input-DBNIwXu0.js";import"./sheet-BYmPEYHR.js";import"./index-0TEkSQsx.js";import"./index-o5QoyLO9.js";import"./index-OfG7Dj8W.js";import"./index-BbbmFCg3.js";import"./index-DHp04QnP.js";function Ue({auth:Q,roles:p,currentUserRole:o,currentTenant:a}){const[N,n]=u.useState(!1),[l,m]=u.useState(null),h=s=>o?o.is_owner||o.permissions.includes("*")||o.permissions.includes(s):!1,x=(s,r,w)=>{s.preventDefault(),h(r)?j.visit(w):n(!0)},v=(s,r)=>{h(s)?j.delete(r,{onSuccess:()=>b.success("Rol eliminado con éxito")}):n(!0)};return e.jsxs(A,{title:"Roles y Permisos",children:[e.jsx(D,{title:"Roles y Permisos"}),e.jsx(T,{open:N,onOpenChange:n}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Roles y Permisos"}),e.jsx("p",{className:"text-slate-500",children:"Administra los roles y niveles de acceso de tu equipo."})]}),e.jsxs(g,{className:"cursor-pointer",onClick:s=>x(s,"roles.create",route("tenant.roles.create",{tenant:a?.slug})),children:[e.jsx(L,{}),"Crear Nuevo Rol"]})]}),e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white overflow-hidden shadow-sm",children:e.jsxs(P,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(t,{className:"w-[300px]",children:"Nombre del Rol"}),e.jsx(t,{children:"Permisos Asignados"}),e.jsx(t,{children:"Tipo"}),e.jsx(t,{className:"text-right",children:"Acciones"})]})}),e.jsxs(C,{children:[p.map(s=>e.jsxs(c,{children:[e.jsx(i,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),s.name]})}),e.jsx(i,{children:e.jsxs(d,{variant:"secondary",className:"font-mono",children:[s.permissions_count," permisos"]})}),e.jsx(i,{children:s.is_system?e.jsx(d,{variant:"secondary",children:"Sistema"}):e.jsx(d,{variant:"outline",children:"Personalizado"})}),e.jsx(i,{className:"text-right",children:e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Abrir menú"})]})}),e.jsxs(R,{align:"end",children:[e.jsx(M,{children:"Acciones"}),e.jsxs(f,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onClick:r=>x(r,"roles.update",route("tenant.roles.edit",{tenant:a?.slug,role:s.id})),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Editar Permisos"]}),!s.is_system&&e.jsx(e.Fragment,{children:e.jsxs(f,{variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onSelect:()=>m(s),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Eliminar Rol"]})})]})]})})]},s.id)),p.length===0&&e.jsx(c,{children:e.jsx(i,{colSpan:4,className:"h-24 text-center text-slate-500",children:"No hay roles creados."})})]})]})})]}),e.jsx(k,{open:!!l,onOpenChange:s=>!s&&m(null),children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(_,{children:"¿Eliminar Rol?"}),e.jsxs(q,{children:["¿Estás seguro de que deseas eliminar el rol ",e.jsx("span",{className:"font-bold",children:l?.name}),"? Esta acción no se puede deshacer."]})]}),e.jsxs(z,{children:[e.jsx(F,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Cancelar"}),e.jsx(I,{onClick:()=>{v("roles.delete",route("tenant.roles.destroy",{tenant:a?.slug,role:l?.id})),m(null)},variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Eliminar"})]})]})})]})}export{Ue as default};
