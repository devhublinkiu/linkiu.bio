import{c as N,r as v,u as y,j as e,H as w,t as l}from"./app-arqQV-bc.js";import{A}from"./AdminLayout-DCtk7OxF.js";import{B as m}from"./button-Bd640uTA.js";import{I as C}from"./input-CnYabjbM.js";import{L as z}from"./label-DAA58jPO.js";import{C as _,a as S,b as P,c as D,d as E,e as M}from"./card-BQPJWSk4.js";import{A as k,b as L,a as B}from"./alert-D-YzgdfT.js";import{B as c}from"./badge-t3wrEXXG.js";import{P as I}from"./dropdown-menu-mNq1McYa.js";import{M as R}from"./message-circle-DV6RjH4d.js";import{S as p}from"./shield-check-BX6ttUPh.js";import{S as W}from"./shield-alert-C6UQ5DSO.js";import{C as d}from"./circle-alert-CdoJyCDE.js";import{S as q}from"./smartphone-Bzgqo7Xx.js";import{L as H}from"./loader-circle-C7WOXZ8A.js";import{S as T}from"./save-Dv6NlijS.js";import"./utils-BegMJZHH.js";import"./progress-BWnj_no5.js";import"./index-CVnnicxK.js";import"./index-C-vN8jX4.js";import"./menuConfig-C-Q0avcz.js";import"./video-B-ftvkxj.js";import"./createLucideIcon-kbomgvBs.js";import"./chef-hat-q1zMrLCc.js";import"./table-Bk0hf6m9.js";import"./user-KA4Ja2_R.js";import"./map-pin-D1VGCzYf.js";import"./banknote-byFf_CZb.js";import"./star-qP03KNv_.js";import"./users-DyLj9nwM.js";import"./calendar-check-BUphR3zi.js";import"./calendar-DHlqI9qY.js";import"./briefcase-CG7ArIFZ.js";import"./truck-DCx-3LGs.js";import"./credit-card-4AdI57T8.js";import"./package-34OeiGxz.js";import"./shopping-bag-TtCDC01g.js";import"./layout-dashboard-DnE9OzLr.js";import"./badge-check-C3DjHgnO.js";import"./lock-Cb_9eXlT.js";import"./chevron-right-CyE8jcbn.js";import"./sparkles-fY3WANvl.js";import"./separator-DpUia1Ar.js";import"./external-link-r8YAPN_c.js";import"./chevron-down-CS-ozzzB.js";import"./headphones-Uo3Em3Q5.js";import"./shield-BQB1r0z5.js";import"./sonner-SWZRrF5D.js";import"./index-CwhdJaVg.js";import"./index-B_Os2ghw.js";import"./index-CJZqa-kr.js";import"./index-C9GonLHF.js";import"./circle-check-CJmQNw_U.js";import"./trash-2-D8UpIHBH.js";import"./check-BZhepUpU.js";import"./dialog-Do7ESPrT.js";import"./x-hBSqTjfa.js";import"./sheet-BJFcoitR.js";import"./index-CfChaKac.js";import"./index-DzhEK4jt.js";import"./index-iS2GCZ5y.js";import"./index-Bz80iYGN.js";import"./index-DiBfayRM.js";import"./index-DDCOIm2e.js";function Ye({settings:x,hasFeature:a,tenant:i}){const{currentUserRole:r}=N().props,[u,o]=v.useState(!1),{data:h,setData:f,patch:g,processing:n,errors:t}=y({whatsapp_admin_phone:x.whatsapp_admin_phone||""}),j=s=>r?r.is_owner?!0:r.permissions.includes("*")||r.permissions.includes(s):!1,b=s=>{if(s.preventDefault(),!j("whatsapp.update")){o(!0);return}g(route("tenant.whatsapp.update",{tenant:i.slug}),{onSuccess:()=>l.success("Configuración guardada correctamente"),onError:()=>l.error("Error al guardar la configuración")})};return e.jsxs(A,{title:"Notificaciones WhatsApp",children:[e.jsx(w,{title:"Notificaciones WhatsApp - Linkiu.Bio"}),e.jsx(I,{open:u,onOpenChange:o}),e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 flex items-center gap-2",children:[e.jsx(R,{className:"size-8 text-primary"}),"Notificaciones WhatsApp"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configura cómo recibes las alertas de tu negocio."})]}),e.jsx("div",{className:"flex items-center gap-2",children:a?e.jsxs(c,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200 px-3 py-1 flex items-center gap-1.5",children:[e.jsx(p,{className:"size-4"}),"Módulo Activo"]}):e.jsxs(c,{variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50 px-3 py-1 flex items-center gap-1.5",children:[e.jsx(W,{className:"size-4"}),"Requiere Plan Pro"]})})]}),!a&&e.jsxs(k,{className:"mb-6 bg-amber-50 border-amber-200 text-amber-900",children:[e.jsx(d,{className:"size-4 text-amber-600"}),e.jsx(L,{className:"font-bold",children:"Módulo no incluido en tu plan"}),e.jsx(B,{className:"text-amber-800/80",children:"Tu plan actual no incluye notificaciones automáticas por WhatsApp. Para activar esta función y que tus clientes reciban sus reservas y pedidos, debes mejorar tu plan."}),e.jsx("div",{className:"mt-4",children:e.jsx(m,{variant:"outline",className:"border-amber-300 text-amber-800 hover:bg-amber-100",asChild:!0,children:e.jsx("a",{href:route("tenant.subscription.index",{tenant:i.slug}),children:"Ver Planes Disponibles"})})})]}),e.jsx("form",{onSubmit:b,className:"space-y-6",children:e.jsxs(_,{className:"border-0 shadow-lg shadow-black/5 bg-white overflow-hidden",children:[e.jsxs(S,{className:"pb-4 border-b border-gray-50 bg-gray-50/30",children:[e.jsxs(P,{className:"text-xl flex items-center gap-2 font-bold",children:[e.jsx(q,{className:"size-5 text-primary"}),"Alertas para el Administrador"]}),e.jsx(D,{className:"text-gray-500 font-medium",children:"Este número recibirá notificaciones cada vez que entre un nuevo pedido o una nueva reserva."})]}),e.jsxs(E,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(z,{htmlFor:"phone",className:"text-gray-700 font-bold",children:"Número de WhatsApp Administrativo"}),e.jsx(C,{id:"phone",value:h.whatsapp_admin_phone,onChange:s=>f("whatsapp_admin_phone",s.target.value),placeholder:"Ej: +573102223344",className:`h-12 text-lg px-4 border-gray-200 focus:ring-primary/20 ${t.whatsapp_admin_phone?"border-destructive ring-destructive/20":""}`}),t.whatsapp_admin_phone&&e.jsxs("p",{className:"text-xs font-bold text-destructive mt-1 flex items-center gap-1",children:[e.jsx(d,{className:"size-3"}),t.whatsapp_admin_phone]}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5 pt-1",children:[e.jsx("span",{className:"inline-block size-1.5 rounded-full bg-blue-500"}),"Usa el formato internacional (ej: +57310...)."]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-100",children:[e.jsxs("h4",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-slate-800",children:[e.jsx(p,{className:"size-4 text-green-600"}),"¿Qué notificaciones se enviarán?"]}),e.jsxs("ul",{className:"space-y-2.5",children:[e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Nuevas Reservas:"})," Al número configurado arriba."]})]}),e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Confirmación:"})," Al número que el cliente registre."]})]}),e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Recordatorios:"})," Enviados automáticamente 1 hora antes."]})]})]})]})]}),e.jsxs(M,{className:"bg-slate-50/50 border-t border-slate-100 p-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-[11px] text-gray-500 font-medium text-center sm:text-left",children:["Integrado con ",e.jsx("strong",{children:"Infobip Direct API"})," para máxima velocidad."]}),e.jsxs(m,{type:"submit",disabled:n,className:"w-full sm:w-auto px-10 font-bold shadow-md shadow-primary/10 transition-all hover:scale-[1.02] active:scale-[0.98] cursor-pointer",children:[n?e.jsx(H,{className:"mr-2 size-4 animate-spin"}):e.jsx(T,{className:"mr-2 size-4"}),"Guardar Configuración"]})]})]})})]})]})}export{Ye as default};
