import{r as m,j as e,H as v,a as p}from"./app-B2i56772.js";import{S as N}from"./SuperAdminLayout-BTFu4WkN.js";import{C as x,d as h,a as S,b as C,c as w}from"./card-BWsdLjRP.js";import{T as b,a as E,b as c,c as r,d as T,e as s}from"./table-DbBtwsSd.js";import{B as t}from"./badge-v4EM3Inb.js";import{I as _}from"./input-DBNIwXu0.js";import{L as D}from"./label-B6Q_Fw8J.js";import{S as I,a as P,b as H,c as A,d as i}from"./select-ClRMxfXi.js";import{S as B}from"./Pagination-B-IYE7T4.js";import{E as L,a as k,b as M,c as V,d as z}from"./empty-Cl3nGRpl.js";import{S as F}from"./search-CkZPRNJr.js";import{C as O}from"./credit-card-C_C5Gl_c.js";import{C as R}from"./calendar-Ck1wG4bv.js";import"./button-BddZHLbc.js";import"./index-BKbrreay.js";import"./utils-DyIEM9Hy.js";import"./dropdown-menu-DmXnVWVS.js";import"./createLucideIcon-D_eBnp1W.js";import"./chevron-right-CbumkvGd.js";import"./dialog-BfzucGwq.js";import"./index-DJSPV-or.js";import"./index-ykKLN3SD.js";import"./index-DvWOdVYN.js";import"./x-B5LJUYBC.js";import"./circle-check-qwWqnypp.js";import"./trash-2-DFiSLFW9.js";import"./check-BXudH8di.js";import"./shopping-bag-Bo9Pazs1.js";import"./separator-BeNm-P6u.js";import"./index-CAHj415D.js";import"./sheet-BYmPEYHR.js";import"./index-0TEkSQsx.js";import"./index-o5QoyLO9.js";import"./index-DBzmoSVG.js";import"./index-OfG7Dj8W.js";import"./index-BbbmFCg3.js";import"./index-DHp04QnP.js";import"./chevrons-up-down-C0cts3a0.js";import"./badge-check-D1_tuun5.js";import"./ApplicationLogo-CE-gkIYO.js";import"./users-4ML6WyRj.js";import"./layout-grid-BY7Lrn_i.js";import"./index-BdQq_4o_.js";import"./index-BdpBaZAv.js";import"./chevron-down-BDQOlKUd.js";import"./chevron-up-DBoP92CZ.js";import"./ellipsis-CHJbh5YJ.js";import"./chevron-left-C2rak3ys.js";function Me({subscriptions:l,filters:d}){const[n,u]=m.useState(d.search||""),[o,j]=m.useState(d.status||"all"),f=a=>{a.preventDefault(),p.get(route("subscriptions.index"),{search:n,status:o},{preserveState:!0})},g=a=>{j(a),p.get(route("subscriptions.index"),{search:n,status:a},{preserveState:!0})},y=a=>{switch(a){case"active":return e.jsx(t,{className:"bg-green-600",children:"Activa"});case"trialing":return e.jsx(t,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"En Prueba"});case"past_due":return e.jsx(t,{variant:"destructive",children:"En Mora"});case"cancelled":return e.jsx(t,{variant:"outline",className:"text-gray-500",children:"Cancelada"});case"expired":return e.jsx(t,{variant:"outline",className:"text-gray-500",children:"Expirada"});default:return e.jsx(t,{variant:"outline",children:a})}};return e.jsxs(N,{header:"Gestión de Suscripciones",children:[e.jsx(v,{title:"Suscripciones"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{className:"mb-6",children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[e.jsxs("form",{onSubmit:f,className:"relative w-full sm:w-80",children:[e.jsx(F,{className:"absolute left-3 top-2 h-4 w-4 text-gray-400"}),e.jsx(_,{placeholder:"Buscar por ID de cliente o tienda...",value:n,onChange:a=>u(a.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(D,{className:"text-sm font-medium text-muted-foreground whitespace-nowrap",children:"Estado:"}),e.jsxs(I,{value:o,onValueChange:g,children:[e.jsx(P,{className:"w-[180px]",children:e.jsx(H,{placeholder:"Filtrar estado"})}),e.jsxs(A,{children:[e.jsx(i,{value:"all",children:"Todas las suscripciones"}),e.jsx(i,{value:"active",children:"Activas"}),e.jsx(i,{value:"trialing",children:"En Prueba"}),e.jsx(i,{value:"past_due",children:"En Mora"}),e.jsx(i,{value:"cancelled",children:"Canceladas"})]})]})]})]})})}),e.jsxs(x,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Listado de Suscripciones"}),e.jsx(w,{children:"Visualiza el estado de las suscripciones de tus clientes."})]}),e.jsxs(h,{children:[e.jsxs(b,{children:[e.jsx(E,{children:e.jsxs(c,{children:[e.jsx(r,{children:"ID Suscripción"}),e.jsx(r,{children:"Tienda"}),e.jsx(r,{children:"Plan"}),e.jsx(r,{children:"Estado"}),e.jsx(r,{children:"Ciclo"}),e.jsx(r,{children:"Próximo Pago"})]})}),e.jsx(T,{children:l.data.length===0?e.jsx(c,{children:e.jsx(s,{colSpan:6,className:"h-[400px]",children:e.jsxs(L,{className:"h-full",children:[e.jsx(k,{children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-full mb-4",children:e.jsx(O,{className:"h-8 w-8 text-gray-400"})})}),e.jsxs(M,{children:[e.jsx(V,{children:"No hay suscripciones"}),e.jsx(z,{children:"Aún no se han registrado suscripciones activas en el sistema."})]})]})})}):l.data.map(a=>e.jsxs(c,{children:[e.jsxs(s,{className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:["#",a.id]}),e.jsx(s,{className:"font-medium",children:a.tenant?.name||`Tienda #${a.tenant?.id}`}),e.jsx(s,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:a.plan?.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[new Intl.NumberFormat("es-CO",{style:"currency",currency:a.plan?.currency||"COP"}).format(a.plan?.monthly_price||0),"/mes"]})]})}),e.jsx(s,{children:y(a.status)}),e.jsx(s,{className:"capitalize",children:a.billing_cycle==="monthly"?"Mensual":a.billing_cycle==="yearly"?"Anual":a.billing_cycle==="quarterly"?"Trimestral":a.billing_cycle==="weekly"?"Semanal":a.billing_cycle==="daily"?"Diario":a.billing_cycle}),e.jsx(s,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(R,{className:"h-4 w-4"}),a.next_payment_date?new Date(a.next_payment_date).toLocaleDateString():"-"]})})]},a.id))})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(B,{links:l.links})})]})]})]})]})}export{Me as default};
