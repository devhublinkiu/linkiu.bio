import{c as N,r as v,u as y,j as e,H as w,t as l}from"./app-DvpAkplk.js";import{A}from"./AdminLayout-hY3b0G1y.js";import{B as m}from"./button-DOQ0axlO.js";import{I as C}from"./input-Bv-dfyAA.js";import{L as z}from"./label-BjDu_9e_.js";import{C as _,a as S,b as P,c as D,d as E,e as M}from"./card-CnT0l_PA.js";import{A as k,b as L,a as B}from"./alert-BcALHO-Y.js";import{B as c}from"./badge-IfxeRtOE.js";import{P as I}from"./dropdown-menu-ubFSrLA8.js";import{M as R}from"./message-circle-4blwuSBk.js";import{S as p}from"./shield-check-CBVMGWyl.js";import{S as W}from"./shield-alert-C5ZG7GRT.js";import{C as d}from"./circle-alert-Dy8ljs1n.js";import{S as q}from"./smartphone-C_Vrmwfp.js";import{L as H}from"./loader-circle-BM3yzWLg.js";import{S as T}from"./save-Cpj6gcmT.js";import"./utils-Bt66apXy.js";import"./progress-BHe2VIPc.js";import"./index-CVnMJ0kl.js";import"./index-CnuaM2Cu.js";import"./menuConfig-CS7C2xYF.js";import"./video-Diu1usog.js";import"./createLucideIcon-BAweqaF3.js";import"./chef-hat-4WRp0NMl.js";import"./table-9Iw8O0xw.js";import"./user-CXZ9uqcX.js";import"./map-pin-BY9e0G3n.js";import"./banknote-CNQnpK3Q.js";import"./star-Cq7jFrzE.js";import"./users-BDTVDblz.js";import"./calendar-check-rPKpguYk.js";import"./calendar-mikciA0V.js";import"./briefcase-5b91nXrO.js";import"./truck-SA0a2FWD.js";import"./credit-card-fEKVAskI.js";import"./package-D7hy5e4b.js";import"./shopping-bag-DhB74yIJ.js";import"./layout-dashboard-Cf5aFky8.js";import"./badge-check-BhvL5u0B.js";import"./lock-DHVVRGwf.js";import"./chevron-right-wq5EBuGT.js";import"./sparkles-DyQnos2U.js";import"./separator-BG2VS_Fl.js";import"./external-link-DZTE9j3y.js";import"./chevron-down-tlhr8VnY.js";import"./headphones-Bg1cPLTV.js";import"./shield-BW7u8GoI.js";import"./sonner-DgVci-2A.js";import"./index-Bw9aTihY.js";import"./index-D8KCWmzE.js";import"./index-DxV-pwI8.js";import"./index-DvNjLHaW.js";import"./circle-check-DihymiLa.js";import"./trash-2-Cl32KA5j.js";import"./check-BnQaAa8B.js";import"./dialog-Cjxgu9dZ.js";import"./x-C_qF6Mva.js";import"./sheet-DsGG5XCT.js";import"./index-2KDpKUG2.js";import"./index-DAaNBk-s.js";import"./index-DGLOWnr1.js";import"./index-ahKcmWZ5.js";import"./index-Dcod572x.js";import"./index-CD1tTlGF.js";function Ye({settings:x,hasFeature:a,tenant:i}){const{currentUserRole:r}=N().props,[u,o]=v.useState(!1),{data:h,setData:f,patch:g,processing:n,errors:t}=y({whatsapp_admin_phone:x.whatsapp_admin_phone||""}),j=s=>r?r.is_owner?!0:r.permissions.includes("*")||r.permissions.includes(s):!1,b=s=>{if(s.preventDefault(),!j("whatsapp.update")){o(!0);return}g(route("tenant.whatsapp.update",{tenant:i.slug}),{onSuccess:()=>l.success("Configuración guardada correctamente"),onError:()=>l.error("Error al guardar la configuración")})};return e.jsxs(A,{title:"Notificaciones WhatsApp",children:[e.jsx(w,{title:"Notificaciones WhatsApp - Linkiu.Bio"}),e.jsx(I,{open:u,onOpenChange:o}),e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 flex items-center gap-2",children:[e.jsx(R,{className:"size-8 text-primary"}),"Notificaciones WhatsApp"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configura cómo recibes las alertas de tu negocio."})]}),e.jsx("div",{className:"flex items-center gap-2",children:a?e.jsxs(c,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200 px-3 py-1 flex items-center gap-1.5",children:[e.jsx(p,{className:"size-4"}),"Módulo Activo"]}):e.jsxs(c,{variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50 px-3 py-1 flex items-center gap-1.5",children:[e.jsx(W,{className:"size-4"}),"Requiere Plan Pro"]})})]}),!a&&e.jsxs(k,{className:"mb-6 bg-amber-50 border-amber-200 text-amber-900",children:[e.jsx(d,{className:"size-4 text-amber-600"}),e.jsx(L,{className:"font-bold",children:"Módulo no incluido en tu plan"}),e.jsx(B,{className:"text-amber-800/80",children:"Tu plan actual no incluye notificaciones automáticas por WhatsApp. Para activar esta función y que tus clientes reciban sus reservas y pedidos, debes mejorar tu plan."}),e.jsx("div",{className:"mt-4",children:e.jsx(m,{variant:"outline",className:"border-amber-300 text-amber-800 hover:bg-amber-100",asChild:!0,children:e.jsx("a",{href:route("tenant.subscription.index",{tenant:i.slug}),children:"Ver Planes Disponibles"})})})]}),e.jsx("form",{onSubmit:b,className:"space-y-6",children:e.jsxs(_,{className:"border-0 shadow-lg shadow-black/5 bg-white overflow-hidden",children:[e.jsxs(S,{className:"pb-4 border-b border-gray-50 bg-gray-50/30",children:[e.jsxs(P,{className:"text-xl flex items-center gap-2 font-bold",children:[e.jsx(q,{className:"size-5 text-primary"}),"Alertas para el Administrador"]}),e.jsx(D,{className:"text-gray-500 font-medium",children:"Este número recibirá notificaciones cada vez que entre un nuevo pedido o una nueva reserva."})]}),e.jsxs(E,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(z,{htmlFor:"phone",className:"text-gray-700 font-bold",children:"Número de WhatsApp Administrativo"}),e.jsx(C,{id:"phone",value:h.whatsapp_admin_phone,onChange:s=>f("whatsapp_admin_phone",s.target.value),placeholder:"Ej: +573102223344",className:`h-12 text-lg px-4 border-gray-200 focus:ring-primary/20 ${t.whatsapp_admin_phone?"border-destructive ring-destructive/20":""}`}),t.whatsapp_admin_phone&&e.jsxs("p",{className:"text-xs font-bold text-destructive mt-1 flex items-center gap-1",children:[e.jsx(d,{className:"size-3"}),t.whatsapp_admin_phone]}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5 pt-1",children:[e.jsx("span",{className:"inline-block size-1.5 rounded-full bg-blue-500"}),"Usa el formato internacional (ej: +57310...)."]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-100",children:[e.jsxs("h4",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-slate-800",children:[e.jsx(p,{className:"size-4 text-green-600"}),"¿Qué notificaciones se enviarán?"]}),e.jsxs("ul",{className:"space-y-2.5",children:[e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Nuevas Reservas:"})," Al número configurado arriba."]})]}),e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Confirmación:"})," Al número que el cliente registre."]})]}),e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Recordatorios:"})," Enviados automáticamente 1 hora antes."]})]})]})]})]}),e.jsxs(M,{className:"bg-slate-50/50 border-t border-slate-100 p-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-[11px] text-gray-500 font-medium text-center sm:text-left",children:["Integrado con ",e.jsx("strong",{children:"Infobip Direct API"})," para máxima velocidad."]}),e.jsxs(m,{type:"submit",disabled:n,className:"w-full sm:w-auto px-10 font-bold shadow-md shadow-primary/10 transition-all hover:scale-[1.02] active:scale-[0.98] cursor-pointer",children:[n?e.jsx(H,{className:"mr-2 size-4 animate-spin"}):e.jsx(T,{className:"mr-2 size-4"}),"Guardar Configuración"]})]})]})})]})]})}export{Ye as default};
