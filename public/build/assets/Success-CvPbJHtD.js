import{R as C,j as e,r as f,t as $,H as g}from"./app-D9wldZxo.js";import{P as j}from"./PublicLayout-BMJu5C80.js";import{g as k}from"./echo-CmTENghG.js";import{c as E,f as P}from"./utils-B0KHI9vB.js";import{F as b}from"./file-text-DOpJ3jdL.js";import{c as T}from"./createLucideIcon-CJjlOp5I.js";import{C as w}from"./clock-CeESiC7i.js";import{C as N}from"./circle-check-CN90YBLh.js";import{H as R}from"./house-DMsuIgyF.js";import{M as S}from"./map-pin-Du3W4-OO.js";import"./index-DagmFQ0c.js";import"./proxy-Cin13Ko-.js";import"./shopping-bag-CQGcPT0-.js";import"./chevron-right-BSwXEIvG.js";import"./lock-BHZn93rL.js";import"./truck-Db-Ebch9.js";import"./credit-card-CPDlDYf1.js";import"./headphones-DD_UyCnk.js";import"./dialog-C0Lg02Tk.js";import"./index-BDWpq_YI.js";import"./index-BrcTw33p.js";import"./index-BMdzuiHN.js";import"./index-tfOuMV4B.js";import"./button-Dadb_Lep.js";import"./x-dvUxMxq3.js";import"./input-rMsYcH4C.js";import"./label-DoqMNi9Z.js";import"./index-CZBSMaku.js";import"./textarea-DBah2UDL.js";import"./arrow-right-CkkqfXOc.js";const z=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],A=T("thumbs-up",z),v=C.memo(function({mainCircleSize:m=210,mainCircleOpacity:t=.24,numCircles:x=8,className:p,...n}){return e.jsx("div",{className:E("pointer-events-none absolute inset-0 [mask-image:linear-gradient(to_bottom,white,transparent)] select-none",p),...n,children:Array.from({length:x},(y,l)=>{const d=m+l*70,h=t-l*.03,u=`${l*.06}s`;return e.jsx("div",{className:"animate-ripple bg-foreground/25 absolute rounded-full border shadow-xl",style:{"--i":l,width:`${d}px`,height:`${d}px`,opacity:h,animationDelay:u,borderStyle:"solid",borderWidth:"1px",borderColor:"var(--foreground)",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(1)"}},l)})})});v.displayName="Ripple";function me({tenant:r,order:m}){const[t,x]=f.useState(m);if(f.useEffect(()=>{x(m)},[m]),f.useEffect(()=>{const s=k();if(!s?.channel||!r?.id||!t?.id)return;const o=`tenant.${r.id}.orders.${t.id}`;return s.channel(o).listen(".order.status.updated",a=>{x(_=>({..._,status:a.status}));let i=a.message;a.status==="confirmed"&&(i="¡Tu pedido ha sido confirmado!"),a.status==="preparing"&&(i="¡Están preparando tu pedido!"),a.status==="ready"&&(i="¡Tu pedido está listo!"),a.status==="completed"&&(i="¡Pedido entregado! Gracias por tu compra."),a.status==="cancelled"&&(i="El pedido ha sido cancelado."),$.success(i)}),()=>{try{s.leave(o)}catch{}}},[t.id,r.id]),t.status==="cancelled")return e.jsxs(j,{bgColor:"#fff",showFloatingCart:!1,children:[e.jsx(g,{title:`Pedido Cancelado ${t.ticket_number}`}),e.jsxs("div",{className:"max-w-md mx-auto p-6 flex flex-col items-center justify-center min-h-[60vh] text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mb-6",children:e.jsx(b,{className:"w-10 h-10 text-red-500"})}),e.jsx("h1",{className:"text-2xl font-black text-slate-900 mb-2",children:"Pedido Cancelado"}),e.jsxs("p",{className:"text-slate-500 mb-8",children:["Este pedido (",t.ticket_number,") ha sido cancelado. Si tienes dudas, contáctanos."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-xs",children:[r.whatsapp_number&&e.jsx("a",{href:`https://wa.me/57${r.whatsapp_number}?text=${encodeURIComponent(`Hola, tengo una duda sobre mi pedido cancelado ${t.ticket_number}.`)}`,target:"_blank",rel:"noreferrer",className:"bg-white border-2 border-green-500 text-green-600 font-bold py-3 px-6 rounded-xl hover:bg-green-50 transition-all text-center","aria-label":"Contactar por WhatsApp sobre el pedido cancelado",children:"Contactar por WhatsApp"}),e.jsx("a",{href:route("tenant.home",r.slug),className:"bg-slate-900 text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:bg-slate-800 transition-all text-center","aria-label":"Volver al menú",children:"Volver al Menú"})]})]})]});const p=()=>{const s=new Date(t.created_at),o=new Date(s.getTime()+45*6e4),c=new Date(s.getTime()+60*6e4),a=i=>i.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}).toLowerCase();return`${a(o)} a ${a(c)}`},n=[{status:"pending",label:"Recibido",icon:b},{status:"confirmed",label:"Confirmado",icon:A},{status:"preparing",label:"Preparando",icon:w},{status:"ready",label:"Listo",icon:N},{status:"completed",label:"Entregado",icon:R}];n.findIndex(s=>s.status===t.status)===-1||n.findIndex(s=>s.status===t.status);const l=(s=>s==="pending"?0:s==="confirmed"?1:s==="preparing"?2:s==="ready"?3:s==="completed"?4:0)(t.status),d=!!r.whatsapp_number,h=`Hola *${r.name}*, tengo una duda sobre mi pedido *${t.ticket_number}*.`,u=d?`https://wa.me/57${r.whatsapp_number}?text=${encodeURIComponent(h)}`:"#";return e.jsxs(j,{bgColor:"#f8fafc",showFloatingCart:!1,children:[e.jsx(g,{title:`Pedido ${t.ticket_number}`}),e.jsxs("div",{className:"max-w-lg mx-auto p-6 pb-24 min-h-[80vh] flex flex-col items-center pt-12",children:[e.jsxs("div",{className:"relative w-full flex flex-col items-center text-center animate-in zoom-in-50 duration-500 mb-6",children:[e.jsx("div",{className:"absolute -top-60 left-1/2 -translate-x-1/2 w-[560px] h-[560px] z-0 flex items-center justify-center pointer-events-none overflow-visible",children:e.jsx(v,{mainCircleSize:100,mainCircleOpacity:.22,numCircles:5})}),e.jsx("div",{className:"relative z-10 w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-4 shadow-sm",children:e.jsx(N,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"¡Pedido Recibido!"}),e.jsxs("p",{className:"text-slate-500 mt-1 font-medium",children:["Gracias, ",t.customer_name.split(" ")[0]]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-4 w-full text-center mb-8 shadow-sm",children:[e.jsx("p",{className:"text-blue-600 text-xs font-bold uppercase tracking-wider mb-1",children:"Hora estimada de entrega"}),e.jsx("p",{className:"text-slate-900 text-xl font-black",children:p()}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-2 leading-tight px-4",children:"Este tiempo es calculado basado en la hora del pedido y el tiempo de preparación del restaurante."})]}),e.jsx("div",{className:"w-full mb-10 mt-2 px-2",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute top-[18px] left-0 right-0 h-1 bg-slate-100 rounded-full z-0"}),e.jsx("div",{className:"absolute top-[18px] left-0 h-1 bg-gradient-to-r from-green-500 to-green-400 rounded-full z-0 transition-all duration-1000 ease-in-out shadow-[0_0_10px_rgba(34,197,94,0.4)]",style:{width:`${l/(n.length-1)*100}%`}}),e.jsx("div",{className:"relative z-10 flex justify-between items-start",children:n.map((s,o)=>{const c=o<=l,a=o===l,i=o<l;return e.jsxs("div",{className:"flex flex-col items-center group w-16",children:[e.jsxs("div",{className:`relative w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 z-10
                                           ${i?"bg-green-500 border-2 border-green-500 text-white shadow-md shadow-green-200":""}
                                           ${a?"bg-white border-2 border-green-500 text-green-600 scale-110 shadow-lg shadow-green-100":""}
                                           ${c?"":"bg-white border-2 border-slate-200 text-slate-300"}
                                       `,children:[a&&e.jsx("span",{className:"absolute inset-0 rounded-full animate-ping bg-green-400 opacity-20"}),e.jsx(s.icon,{className:`w-5 h-5 transition-transform duration-300 ${a?"scale-110":""}`})]}),e.jsxs("div",{className:`mt-3 flex flex-col items-center transition-all duration-500 transform
                                            ${c?"opacity-100 translate-y-0":"opacity-60 translate-y-1"}
                                       `,children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider text-center leading-tight
                                                ${c?"text-slate-900":"text-slate-400"}
                                                ${a?"text-green-600":""}
                                            `,children:s.label}),a&&s.status!=="completed"&&e.jsx("span",{className:"text-[9px] font-medium text-slate-400 animate-pulse mt-0.5",children:"En proceso..."})]})]},s.status)})})]})}),e.jsxs("div",{className:"w-full flex justify-between items-end border-b border-slate-200 pb-4 mb-4",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"No. Pedido"}),e.jsx("p",{className:"text-xl font-black text-slate-900",children:t.ticket_number})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Valor Total"}),e.jsx("p",{className:"text-xl font-black text-slate-900",children:P(t.total)})]})]}),e.jsxs("div",{className:"w-full space-y-3 mb-8 bg-slate-50 p-4 rounded-xl border border-slate-100",children:[e.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Detalles de Entrega"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(w,{className:"w-4 h-4 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900",children:t.customer_name}),e.jsx("p",{className:"text-xs text-slate-500",children:t.customer_phone})]})]}),t.delivery_address&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(S,{className:"w-4 h-4 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900",children:t.delivery_address.neighborhood||"Dirección"}),e.jsx("p",{className:"text-xs text-slate-500",children:t.delivery_address.address})]})]}),e.jsxs("div",{className:"flex items-start gap-3 border-t border-slate-200 pt-3 mt-1",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(b,{className:"w-4 h-4 text-slate-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[t.items.length," Productos"]}),e.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:t.items.map(s=>s.product?.name??s.product_name??"Producto").join(", ")})]})]})]}),e.jsxs("div",{className:`grid gap-3 w-full ${d?"grid-cols-2":"grid-cols-1"}`,children:[d&&e.jsx("a",{href:u,target:"_blank",rel:"noreferrer",className:"bg-white border border-green-500 text-green-600 font-bold py-3.5 rounded-xl flex flex-col items-center justify-center gap-1 hover:bg-green-50 transition-all text-sm shadow-sm","aria-label":"Contactar al restaurante por WhatsApp",children:e.jsx("span",{children:"Contactar por WhatsApp"})}),e.jsx("a",{href:route("tenant.home",r.slug),className:"bg-slate-900 text-white font-bold py-3.5 rounded-xl flex flex-col items-center justify-center gap-1 hover:bg-slate-800 transition-all text-sm shadow-lg","aria-label":"Volver al inicio",children:e.jsx("span",{children:"Volver al Inicio"})})]})]})]})}export{me as default};
