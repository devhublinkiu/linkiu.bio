import{u as k,j as e,H as E,L as f}from"./app-DvpAkplk.js";import{A}from"./AdminLayout-hY3b0G1y.js";import{B as p}from"./button-DOQ0axlO.js";import{I as L}from"./input-Bv-dfyAA.js";import{L as x}from"./label-BjDu_9e_.js";import{C as j}from"./checkbox-DJcIW_Am.js";import{C as g,a as N,b as $,c as D,d as v}from"./card-CnT0l_PA.js";import{A as F}from"./arrow-left-pP4laFjP.js";import{S as B}from"./shield-check-CBVMGWyl.js";import{S as G}from"./save-Cpj6gcmT.js";import"./utils-Bt66apXy.js";import"./badge-IfxeRtOE.js";import"./progress-BHe2VIPc.js";import"./index-CVnMJ0kl.js";import"./index-CnuaM2Cu.js";import"./dropdown-menu-ubFSrLA8.js";import"./createLucideIcon-BAweqaF3.js";import"./chevron-right-wq5EBuGT.js";import"./index-Bw9aTihY.js";import"./index-D8KCWmzE.js";import"./index-DxV-pwI8.js";import"./index-DvNjLHaW.js";import"./circle-check-DihymiLa.js";import"./trash-2-Cl32KA5j.js";import"./check-BnQaAa8B.js";import"./credit-card-fEKVAskI.js";import"./shopping-bag-DhB74yIJ.js";import"./dialog-Cjxgu9dZ.js";import"./x-C_qF6Mva.js";import"./separator-BG2VS_Fl.js";import"./sheet-DsGG5XCT.js";import"./index-2KDpKUG2.js";import"./index-DAaNBk-s.js";import"./index-DGLOWnr1.js";import"./index-ahKcmWZ5.js";import"./index-Dcod572x.js";import"./index-CD1tTlGF.js";import"./menuConfig-CS7C2xYF.js";import"./video-Diu1usog.js";import"./chef-hat-4WRp0NMl.js";import"./table-9Iw8O0xw.js";import"./user-CXZ9uqcX.js";import"./map-pin-BY9e0G3n.js";import"./banknote-CNQnpK3Q.js";import"./star-Cq7jFrzE.js";import"./users-BDTVDblz.js";import"./calendar-check-rPKpguYk.js";import"./calendar-mikciA0V.js";import"./briefcase-5b91nXrO.js";import"./truck-SA0a2FWD.js";import"./message-circle-4blwuSBk.js";import"./package-D7hy5e4b.js";import"./layout-dashboard-Cf5aFky8.js";import"./badge-check-BhvL5u0B.js";import"./lock-DHVVRGwf.js";import"./sparkles-DyQnos2U.js";import"./external-link-DZTE9j3y.js";import"./chevron-down-tlhr8VnY.js";import"./headphones-Bg1cPLTV.js";import"./shield-BW7u8GoI.js";import"./sonner-DgVci-2A.js";import"./index-uxDWIACH.js";function Je({role:m,permissions:b,currentTenant:l}){const n=!!m,{data:o,setData:c,post:C,put:y,processing:u,errors:h}=k({name:m?.name||"",permissions:m?.permissions.map(s=>s.id)||[]}),w=s=>{s.preventDefault(),n?y(route("tenant.roles.update",{tenant:l.slug,role:m.id})):C(route("tenant.roles.store",{tenant:l.slug}))},S=s=>{const r=new Set(o.permissions);r.has(s)?r.delete(s):r.add(s),c("permissions",Array.from(r))},R=s=>{const r=s.map(i=>i.id),d=r.every(i=>o.permissions.includes(i));let a=[...o.permissions];d?a=a.filter(i=>!r.includes(i)):r.forEach(i=>{a.includes(i)||a.push(i)}),c("permissions",a)};return e.jsxs(A,{title:n?"Editar Rol":"Crear Nuevo Rol",children:[e.jsx(E,{title:n?"Editar Rol":"Crear Nuevo Rol"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(p,{variant:"ghost",size:"icon",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:e.jsx(F,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:n?`Editar Rol: ${m.name}`:"Crear Nuevo Rol"}),e.jsx("p",{className:"text-muted-foreground",children:"Define el nombre del rol y sus permisos de acceso."})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs(g,{children:[e.jsxs(N,{children:[e.jsx($,{children:"Información Básica"}),e.jsx(D,{children:"Asigna un nombre descriptivo para identificar este rol en tu equipo."})]}),e.jsx(v,{children:e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx(x,{htmlFor:"name",children:"Nombre del Rol"}),e.jsx(L,{id:"name",placeholder:"Ej. Gerente de Tienda",value:o.name,onChange:s=>c("name",s.target.value)}),h.name&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:h.name})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Permisos del Sistema"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Selecciona las acciones que este rol podrá realizar."})]}),e.jsxs("div",{className:"text-sm font-medium text-slate-500",children:[o.permissions.length," permisos seleccionados"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(b).map(([s,r])=>{const d=r.map(t=>t.id),a=d.every(t=>o.permissions.includes(t)),i=d.some(t=>o.permissions.includes(t));return e.jsxs(g,{children:[e.jsxs(N,{className:"bg-muted/30 pb-3 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"font-bold flex items-center gap-2",children:[e.jsx(B,{className:`h-4 w-4 ${i?"text-primary":"text-muted-foreground"}`}),s]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{id:`module-${s}`,checked:a,onCheckedChange:()=>R(r)}),e.jsx(x,{htmlFor:`module-${s}`,className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground cursor-pointer select-none",children:"Todos"})]})]}),e.jsx(v,{className:"p-4 grid gap-3",children:r.map(t=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{id:`perm-${t.id}`,checked:o.permissions.includes(t.id),onCheckedChange:()=>S(t.id)}),e.jsx("div",{className:"grid gap-1.5 leading-none",children:e.jsx(x,{htmlFor:`perm-${t.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:t.label||t.name})})]},t.id))})]},s)})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 pb-12",children:[e.jsx(p,{variant:"outline",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:"Cancelar"})}),e.jsxs(p,{type:"submit",disabled:u,className:"min-w-[150px] cursor-pointer",children:[e.jsx(G,{}),u?"Guardando...":"Guardar Rol"]})]})]})]})]})}export{Je as default};
