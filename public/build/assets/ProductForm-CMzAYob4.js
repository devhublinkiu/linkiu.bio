import{R as A,u as pe,j as e}from"./app-BWZ_nHt1.js";import{B as m}from"./button-Zm_FOSge.js";import{I as x}from"./input-DV8OdLmB.js";import{L as o}from"./label-CWiEWBXO.js";import{T as ue}from"./textarea-C-1JrkTj.js";import{S as O,a as R,b as U,c as B,d as G}from"./select-pZyXwyw_.js";import{S as b}from"./switch-BhBUqfV3.js";import{T as he,a as ge,b as u,c as h}from"./tabs-VXa4jXKu.js";import{C as g,a as j,b as f,c as v,d as N}from"./card-Cf_rG8vI.js";import{C as H}from"./checkbox-BKrqLIix.js";import{B as y}from"./badge-B48L7827.js";import{S as W}from"./separator-BzGk3VOl.js";import{F as J,M as je}from"./MediaManagerModal-B9dUJq79.js";import{f as w}from"./utils-Vt5GpmJK.js";import{A as fe,a as ve,b as Ne,c as be}from"./accordion---rdD-sA.js";import{I as P}from"./info-ankJnrbv.js";import{D as K}from"./dollar-sign-DpbVbeBU.js";import{I as ye}from"./image-BpivvSle.js";import{L as Q}from"./layers-Dl9YyjNd.js";import{U as _e}from"./utensils-crossed-dpMIOMsI.js";import{S as we}from"./menuConfig-BZXsI3Xv.js";import{U as M}from"./upload-DzqgEUdA.js";import{X as F}from"./x-Bj9BVCWR.js";import{P as X}from"./plus-BX107HBT.js";import{T as Ce}from"./trash-2-bA_uJBZi.js";import{c as Y}from"./createLucideIcon-DsHLbH4u.js";import{C as ke}from"./circle-alert-BDHc_hGI.js";import{M as Z}from"./map-pin-nfLbJ2aj.js";import{S as $e}from"./save-CjoBFN-S.js";const Se=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Ae=Y("arrow-down",Se);const Ge=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Pe=Y("arrow-up",Ge),Me=[{id:"gluten",label:"Gluten"},{id:"lacteos",label:"LÃ¡cteos"},{id:"huevo",label:"Huevo"},{id:"frutos_secos",label:"Frutos Secos"},{id:"mariscos",label:"Mariscos"},{id:"soya",label:"Soya"},{id:"pescado",label:"Pescado"}],Fe=[{id:"vegano",label:"Vegano"},{id:"vegetariano",label:"Vegetariano"},{id:"sin_gluten",label:"Sin Gluten"},{id:"picante",label:"Picante ðŸŒ¶ï¸"},{id:"recomendado",label:"Recomendado"},{id:"nuevo",label:"Nuevo"},{id:"organico",label:"OrgÃ¡nico"}];function os({product:n,categories:I,locations:D=[],submitRoute:ee,method:L="post"}){const[se,_]=A.useState(!1),C=s=>{if(!s)return[];if(Array.isArray(s))return s;if(typeof s=="string")try{const a=JSON.parse(s);return Array.isArray(a)?a:[s]}catch{return[s]}return[]},{data:r,setData:l,post:ae,processing:T,errors:i}=pe({_method:L==="post"?void 0:L,name:n?.name||"",category_id:n?.category_id||"",short_description:n?.short_description||"",price:n?.price?Math.round(Number(n.price)).toString():"",original_price:n?.original_price?Math.round(Number(n.original_price)).toString():"",cost:n?.cost?Math.round(Number(n.cost)).toString():"",sku:n?.sku||"",image:n?.image||null,image_file:null,gallery:C(n?.gallery),gallery_files:[],preparation_time:n?.preparation_time||"",calories:n?.calories||"",allergens:C(n?.allergens),tags:C(n?.tags),is_available:n?.is_available??!0,is_featured:n?.is_featured??!1,status:n?.status||"active",variant_groups:n?.variant_groups||[],tax_name:n?.tax_name||"",tax_rate:n?.tax_rate?Number(n.tax_rate).toString():"",price_includes_tax:n?.price_includes_tax??!1,location_ids:n?.locations?.map(s=>s.id)||[]}),E=()=>{l("variant_groups",[...r.variant_groups,{name:"",type:"radio",min_selection:0,max_selection:1,is_required:!1,sort_order:r.variant_groups.length,options:[{name:"",price_adjustment:0,is_available:!0,sort_order:0}]}])},re=s=>{const a=[...r.variant_groups];a.splice(s,1),l("variant_groups",a)},p=(s,a,t)=>{const c=[...r.variant_groups];c[s]={...c[s],[a]:t},l("variant_groups",c)},te=s=>{const a=[...r.variant_groups];a[s].options.push({name:"",price_adjustment:0,is_available:!0,sort_order:a[s].options.length}),l("variant_groups",a)},le=(s,a)=>{const t=[...r.variant_groups];t[s].options.splice(a,1),l("variant_groups",t)},k=(s,a,t,c)=>{const d=[...r.variant_groups];d[s].options[a]={...d[s].options[a],[t]:c},l("variant_groups",d)},z=(s,a,t)=>{const c=[...r.variant_groups],d=c[s].options;t==="up"&&a>0?[d[a],d[a-1]]=[d[a-1],d[a]]:t==="down"&&a<d.length-1&&([d[a],d[a+1]]=[d[a+1],d[a]]),l("variant_groups",c)},ie=()=>{const s=Number(r.price),a=Number(r.cost);return!s||!a?0:Math.round((s-a)/s*100)},ne=s=>{s.preventDefault(),ae(ee,{forceFormData:!0,preserveScroll:!0})},V=(s,a)=>{const t=r[s];t.includes(a)?l(s,t.filter(c=>c!==a)):l(s,[...t,a])},ce=s=>{const a=r.location_ids;a.includes(s)?l("location_ids",a.filter(t=>t!==s)):l("location_ids",[...a,s])},$=A.useRef(null),q=A.useRef(null),S=s=>s?s instanceof File?URL.createObjectURL(s):typeof s!="string"?"":s.startsWith("http")||s.startsWith("/")?s:`/media/${s}`:"",oe=()=>r.image_file?URL.createObjectURL(r.image_file):n?.image_url?n.image_url:r.image?S(r.image):"",de=s=>{const a=s.target.files?.[0];a&&(l("image_file",a),l("image",null))},me=s=>{const a=Array.from(s.target.files||[]);if(a.length>0){const c=5-((r.gallery?.length||0)+(r.gallery_files?.length||0));if(c>0){const d=a.slice(0,c);l("gallery_files",[...r.gallery_files||[],...d])}}},xe=(s,a)=>n?.gallery_urls&&n.gallery_urls[a]?n.gallery_urls[a]:S(s);return e.jsxs("form",{onSubmit:ne,className:"space-y-8 pb-20",children:[e.jsx("input",{type:"file",ref:$,className:"hidden",accept:"image/*",onChange:de}),e.jsx("input",{type:"file",ref:q,className:"hidden",accept:"image/*",multiple:!0,onChange:me}),e.jsxs(he,{defaultValue:"basic",className:"w-full",children:[e.jsx("div",{className:"bg-white/50 backdrop-blur-sm sticky top-0 z-10 py-4 mb-6 border-b",children:e.jsxs(ge,{className:"flex w-full max-w-3xl mx-auto h-12 p-1 bg-muted/50 rounded-xl overflow-x-auto scrollbar-none",children:[e.jsxs(u,{value:"basic",className:"flex-1 py-2.5 rounded-lg data-[state=active]:!bg-white data-[state=active]:shadow-md transition-all",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"InformaciÃ³n"})]}),e.jsxs(u,{value:"pricing",className:"flex-1 py-2.5 rounded-lg data-[state=active]:!bg-white data-[state=active]:shadow-md transition-all",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Precios"})]}),e.jsxs(u,{value:"media",className:"flex-1 py-2.5 rounded-lg data-[state=active]:!bg-white data-[state=active]:shadow-md transition-all",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"ImÃ¡genes"})]}),e.jsxs(u,{value:"variants",className:"flex-1 py-2.5 rounded-lg data-[state=active]:!bg-white data-[state=active]:shadow-md transition-all",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Variables"})]}),e.jsxs(u,{value:"culinary",className:"flex-1 py-2.5 rounded-lg data-[state=active]:!bg-white data-[state=active]:shadow-md transition-all",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Detalles"})]}),e.jsxs(u,{value:"config",className:"flex-1 py-2.5 rounded-lg data-[state=active]:!bg-white data-[state=active]:shadow-md transition-all",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Ajustes"})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[e.jsx(h,{value:"basic",className:"space-y-6",children:e.jsxs(g,{className:"border-none shadow-sm",children:[e.jsxs(j,{children:[e.jsx(f,{className:"text-lg",children:"InformaciÃ³n BÃ¡sica"}),e.jsx(v,{children:"Datos esenciales del plato o bebida."})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(o,{htmlFor:"name",children:["Nombre del Producto ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{id:"name",value:r.name,onChange:s=>l("name",s.target.value),placeholder:"Ej: Pizza Margarita",className:i.name?"border-red-500":""}),i.name&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(o,{htmlFor:"category",children:["CategorÃ­a ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(O,{value:r.category_id.toString(),onValueChange:s=>l("category_id",s),children:[e.jsx(R,{className:i.category_id?"border-red-500":"",children:e.jsx(U,{placeholder:"Selecciona una categorÃ­a"})}),e.jsx(B,{children:I.map(s=>e.jsx(G,{value:s.id.toString(),children:s.name},s.id))})]}),i.category_id&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.category_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"short_description",children:"DescripciÃ³n Corta"}),e.jsx(ue,{id:"short_description",value:r.short_description,onChange:s=>l("short_description",s.target.value),placeholder:"Describe brevemente el plato para el cliente...",rows:3,maxLength:150}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[r.short_description?.length||0,"/150"]})}),i.short_description&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.short_description})]})]})]})}),e.jsxs(h,{value:"pricing",className:"space-y-6",children:[e.jsxs(g,{className:"border-none shadow-sm",children:[e.jsxs(j,{children:[e.jsx(f,{className:"text-lg",children:"Precios y Costos"}),e.jsx(v,{children:"Gestiona el valor comercial y el margen de ganancia."})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-start",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(o,{htmlFor:"price",children:["Precio de Venta ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),e.jsx(x,{id:"price",type:"text",value:r.price?w(r.price,!1):"",onChange:s=>l("price",s.target.value.replace(/\D/g,"")),placeholder:"25.000",className:`pl-7 ${i.price?"border-red-500":""}`})]}),i.price&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.price})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"original_price",children:"Precio Original (Antes de Descuento)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),e.jsx(x,{id:"original_price",type:"text",value:r.original_price?w(r.original_price,!1):"",onChange:s=>l("original_price",s.target.value.replace(/\D/g,"")),placeholder:"30.000",className:"pl-7"})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Si llenas esto, el precio de venta se mostrarÃ¡ como oferta."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"cost",children:"Costo del Producto"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),e.jsx(x,{id:"cost",type:"text",value:r.cost?w(r.cost,!1):"",onChange:s=>l("cost",s.target.value.replace(/\D/g,"")),placeholder:"12.000",className:"pl-7"})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Opcional para calcular margen de utilidad."})]})]}),r.price&&r.cost&&e.jsxs("div",{className:"p-4 bg-primary/5 rounded-lg border border-primary/10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx(K,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-primary uppercase tracking-wider",children:"Margen Estimado"}),e.jsxs("p",{className:"text-2xl font-black text-primary",children:[ie(),"%"]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground max-w-[200px] text-right",children:["Utilidad por unidad: ",e.jsxs("strong",{children:["$",w(Number(r.price)-Number(r.cost))]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"sku",children:"SKU / CÃ³digo Externo"}),e.jsx(x,{id:"sku",value:r.sku,onChange:s=>l("sku",s.target.value),placeholder:"Ej: PIZ-001"}),i.sku&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.sku})]})]})]}),e.jsxs(g,{className:"border-none shadow-sm",children:[e.jsxs(j,{children:[e.jsx(f,{className:"text-lg",children:"Impuestos"}),e.jsx(v,{children:"ConfiguraciÃ³n especÃ­fica de impuestos para este producto (sobrescribe la configuraciÃ³n global)."})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 border p-3 rounded-lg bg-muted/20",children:[e.jsx(b,{id:"price_includes_tax",checked:!!r.price_includes_tax,onCheckedChange:s=>{!!r.price_includes_tax!==s&&l("price_includes_tax",s)}}),e.jsx(o,{htmlFor:"price_includes_tax",className:"cursor-pointer",children:"El precio de venta incluye impuestos"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"tax_name",children:"Nombre del Impuesto"}),e.jsx(x,{id:"tax_name",value:r.tax_name,onChange:s=>l("tax_name",s.target.value),placeholder:"Ej: IVA, Impoconsumo"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Dejar en blanco para usar configuraciÃ³n global."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"tax_rate",children:"Tasa de Impuesto (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"tax_rate",type:"number",step:"0.01",value:r.tax_rate,onChange:s=>l("tax_rate",s.target.value),placeholder:"Ej: 19",className:"pr-7"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"%"})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Dejar en blanco para usar configuraciÃ³n global."})]})]})]})]})]}),e.jsx(h,{value:"media",className:"space-y-6",children:e.jsxs(g,{className:"border-none shadow-sm",children:[e.jsxs(j,{children:[e.jsx(f,{className:"text-lg",children:"FotografÃ­as"}),e.jsx(v,{children:"Las imÃ¡genes serÃ¡n redimensionadas automÃ¡ticamente a formato cuadrado (1:1)."})]}),e.jsx(N,{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(o,{className:"text-base font-bold",children:["Imagen Principal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"relative w-full md:w-64 aspect-square rounded-2xl border-2 border-dashed border-muted-foreground/20 bg-muted/5 flex items-center justify-center overflow-hidden group cursor-pointer hover:border-primary/50 transition-colors shrink-0",onClick:()=>$.current?.click(),children:[r.image||r.image_file||n?.image_url?e.jsx("img",{src:oe(),className:"w-full h-full object-cover",alt:"Principal"}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"p-3 bg-white rounded-full shadow-sm",children:e.jsx(M,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Subir Imagen"})]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:e.jsx("span",{className:"text-white text-xs font-bold uppercase tracking-widest",children:"Cambiar"})})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(m,{type:"button",variant:"outline",className:"h-10 px-4 rounded-xl border-dashed hover:border-primary/50 hover:bg-primary/5 justify-start text-xs font-bold uppercase transition-all",onClick:()=>$.current?.click(),children:[e.jsx(M,{className:"w-4 h-4 mr-2 text-primary"}),"Elegir Archivo"]}),e.jsxs(m,{type:"button",variant:"ghost",size:"sm",className:"h-8 text-[10px] font-bold uppercase w-fit",onClick:()=>{_(!0)},children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Biblioteca"]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-orange-50/50 border border-orange-100 flex items-start gap-2",children:[e.jsx(P,{className:"w-3.5 h-3.5 text-orange-500 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-[10px] text-orange-800 leading-tight",children:["Formatos: JPG, PNG, WebP. TamaÃ±o mÃ¡x: 2MB. Se convertirÃ¡ automÃ¡ticamente a ",e.jsx("strong",{children:"800x800px"}),"."]})]}),i.image&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.image}),i.image_file&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.image_file})]})]})]}),e.jsx(W,{className:"bg-muted/30"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(o,{className:"text-base font-bold",children:"GalerÃ­a Adicional"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Hasta 5 imÃ¡genes adicionales para tu producto."})]}),e.jsxs("div",{className:"text-xs font-bold bg-muted px-2 py-1 rounded",children:[(r.gallery?.length||0)+(r.gallery_files?.length||0)," / 5"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[r.gallery.map((s,a)=>e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border group",children:[e.jsx("img",{src:xe(s,a),alt:`Gallery ${a}`,className:"w-full h-full object-cover"}),e.jsx(m,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{const t=[...r.gallery];t.splice(a,1),l("gallery",t)},children:e.jsx(F,{className:"h-3 w-3"})})]},`path-${a}`)),r.gallery_files.map((s,a)=>e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border-2 border-primary/20 group animate-in fade-in zoom-in duration-300",children:[e.jsx("img",{src:S(s),alt:`New Upload ${a}`,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-1 left-1 bg-primary text-white text-[8px] px-1.5 py-0.5 rounded font-bold uppercase",children:"Nuevo"}),e.jsx(m,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{const t=[...r.gallery_files];t.splice(a,1),l("gallery_files",t)},children:e.jsx(F,{className:"h-3 w-3"})})]},`file-${a}`)),r.gallery.length+r.gallery_files.length<5&&e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>q.current?.click(),className:"flex flex-col items-center justify-center border-2 border-dashed rounded-lg bg-muted/5 hover:bg-muted/10 transition-colors aspect-square group cursor-pointer",children:[e.jsx("div",{className:"p-2 bg-white rounded-full shadow-sm group-hover:scale-110 transition-transform",children:e.jsx(M,{className:"h-4 w-4 text-primary"})}),e.jsx("span",{className:"text-[10px] font-bold uppercase mt-2 text-muted-foreground",children:"Subir"})]}),e.jsxs(m,{type:"button",variant:"ghost",size:"sm",className:"h-8 text-[10px] font-bold uppercase",onClick:()=>_(!0),children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Biblioteca"]})]})]}),i.gallery&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.gallery}),i.gallery_files&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.gallery_files})]}),e.jsx(je,{open:se,onOpenChange:_,onSelect:s=>{s.url&&l("gallery",[...r.gallery,s.url]),_(!1)}})]})})]})}),e.jsxs(h,{value:"variants",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Modificadores y Variables"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define opciones como tamaÃ±o, tÃ©rmino, adiciones, etc."})]}),e.jsxs(m,{type:"button",onClick:E,className:"gap-2",children:[e.jsx(X,{className:"w-4 h-4"})," Agregar Grupo"]})]}),e.jsxs("div",{className:"space-y-6",children:[r.variant_groups.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-xl bg-muted/5",children:[e.jsx(Q,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-lg",children:"Sin variables definidas"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-sm mx-auto mb-6",children:"Agrega grupos de opciones para permitir a tus clientes personalizar este producto."}),e.jsx(m,{type:"button",variant:"outline",onClick:E,children:"Crear primer grupo"})]}),e.jsx(fe,{type:"multiple",className:"w-full space-y-4",defaultValue:r.variant_groups.map((s,a)=>`group-${a}`),children:r.variant_groups.map((s,a)=>e.jsxs(ve,{value:`group-${a}`,className:"border rounded-lg bg-card overflow-hidden",children:[e.jsxs("div",{className:"flex items-center px-4 bg-muted/10",children:[e.jsx(Ne,{className:"flex-1 hover:no-underline py-4",children:e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx("span",{className:"font-bold text-lg",children:s.name||`Nuevo Grupo ${a+1}`}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:s.type==="radio"?"secondary":"outline",className:"text-[10px] h-5",children:s.type==="radio"?"Ãšnica":"MÃºltiple"}),s.is_required&&e.jsx(y,{variant:"destructive",className:"text-[10px] h-5",children:"Requerido"})]})]})}),e.jsx(m,{type:"button",variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive shrink-0 ml-2",onClick:t=>{t.stopPropagation(),re(a)},children:e.jsx(Ce,{className:"w-4 h-4"})})]}),e.jsx(be,{className:"p-0 border-t",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 items-start",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(o,{children:"Nombre del Grupo"}),e.jsx(x,{placeholder:"Ej: Elige el tamaÃ±o, QuÃ© salsa deseas?",value:s.name,onChange:t=>p(a,"name",t.target.value),className:`text-base ${i[`variant_groups.${a}.name`]?"border-red-500":""}`}),i[`variant_groups.${a}.name`]&&e.jsx("p",{className:"text-xs text-red-500",children:i[`variant_groups.${a}.name`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Tipo de SelecciÃ³n"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"button",variant:s.type==="radio"?"default":"outline",className:"flex-1",onClick:()=>p(a,"type","radio"),children:"Ãšnica"}),e.jsx(m,{type:"button",variant:s.type==="checkbox"?"default":"outline",className:"flex-1",onClick:()=>p(a,"type","checkbox"),children:"MÃºltiple"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"ConfiguraciÃ³n"}),e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2 bg-muted/20",children:[e.jsx(b,{checked:!!s.is_required,onCheckedChange:t=>{!!s.is_required!==t&&p(a,"is_required",t)}}),e.jsx(o,{className:"text-xs uppercase font-bold text-muted-foreground cursor-pointer",onClick:()=>p(a,"is_required",!s.is_required),children:"Obligatorio"})]})]})]}),s.type==="checkbox"&&e.jsxs("div",{className:"flex items-center gap-4 text-sm bg-blue-50/50 p-3 rounded-lg border border-blue-100 text-blue-800",children:[e.jsx(P,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Limitar selecciÃ³n:"}),e.jsx("span",{className:"text-xs font-bold uppercase ml-2",children:"MÃ­nimo"}),e.jsx(x,{type:"number",value:s.min_selection,onChange:t=>p(a,"min_selection",parseInt(t.target.value)),className:"w-16 h-8 text-xs bg-white",min:0}),e.jsx("span",{className:"text-xs font-bold uppercase ml-2",children:"MÃ¡ximo"}),e.jsx(x,{type:"number",value:s.max_selection,onChange:t=>p(a,"max_selection",parseInt(t.target.value)),className:"w-16 h-8 text-xs bg-white",min:1})]})]}),e.jsx(W,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"uppercase text-xs font-bold text-muted-foreground",children:"Opciones del Grupo"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.options.length," opciones"]})]}),e.jsx("div",{className:"space-y-2",children:s.options.map((t,c)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg border bg-white group/option hover:border-primary/30 transition-colors",children:[e.jsxs("div",{className:"flex flex-col gap-1 mt-0.5",children:[e.jsx(m,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:bg-muted",disabled:c===0,onClick:()=>z(a,c,"up"),children:e.jsx(Pe,{className:"w-3 h-3"})}),e.jsx(m,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:bg-muted",disabled:c===s.options.length-1,onClick:()=>z(a,c,"down"),children:e.jsx(Ae,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{placeholder:"Nombre (Ej: Grande)",value:t.name,onChange:d=>k(a,c,"name",d.target.value),className:`h-9 ${i[`variant_groups.${a}.options.${c}.name`]?"border-red-500":""}`}),e.jsxs("div",{className:"relative w-32 shrink-0",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-muted-foreground text-xs",children:"$"}),e.jsx(x,{type:"number",placeholder:"0",value:t.price_adjustment,onChange:d=>k(a,c,"price_adjustment",d.target.value),className:`h-9 pl-5 ${i[`variant_groups.${a}.options.${c}.price_adjustment`]?"border-red-500":""}`})]})]}),(i[`variant_groups.${a}.options.${c}.name`]||i[`variant_groups.${a}.options.${c}.price_adjustment`])&&e.jsxs("div",{className:"text-[10px] text-red-500 font-medium px-1",children:[i[`variant_groups.${a}.options.${c}.name`],i[`variant_groups.${a}.options.${c}.price_adjustment`]&&e.jsx("span",{className:"ml-2",children:i[`variant_groups.${a}.options.${c}.price_adjustment`]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx(b,{checked:!!t.is_available,onCheckedChange:d=>{!!t.is_available!==d&&k(a,c,"is_available",d)}}),e.jsx(m,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>le(a,c),children:e.jsx(F,{className:"w-4 h-4"})})]})]},`opt-${a}-${c}`))}),e.jsxs(m,{type:"button",variant:"ghost",size:"sm",onClick:()=>te(a),className:"w-full border border-dashed border-muted-foreground/30 text-muted-foreground hover:bg-muted/30 hover:text-primary",children:[e.jsx(X,{className:"w-3 h-3 mr-2"})," Agregar OpciÃ³n"]})]})]})})]},`group-${a}`))})]})]}),e.jsx(h,{value:"culinary",className:"space-y-6",children:e.jsxs(g,{className:"border-none shadow-sm",children:[e.jsxs(j,{children:[e.jsx(f,{className:"text-lg",children:"Detalles GastronÃ³micos"}),e.jsx(v,{children:"InformaciÃ³n extra para el cliente."})]}),e.jsxs(N,{className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"preparation_time",children:"Tiempo de PreparaciÃ³n (Minutos)"}),e.jsx(x,{id:"preparation_time",type:"number",value:r.preparation_time,onChange:s=>l("preparation_time",s.target.value),placeholder:"Ej: 15"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"calories",children:"CalorÃ­as (Kcal)"}),e.jsx(x,{id:"calories",type:"number",value:r.calories,onChange:s=>l("calories",s.target.value),placeholder:"Ej: 450"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-orange-500"})," AlÃ©rgenos"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:Me.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 bg-muted/20 p-2 rounded-lg border border-transparent hover:border-primary/20 transition-colors",children:[e.jsx(H,{id:`allergen-${s.id}`,checked:r.allergens.includes(s.id),onCheckedChange:()=>V("allergens",s.id)}),e.jsx("label",{htmlFor:`allergen-${s.id}`,className:"text-xs font-medium leading-none cursor-pointer select-none",children:s.label})]},s.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{children:"Etiquetas / Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Fe.map(s=>e.jsx(y,{variant:r.tags.includes(s.id)?"default":"outline",className:`cursor-pointer py-1.5 px-3 transition-all ${r.tags.includes(s.id)?"":"hover:bg-primary/5"}`,onClick:()=>V("tags",s.id),children:s.label},s.id))})]})]})]})}),e.jsx(h,{value:"config",className:"space-y-6",children:e.jsxs(g,{className:"border-none shadow-sm",children:[e.jsxs(j,{children:[e.jsx(f,{className:"text-lg",children:"ConfiguraciÃ³n de Visibilidad"}),e.jsx(v,{children:"Define cÃ³mo y dÃ³nde se muestra el producto."})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border bg-muted/10",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{className:"text-base",children:"Disponibilidad"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Activa para permitir la venta, apaga si el producto estÃ¡ temporalmente agotado."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-bold uppercase tracking-widest ${r.is_available?"text-green-600":"text-slate-400"}`,children:r.is_available?"Disponible":"Agotado"}),e.jsx(b,{checked:!!r.is_available,onCheckedChange:s=>{!!r.is_available!==s&&l("is_available",s)}})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border bg-muted/10",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"text-base",children:"Producto Destacado"}),e.jsx(y,{variant:"secondary",className:"bg-yellow-100 text-yellow-700 hover:bg-yellow-100 border-none",children:"VIP"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AparecerÃ¡ en los primeros lugares y con un diseÃ±o especial en el menÃº."})]}),e.jsx(b,{checked:!!r.is_featured,onCheckedChange:s=>{!!r.is_featured!==s&&l("is_featured",s)}})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx(o,{children:"Estado General del Producto"}),e.jsxs(O,{value:r.status,onValueChange:s=>l("status",s),children:[e.jsx(R,{className:"max-w-[200px]",children:e.jsx(U,{})}),e.jsxs(B,{children:[e.jsx(G,{value:"active",className:"text-green-600 font-medium",children:"Activo"}),e.jsx(G,{value:"inactive",className:"text-slate-400 font-medium",children:"Inactivo"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Los productos inactivos estÃ¡n ocultos totalmente del menÃº pÃºblico."})]}),D.length>0&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(o,{className:"flex items-center gap-2 text-base",children:[e.jsx(Z,{className:"w-4 h-4 text-primary"}),"Disponibilidad por Sede"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selecciona en quÃ© sedes estarÃ¡ disponible este producto. Si no seleccionas ninguna, estarÃ¡ disponible en ",e.jsx("strong",{children:"todas"}),"."]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:D.map(s=>{const a=r.location_ids.includes(s.id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${a?"border-primary bg-primary/5":"border-muted hover:border-muted-foreground/30"}`,children:[e.jsx(H,{id:`location-${s.id}`,checked:a,onCheckedChange:t=>{a!==(t===!0)&&ce(s.id)}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]})]},s.id)})}),r.location_ids.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{variant:"secondary",className:"text-xs",children:[r.location_ids.length," sede",r.location_ids.length!==1?"s":""," seleccionada",r.location_ids.length!==1?"s":""]}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"text-xs h-6",onClick:()=>l("location_ids",[]),children:"Limpiar selecciÃ³n"})]}),i.location_ids&&e.jsx("p",{className:"text-xs text-red-500 font-medium",children:i.location_ids})]})]})]})})]})]}),e.jsxs("div",{className:"sticky bottom-0 -mx-6 mt-10 px-6 py-4 bg-white/80 backdrop-blur-md border-t flex justify-end gap-3 z-20",children:[e.jsx(m,{type:"button",variant:"outline",className:"cursor-pointer",onClick:()=>window.history.back(),children:"Cancelar"}),e.jsx(m,{type:"submit",disabled:T,className:"cursor-pointer gap-2 px-8",children:T?e.jsx(e.Fragment,{children:"Guardando..."}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-4 h-4"}),n?"Actualizar Producto":"Crear Producto"]})})]})]})}export{os as P};
