import{u as k,j as e,H as E,L as f}from"./app-BWcZUh_k.js";import{A}from"./AdminLayout-B1UOdNJe.js";import{B as p}from"./button-Bx2UyVdr.js";import{I as L}from"./input-CMGBXTtX.js";import{L as x}from"./label-BlGb-xZ5.js";import{C as j}from"./checkbox-cCqIRPrQ.js";import{C as g,a as N,b as $,c as D,d as v}from"./card-DoCIMrrQ.js";import{A as F}from"./arrow-left-BWglfU0Z.js";import{S as B}from"./shield-check-BpZo3dOC.js";import{S as G}from"./save-Coe0yH72.js";import"./utils-kbTUnUPe.js";import"./badge-CBYtAEFo.js";import"./progress-xlTaPrZn.js";import"./index-C3JqQcmO.js";import"./index-Cr5NXUSq.js";import"./dropdown-menu-CAUtCpeY.js";import"./createLucideIcon-DfYzJ-dS.js";import"./chevron-right-BEfVsxal.js";import"./index-CwGn2cVl.js";import"./index-POewg-3Z.js";import"./index-DR22RqQm.js";import"./index-CjaLlWml.js";import"./circle-check-DQmrUMdF.js";import"./trash-2-CET8ErO_.js";import"./check-CmqAQkxG.js";import"./credit-card-wYINwV0d.js";import"./shopping-bag-D1_yKv0G.js";import"./dialog-BbHe0xOg.js";import"./x-CnE69C72.js";import"./separator-RbFfPp9_.js";import"./sheet-CXe3NyIA.js";import"./index-B74vV9QQ.js";import"./index-gldBq1zT.js";import"./index-_mriArsD.js";import"./index-DqPTcVec.js";import"./index-nDWJybZ2.js";import"./index-q6x7vkRP.js";import"./menuConfig-CEHCLp95.js";import"./video-CpkL3IeV.js";import"./chef-hat-BQH1ZOqC.js";import"./table-DFCKiiJU.js";import"./user-D-VQ4bLa.js";import"./map-pin-BgI0Fwjd.js";import"./banknote-7cPYNmAK.js";import"./star-cbFfhcmw.js";import"./users-DVRxXIYk.js";import"./calendar-check-wNs4LiRY.js";import"./calendar-Do7Le9Bn.js";import"./briefcase-Ba4-n3eX.js";import"./truck-YC6dQT8N.js";import"./message-circle-CIDtOzq-.js";import"./package-CsHU_uPD.js";import"./layout-dashboard-MM33-NJe.js";import"./badge-check-CDye1NaZ.js";import"./lock-eVECApui.js";import"./sparkles-cnY1d8ny.js";import"./external-link-C1tvWK6f.js";import"./chevron-down-B1sQTrrJ.js";import"./headphones-Bv4Q0kgK.js";import"./shield-CH8G-oHZ.js";import"./sonner-DUQUgho7.js";import"./index-Co3vlqbW.js";function Je({role:m,permissions:b,currentTenant:l}){const n=!!m,{data:o,setData:c,post:C,put:y,processing:u,errors:h}=k({name:m?.name||"",permissions:m?.permissions.map(s=>s.id)||[]}),w=s=>{s.preventDefault(),n?y(route("tenant.roles.update",{tenant:l.slug,role:m.id})):C(route("tenant.roles.store",{tenant:l.slug}))},S=s=>{const r=new Set(o.permissions);r.has(s)?r.delete(s):r.add(s),c("permissions",Array.from(r))},R=s=>{const r=s.map(i=>i.id),d=r.every(i=>o.permissions.includes(i));let a=[...o.permissions];d?a=a.filter(i=>!r.includes(i)):r.forEach(i=>{a.includes(i)||a.push(i)}),c("permissions",a)};return e.jsxs(A,{title:n?"Editar Rol":"Crear Nuevo Rol",children:[e.jsx(E,{title:n?"Editar Rol":"Crear Nuevo Rol"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(p,{variant:"ghost",size:"icon",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:e.jsx(F,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:n?`Editar Rol: ${m.name}`:"Crear Nuevo Rol"}),e.jsx("p",{className:"text-muted-foreground",children:"Define el nombre del rol y sus permisos de acceso."})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs(g,{children:[e.jsxs(N,{children:[e.jsx($,{children:"Información Básica"}),e.jsx(D,{children:"Asigna un nombre descriptivo para identificar este rol en tu equipo."})]}),e.jsx(v,{children:e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx(x,{htmlFor:"name",children:"Nombre del Rol"}),e.jsx(L,{id:"name",placeholder:"Ej. Gerente de Tienda",value:o.name,onChange:s=>c("name",s.target.value)}),h.name&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:h.name})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Permisos del Sistema"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Selecciona las acciones que este rol podrá realizar."})]}),e.jsxs("div",{className:"text-sm font-medium text-slate-500",children:[o.permissions.length," permisos seleccionados"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(b).map(([s,r])=>{const d=r.map(t=>t.id),a=d.every(t=>o.permissions.includes(t)),i=d.some(t=>o.permissions.includes(t));return e.jsxs(g,{children:[e.jsxs(N,{className:"bg-muted/30 pb-3 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"font-bold flex items-center gap-2",children:[e.jsx(B,{className:`h-4 w-4 ${i?"text-primary":"text-muted-foreground"}`}),s]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{id:`module-${s}`,checked:a,onCheckedChange:()=>R(r)}),e.jsx(x,{htmlFor:`module-${s}`,className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground cursor-pointer select-none",children:"Todos"})]})]}),e.jsx(v,{className:"p-4 grid gap-3",children:r.map(t=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{id:`perm-${t.id}`,checked:o.permissions.includes(t.id),onCheckedChange:()=>S(t.id)}),e.jsx("div",{className:"grid gap-1.5 leading-none",children:e.jsx(x,{htmlFor:`perm-${t.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:t.label||t.name})})]},t.id))})]},s)})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 pb-12",children:[e.jsx(p,{variant:"outline",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:"Cancelar"})}),e.jsxs(p,{type:"submit",disabled:u,className:"min-w-[150px] cursor-pointer",children:[e.jsx(G,{}),u?"Guardando...":"Guardar Rol"]})]})]})]})]})}export{Je as default};
