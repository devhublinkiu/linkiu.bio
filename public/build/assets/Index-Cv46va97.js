import{r as g,j as e,c as te,H as re,u as ie,a as F,t as D}from"./app-BxeeMXn5.js";import{A as ne}from"./AdminLayout-qCE3vY7L.js";import{C as le,a as oe,b as ce,c as de,d as me}from"./card-CZ4HJuOG.js";import{S as J}from"./switch-DaaS2XD2.js";import{L as N}from"./label-DvE9LE6F.js";import{B as y}from"./button-7JWLOcK_.js";import{I as K}from"./input-DAizBa_g.js";import{T as pe}from"./textarea-D2cLWPO4.js";import{B as E}from"./badge-lrHzGyyu.js";import{P as ue}from"./dropdown-menu-y9rp4bWE.js";import{D as xe,f as he,a as ge,b as fe,c as je,d as be,e as ve}from"./dialog-bj0tKiGn.js";import{A as B,h as G,a as H,b as R,c as V,d as U,e as q,f as W,g as X}from"./alert-dialog-M1Oqq8sv.js";import{S as Q,a as Y,b as ee,c as se,d as P}from"./select-Mywosk_A.js";import{S as Ne}from"./scroll-area-wE2jkLAZ.js";import{c as T}from"./utils-C-R0dfCD.js";import{P as Ce,a as ye,b as Se}from"./popover-cHKyHqFI.js";import{X as ae}from"./x-CpN8cc9J.js";import{C as we}from"./chevrons-up-down-BAawmQ--.js";import{S as _e}from"./search-DJaePwa1.js";import{C as De}from"./check-DyXxeGP9.js";import{E as Ee,a as ke,e as Te,c as Ae,d as ze}from"./empty-gUYn75xU.js";import{S as Le}from"./store-D3k3HmPm.js";import{C as Me}from"./circle-check-BQHjiPz9.js";import{M as Z}from"./map-pin-DbqcMmJZ.js";import{T as Pe}from"./truck-Dctgs6Id.js";import{B as Ze}from"./building-2-ozBiMD1D.js";import{G as Oe}from"./globe-B0Bh5q98.js";import{L as $}from"./loader-circle-Os_MzIh-.js";import{S as Fe}from"./save-CRXVx6Sd.js";import{T as $e}from"./trash-2-Cefy4eHW.js";import{P as Ie}from"./plus-CGb4S1OW.js";import"./progress-BPtmN4cS.js";import"./index-D1_1hXqK.js";import"./index-Dtj3r8is.js";import"./menuConfig--lJI1wgO.js";import"./video-BBI0Mdxh.js";import"./createLucideIcon-MMsaX1RM.js";import"./chef-hat-BUkOBHO9.js";import"./table-YYiP2uiH.js";import"./user-CUi44rAN.js";import"./banknote-o40mAnOF.js";import"./star-Cxzywz77.js";import"./users-Bu-h6n7y.js";import"./calendar-check-DZWxogn-.js";import"./calendar-BmHj6uld.js";import"./briefcase-ClT8Apdn.js";import"./message-circle-BPpK8KIf.js";import"./credit-card-DdNcKhKR.js";import"./package-1Cz2kpnt.js";import"./shopping-bag-CWfZSTHo.js";import"./layout-dashboard-BHjPtgyJ.js";import"./badge-check-DHBa0N5U.js";import"./lock-D8DYOORy.js";import"./chevron-right-DPgD6mkS.js";import"./sparkles-Bns8Lzd1.js";import"./separator-0SREGApO.js";import"./external-link-BEZwjyKz.js";import"./chevron-down-CUwoWnp1.js";import"./headphones-DG2WmJqQ.js";import"./shield-Bco25DSE.js";import"./sonner-CzgRTX_z.js";import"./index-BAK1YxAc.js";import"./index-YFI2wHgC.js";import"./index-CYQStCBS.js";import"./index-B6sjIBFy.js";import"./index-B6i64pSH.js";import"./index-qgmO2-AH.js";import"./sheet-Bbp6VhsK.js";import"./index-BUGEk3O6.js";import"./index-D8L8_pCG.js";import"./index-DWUEdQX6.js";import"./index-B9B_fttR.js";import"./index-BdQq_4o_.js";import"./chevron-up-CGTnGh2u.js";function Be(){const[m,a]=g.useState([]),[p,f]=g.useState([]),[h,c]=g.useState(!1),[n,x]=g.useState(!1);g.useEffect(()=>{i()},[]);const i=async()=>{c(!0);try{const s=await(await fetch("https://api-colombia.com/api/v1/Department")).json();a(s.sort((l,t)=>l.name.localeCompare(t.name)))}catch(o){console.error("Error fetching departments:",o)}finally{c(!1)}};return{departments:m,cities:p,loadingDepts:h,loadingCities:n,fetchCities:async o=>{if(!o){f([]);return}x(!0);try{const l=await(await fetch(`https://api-colombia.com/api/v1/Department/${o}/cities`)).json();f(l.sort((t,r)=>t.name.localeCompare(r.name)))}catch(s){console.error("Error fetching cities:",s)}finally{x(!1)}}}}function Ge({options:m,selected:a,onChange:p,placeholder:f="Select options...",className:h,disabled:c=!1}){const[n,x]=g.useState(!1),[i,d]=g.useState(""),o=m.filter(r=>r.label.toLowerCase().includes(i.toLowerCase())),s=r=>{a.includes(r)?p(a.filter(j=>j!==r)):p([...a,r])},l=(r,j)=>{j.stopPropagation(),p(a.filter(C=>C!==r))},t=a.map(r=>m.find(j=>j.value===r)).filter(Boolean);return e.jsxs(Ce,{open:n,onOpenChange:x,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(y,{variant:"outline",role:"combobox","aria-expanded":n,className:T("w-full justify-between h-auto min-h-10 px-3 py-2 hover:bg-background",h),disabled:c,children:[e.jsxs("div",{className:"flex flex-wrap gap-1 items-center w-full",children:[t.length>0?t.map(r=>e.jsxs(E,{variant:"secondary",className:"mr-1 mb-1 font-normal",children:[r.label,e.jsx("span",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 cursor-pointer hover:bg-destructive hover:text-destructive-foreground transition-colors",onClick:j=>l(r.value,j),children:e.jsx(ae,{className:"h-3 w-3"})})]},r.value)):e.jsx("span",{className:"text-muted-foreground font-normal",children:f}),e.jsx("span",{className:"flex-1 min-w-[5px]"})]}),e.jsx(we,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(Se,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:[e.jsxs("div",{className:"flex items-center border-b px-3",children:[e.jsx(_e,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx("input",{className:"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Buscar...",value:i,onChange:r=>d(r.target.value)})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsx("div",{className:"p-1",children:o.length===0?e.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No se encontraron resultados."}):o.map(r=>e.jsxs("div",{className:T("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a.includes(r.value)&&"bg-accent text-accent-foreground"),onClick:()=>s(r.value),children:[e.jsx("div",{className:T("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a.includes(r.value)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(De,{className:T("h-4 w-4")})}),e.jsx("span",{children:r.label})]},r.value))})}),a.length>0&&e.jsx("div",{className:"p-2 border-t",children:e.jsx(y,{variant:"ghost",className:"w-full h-8 text-xs justify-center",onClick:()=>p([]),children:"Limpiar Selección"})})]})]})}function ma({tenant:m,shippingMethods:a,tenantCity:p,tenantState:f,locations:h=[],userLocationId:c}){const{currentUserRole:n}=te().props,[x,i]=g.useState(!1),d=b=>n?n.is_owner===!0||n.permissions?.includes("*")===!0||n.permissions?.includes(b)===!0:!1,o=(b,_,u)=>{b&&(b.preventDefault(),b.stopPropagation()),d(_)?u():i(!0)},s=b=>a.find(_=>_.type===b),l=s("pickup"),t=s("local"),r=s("national"),j=t?.location?.city??p,C=t?.location?.state??f,w=[j,C].filter(Boolean).join(", ")||"No configurada";return e.jsxs(ne,{title:"Configuración de Envíos",children:[e.jsx(re,{title:"Envíos - Linkiu.Bio"}),e.jsxs("div",{className:"max-w-5xl mx-auto py-8 text-slate-900",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Métodos de Envío"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Configura cómo tus clientes reciben sus pedidos."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(L,{tenant:m,method:l,title:"Retiro en Tienda",description:"El cliente pasa a recoger su pedido.",icon:e.jsx(Le,{className:"w-6 h-6"}),colorClass:"bg-orange-100 text-orange-600",borderColorClass:"border-orange-500/50",handleProtectedAction:o,locations:h,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-100 text-sm text-slate-600 font-medium",children:["Esta opción siempre es ",e.jsx("strong",{children:"Gratis"})," para el cliente."]}),e.jsx(M,{tenant:m,method:l,type:"pickup",locations:h,handleProtectedAction:o})]})}),e.jsx(L,{tenant:m,method:t,title:"Domicilio Local",description:`Entregas en tu ciudad (${w}).`,icon:e.jsx(Z,{className:"w-6 h-6"}),colorClass:"bg-blue-100 text-blue-600",borderColorClass:"border-blue-500/50",handleProtectedAction:o,locations:h,children:e.jsxs("div",{className:"space-y-4",children:[!j&&e.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg text-xs font-medium border border-red-100",children:"⚠️ Asigna una sede con ciudad configurada o configura la ciudad del negocio para que esto funcione."}),j&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 text-blue-700 rounded-lg text-sm border border-blue-100 font-medium",children:[e.jsx(Me,{className:"w-4 h-4"}),"Funciona para clientes en ",e.jsx("strong",{children:w}),"."]}),e.jsx(M,{tenant:m,method:t,type:"local",locations:h,handleProtectedAction:o})]})})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(L,{tenant:m,method:r,title:"Despachos Nacionales",description:"Envíos por transportadora a otras ciudades.",icon:e.jsx(Pe,{className:"w-6 h-6"}),colorClass:"bg-purple-100 text-purple-600",borderColorClass:"border-purple-500/50",handleProtectedAction:o,locations:h,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{tenant:m,method:r,type:"national",locations:h,handleProtectedAction:o}),r?.is_active&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px bg-slate-100 my-4"}),e.jsx(He,{tenant:m,method:r,handleProtectedAction:o})]})]})})})]}),e.jsx(ue,{open:x,onOpenChange:i})]})]})}function L({tenant:m,method:a,title:p,description:f,icon:h,colorClass:c,borderColorClass:n,children:x,handleProtectedAction:i,locations:d}){const o=s=>{a&&i(null,"shipping_zones.update",()=>{F.put(route("tenant.shipping.update",{tenant:m.slug,method:a.id}),{is_active:s},{preserveScroll:!0,onSuccess:()=>D.success(s?"Método activado":"Método desactivado")})})};return e.jsxs(le,{className:`border-2 transition-all ${a?.is_active?n+" shadow-lg shadow-purple-500/5":"border-slate-100"}`,children:[e.jsxs(oe,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${c}`,children:h}),e.jsx(J,{checked:a?.is_active,onCheckedChange:o,disabled:!a})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(ce,{className:"m-0",children:p}),a?.location?e.jsxs(E,{variant:"outline",className:"text-[10px] h-4 border-primary/20 bg-primary/5 text-primary gap-1",children:[e.jsx(Ze,{className:"w-2.5 h-2.5"}),a.location.name]}):e.jsxs(E,{variant:"secondary",className:"text-[10px] h-4 gap-1",children:[e.jsx(Oe,{className:"w-2.5 h-2.5"}),"Global"]})]}),e.jsx(de,{children:f})]}),a?.is_active&&e.jsx(me,{children:x})]})}function M({tenant:m,method:a,type:p,locations:f=[],handleProtectedAction:h}){const{data:c,setData:n,put:x,processing:i,isDirty:d}=ie({cost:a?.cost??0,free_shipping_min_amount:a?.free_shipping_min_amount??"",delivery_time:a?.delivery_time??"",instructions:a?.instructions??"",settings:a?.settings??{},location_id:a?.location_id??"all"});if(!a)return null;const o=s=>{s.preventDefault(),h(null,"shipping_zones.update",()=>{x(route("tenant.shipping.update",{tenant:m.slug,method:a.id}),{onSuccess:()=>D.success("Configuración guardada")})})};return e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-xs font-bold text-slate-500 uppercase",children:"Sede Responsable"}),e.jsxs(Q,{value:c.location_id?.toString(),onValueChange:s=>n("location_id",s==="all"?"all":s),children:[e.jsx(Y,{className:"bg-white border-slate-200 h-9",children:e.jsx(ee,{placeholder:"Todas las sedes (Global)"})}),e.jsxs(se,{children:[e.jsx(P,{value:"all",children:"Todas las sedes (Global)"}),f.map(s=>e.jsx(P,{value:s.id.toString(),children:s.name},s.id))]})]})]}),p!=="pickup"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-xs font-bold text-slate-500 uppercase",children:"Costo de Envío"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-slate-500 text-sm",children:"$"}),e.jsx(O,{className:"pl-6",value:c.cost,onChange:s=>n("cost",s===""?0:s)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-xs font-bold text-slate-500 uppercase",children:"Gratis a partir de"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-slate-500 text-sm",children:"$"}),e.jsx(O,{className:"pl-6",placeholder:"0",value:c.free_shipping_min_amount===""||c.free_shipping_min_amount==null?"":Number(c.free_shipping_min_amount),onChange:s=>n("free_shipping_min_amount",s===""?"":s)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-xs font-bold text-slate-500 uppercase",children:p==="pickup"?"Tiempo de Preparación":"Tiempo de Entrega"}),e.jsx(K,{placeholder:p==="pickup"?"Ej: Listo en 2 horas":"Ej: 1-3 días hábiles",value:p==="pickup"?c.settings?.prep_time||"":c.delivery_time,onChange:s=>{p==="pickup"?n("settings",{...c.settings,prep_time:s.target.value}):n("delivery_time",s.target.value)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-xs font-bold text-slate-500 uppercase",children:"Instrucciones para el cliente"}),e.jsx(pe,{placeholder:"Ej: Te enviaremos el número de guía por WhatsApp.",className:"resize-none h-20",value:c.instructions,onChange:s=>n("instructions",s.target.value)})]}),d&&e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs(y,{type:"submit",size:"sm",disabled:i,className:"gap-2 bg-slate-900 hover:bg-slate-800",children:[i?e.jsx($,{className:"w-4 h-4 animate-spin"}):e.jsx(Fe,{className:"w-4 h-4"}),"Guardar Cambios"]})})]})}function He({tenant:m,method:a,handleProtectedAction:p}){const[f,h]=g.useState(!1),[c,n]=g.useState(null),[x,i]=g.useState(!1),d=s=>{s&&p(null,"shipping_zones.update",()=>{const l=(a.zones||[]).filter(t=>t.id!==s);F.post(route("tenant.shipping.zones.update",{tenant:m.slug,method:a.id}),{zones:l},{preserveScroll:!0,onStart:()=>i(!0),onFinish:()=>i(!1),onSuccess:()=>{D.success("Zona eliminada"),n(null)}})})},o=g.useMemo(()=>{const s={};return a.zones?(a.zones.forEach(l=>{const t=l.department_code;s[t]||(s[t]={id:t,name:l.department_name,zones:[]}),s[t].zones.push(l)}),s):{}},[a.zones]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-sm text-slate-800 uppercase tracking-wider flex items-center gap-2",children:["Zonas de Cobertura (",a.zones?.length||0,")",x&&e.jsx($,{className:"w-4 h-4 animate-spin text-slate-400"})]}),e.jsx(Re,{tenant:m,method:a,isOpen:f,setIsOpen:h,handleProtectedAction:p})]}),e.jsxs("div",{className:"space-y-3",children:[Object.values(o).map(s=>{const l=s.zones.find(t=>!t.city_code);return e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-3 shadow-sm hover:border-slate-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"font-bold text-sm text-slate-700 flex items-center gap-2",children:[e.jsx(Z,{className:"w-3.5 h-3.5 text-slate-400"}),s.name]}),l&&e.jsxs(B,{children:[e.jsx(G,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"h-6 w-6 text-slate-400 hover:text-red-500 hover:bg-red-50",children:e.jsx($e,{className:"w-3.5 h-3.5"})})}),e.jsxs(H,{children:[e.jsxs(R,{children:[e.jsx(V,{children:"¿Eliminar todo el departamento?"}),e.jsxs(U,{children:["Esta acción eliminará la cobertura para todo el departamento de ",s.name,"."]})]}),e.jsxs(q,{children:[e.jsx(W,{children:"Cancelar"}),e.jsx(X,{variant:"destructive",onClick:()=>l.id!=null&&d(l.id),children:"Eliminar"})]})]})]})]}),l?e.jsxs(E,{variant:"secondary",className:"text-xs font-semibold bg-blue-50 text-blue-700 hover:bg-blue-100 border-blue-100 flex items-center justify-between gap-2 py-1 px-3",children:[e.jsx("span",{children:"Todo el departamento"}),l.price&&e.jsxs("span",{className:"font-black text-blue-800",children:["$",new Intl.NumberFormat("es-CO").format(l.price)]})]}):e.jsx("div",{className:"flex flex-wrap gap-2",children:s.zones.map(t=>e.jsxs(E,{variant:"outline",className:"text-xs font-medium gap-1 pr-1 pl-3 py-1 bg-slate-50 flex items-center border-slate-200",children:[t.city_name,t.price!=null&&e.jsxs("span",{className:"font-bold text-slate-900 ml-1 border-l border-slate-200 pl-2",children:["$",new Intl.NumberFormat("es-CO").format(t.price)]}),e.jsxs(B,{open:c===t.id,onOpenChange:r=>!r&&n(null),children:[e.jsx(G,{asChild:!0,children:e.jsx(y,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 hover:bg-slate-200 rounded-full ml-1 text-slate-400 hover:text-red-600",onClick:()=>t.id!=null&&n(t.id),children:e.jsx(ae,{className:"w-3 h-3"})})}),e.jsxs(H,{children:[e.jsxs(R,{children:[e.jsx(V,{children:"¿Eliminar esta ciudad?"}),e.jsxs(U,{children:["Se quitará ",t.city_name," de la cobertura de envío."]})]}),e.jsxs(q,{children:[e.jsx(W,{children:"Cancelar"}),e.jsx(X,{variant:"destructive",onClick:()=>t.id!=null&&d(t.id),children:"Eliminar"})]})]})]})]},t.id))})]},s.id)}),(!a.zones||a.zones.length===0)&&e.jsx(Ee,{className:"border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:e.jsxs(ke,{children:[e.jsx(Te,{variant:"icon",children:e.jsx(Z,{className:"size-8 text-slate-400"})}),e.jsx(Ae,{children:"No hay zonas de cobertura"}),e.jsx(ze,{children:'Usa el botón "Nueva Zona" para agregar departamentos o ciudades.'})]})})]})]})}function Re({tenant:m,method:a,isOpen:p,setIsOpen:f,handleProtectedAction:h}){const{departments:c,cities:n,fetchCities:x,loadingDepts:i}=Be(),[d,o]=g.useState(null),[s,l]=g.useState([]),[t,r]=g.useState(!1),[j,C]=g.useState(""),[w,b]=g.useState(!1);g.useEffect(()=>{d&&(x(d.id),l([]),r(!1),C(""))},[d]);const _=()=>{h(null,"shipping_zones.update",()=>{if(!d)return;const u=a.zones||[],v=[],S=j===""?null:j;if(t?u.some(z=>z.department_code===String(d.id)&&z.city_code===null)||v.push({department_code:String(d.id),department_name:d.name,city_code:null,city_name:null,price:S}):s.forEach(k=>{u.some(I=>I.department_code===String(d.id)&&I.city_code===String(k.id))||v.push({department_code:String(d.id),department_name:d.name,city_code:String(k.id),city_name:k.name,price:S})}),v.length===0){D.error("Las zonas seleccionadas ya existen.");return}const A=[...u,...v];F.post(route("tenant.shipping.zones.update",{tenant:m.slug,method:a.id}),{zones:A},{preserveScroll:!0,onStart:()=>b(!0),onFinish:()=>b(!1),onSuccess:()=>{D.success(`${v.length} zona(s) agregada(s)`),f(!1),o(null),l([]),r(!1),C("")}})})};return e.jsxs(xe,{open:p,onOpenChange:u=>h(null,"shipping_zones.create",()=>f(u)),children:[e.jsx(he,{asChild:!0,children:e.jsxs(y,{size:"sm",variant:"outline",className:"h-8 text-xs gap-1 border-dashed font-bold",children:[e.jsx(Ie,{className:"w-3.5 h-3.5"})," Nueva Zona"]})}),e.jsxs(ge,{className:"w-[calc(100vw-2rem)] max-w-[425px] max-h-[90vh] overflow-y-auto sm:w-full",children:[e.jsxs(fe,{children:[e.jsx(je,{className:"font-black text-xl",children:"Agregar Cobertura"}),e.jsx(be,{children:"Selecciona los destinos nacionales permitidos."})]}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-xs font-bold uppercase text-slate-500",children:"Departamento"}),e.jsxs(Q,{onValueChange:u=>{const v=c.find(S=>String(S.id)===u);o(v||null)},children:[e.jsx(Y,{children:e.jsx(ee,{placeholder:i?"Cargando...":"Selecciona Departamento"})}),e.jsx(se,{children:e.jsx(Ne,{className:"h-[200px]",children:c.map(u=>e.jsx(P,{value:String(u.id),children:u.name},u.id))})})]})]}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(N,{className:"text-xs font-bold uppercase text-slate-500",children:["Ciudades (",t?"Todas":s.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"select-all-mode",checked:t,onCheckedChange:u=>{r(u),u&&l([])}}),e.jsx(N,{htmlFor:"select-all-mode",className:"text-xs font-normal text-slate-500",children:"Todo el departamento"})]})]}),!t&&e.jsx(Ge,{options:n.map(u=>({label:u.name,value:String(u.id)})),selected:s.map(u=>String(u.id)),onChange:u=>{const v=u.map(S=>n.find(A=>String(A.id)===S)).filter(Boolean);l(v)},placeholder:"Seleccionar ciudades...",className:"w-full"}),t&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded-xl text-sm text-blue-700 text-center font-medium",children:["Aplicar a ",e.jsxs("strong",{children:["todo (",d.name,")"]}),"."]}),e.jsxs("div",{className:"pt-2",children:[e.jsx(N,{className:"text-xs font-bold uppercase text-slate-500",children:"Costo Especial (Opcional)"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-sm font-bold text-slate-400",children:"$"}),e.jsx(O,{placeholder:`Tarifa base: $${new Intl.NumberFormat("es-CO").format(a.cost)}`,value:j,onChange:C,className:"h-10"})]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1.5 leading-relaxed",children:"Si lo dejas vacío, se cobrará el costo base configurado en el método."})]})]})]}),e.jsx(ve,{children:e.jsxs(y,{onClick:_,disabled:!d||!t&&s.length===0||w,className:"w-full sm:w-auto bg-slate-900 gap-2",children:[w?e.jsx($,{className:"w-4 h-4 animate-spin"}):null,"Agregar ",t?"Todo el Depto":`${s.length} Zona(s)`]})})]})]})}function O({value:m,onChange:a,className:p,placeholder:f,...h}){const c=x=>{if(x===""||x===null||x===void 0)return"";const i=Number(x);return isNaN(i)?"":new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}).format(i)},n=x=>{let i=x.target.value;if(i.includes(",")&&(i=i.split(",")[0]),i=i.replace(/\./g,""),i===""){a("");return}isNaN(Number(i))||a(Number(i))};return e.jsx(K,{type:"text",className:p,placeholder:f,value:c(m),onChange:n})}export{ma as default};
