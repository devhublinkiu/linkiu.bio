import{r as y,u as I,j as e,H as T,L as C}from"./app-D9wldZxo.js";import{S as k}from"./SuperAdminLayout-CPtcwFpO.js";import{B as o}from"./button-Dadb_Lep.js";import{C as u,a as x,b as j,c as v,d as g}from"./card-DbFVjWqh.js";import{I as f}from"./input-rMsYcH4C.js";import{L as i}from"./label-DoqMNi9Z.js";import{T as F}from"./textarea-DBah2UDL.js";import{S as c,a as d,b as p,c as m,d as n}from"./select-Bbe1RuXu.js";import{S as L}from"./switch-BIQUlD4u.js";import{F as t}from"./field-C1EtKLDH.js";import{R as E}from"./RichTextEditor-OU5q9VEM.js";import{A as P}from"./arrow-left-CN9XnZib.js";import{U as V}from"./upload-C_uPsg93.js";import"./dropdown-menu-C4-9o8Rw.js";import"./createLucideIcon-CJjlOp5I.js";import"./utils-B0KHI9vB.js";import"./chevron-right-BSwXEIvG.js";import"./index-BDWpq_YI.js";import"./index-BrcTw33p.js";import"./index-BMdzuiHN.js";import"./index-tfOuMV4B.js";import"./circle-check-CN90YBLh.js";import"./trash-2-CMPgRqgc.js";import"./check-BAxbGpAF.js";import"./credit-card-CPDlDYf1.js";import"./shopping-bag-CQGcPT0-.js";import"./dialog-C0Lg02Tk.js";import"./x-dvUxMxq3.js";import"./separator-L5pP8n2q.js";import"./index-CZBSMaku.js";import"./sheet-BP6KOnln.js";import"./index-CbR7iZJO.js";import"./index-DeHGgcwY.js";import"./index-CXzOyCXW.js";import"./index-DdTS5Ad2.js";import"./index-fFU5c_p6.js";import"./index-Dvu8qGWr.js";import"./index-D4lOZYra.js";import"./echo-CmTENghG.js";import"./chevrons-up-down-Cepco8Sn.js";import"./badge-check-CEpGdEtW.js";import"./ApplicationLogo-DuPOXIDR.js";import"./users-OjDIvTV8.js";import"./layout-grid-DMUl8Ye2.js";import"./index-BdQq_4o_.js";import"./index--Jev_GdI.js";import"./chevron-down-Dux0wLDw.js";import"./chevron-up-IlwuOcq-.js";import"./list-ordered-6rHQJLQR.js";import"./list-BKTGEw3x.js";const O=[{value:"new",label:"Nuevo"},{value:"fix",label:"Corrección"},{value:"improvement",label:"Mejora"},{value:"security",label:"Seguridad"},{value:"performance",label:"Rendimiento"}],U=[{value:"none",label:"Sin icono"},{value:"CalendarRange",label:"CalendarRange"},{value:"Sparkles",label:"Sparkles"},{value:"Package",label:"Package"},{value:"Wrench",label:"Wrench"},{value:"Shield",label:"Shield"},{value:"Zap",label:"Zap"}];function Pe({categories:b}){const _=y.useRef(null),[N]=y.useState(""),{data:r,setData:s,post:S,processing:w,errors:l}=I({release_note_category_id:b[0]?.id?.toString()??"",title:"",slug:"",type:"new",icon_name:"",cover_path:"",cover_preview:null,cover:null,hero_path:"",snippet:"",body:"",published_at:new Date().toISOString().slice(0,10),status:"draft",is_featured:!1}),R=a=>{a.preventDefault(),S(route("release-notes.store"))};return e.jsxs(k,{header:"Nuevo Release Note",children:[e.jsx(T,{title:"Nuevo Release Note"}),e.jsxs("div",{className:"max-w-3xl mx-auto py-6",children:[e.jsx(o,{variant:"ghost",className:"mb-4 pl-0",asChild:!0,children:e.jsxs(C,{href:route("release-notes.index"),className:"flex items-center gap-2 text-muted-foreground hover:text-gray-900",children:[e.jsx(P,{className:"h-4 w-4"}),"Volver al listado"]})}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx(j,{children:"Contenido"}),e.jsx(v,{children:"Título, categoría, tipo y resumen."})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Categoría"}),e.jsxs(c,{value:r.release_note_category_id,onValueChange:a=>s("release_note_category_id",a),children:[e.jsx(d,{children:e.jsx(p,{placeholder:"Selecciona categoría"})}),e.jsx(m,{children:b.map(a=>e.jsx(n,{value:String(a.id),children:a.name},a.id))})]}),e.jsx(t,{children:l.release_note_category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Tipo"}),e.jsxs(c,{value:r.type,onValueChange:a=>s("type",a),children:[e.jsx(d,{children:e.jsx(p,{})}),e.jsx(m,{children:O.map(a=>e.jsx(n,{value:a.value,children:a.label},a.value))})]}),e.jsx(t,{children:l.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Icono"}),e.jsxs(c,{value:r.icon_name===""?"none":r.icon_name,onValueChange:a=>s("icon_name",a==="none"?"":a),children:[e.jsx(d,{children:e.jsx(p,{placeholder:"Icono (Lucide)"})}),e.jsx(m,{children:U.map(a=>e.jsx(n,{value:a.value,children:a.label},a.value))})]}),e.jsx(t,{children:l.icon_name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"title",children:"Título"}),e.jsx(f,{id:"title",value:r.title,onChange:a=>s("title",a.target.value),placeholder:"Ej. Reservas y mejoras en menú"}),e.jsx(t,{children:l.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"slug",children:"Slug (opcional)"}),e.jsx(f,{id:"slug",value:r.slug,onChange:a=>s("slug",a.target.value),placeholder:"Se genera automáticamente si está vacío"}),e.jsx(t,{children:l.slug})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"snippet",children:"Resumen / Snippet"}),e.jsx(F,{id:"snippet",value:r.snippet,onChange:a=>s("snippet",a.target.value),rows:3,placeholder:"Texto corto para la card en el listado público."}),e.jsx(t,{children:l.snippet})]})]})]}),e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx(j,{children:"Imagen y cuerpo"}),e.jsx(v,{children:"Portada para la card; cuerpo en HTML (texto plano por ahora)."})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Imagen de portada (cover)"}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-start",children:[e.jsxs(o,{type:"button",variant:"outline",onClick:()=>_.current?.click(),children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Abrir ventana de carga"]}),e.jsx("input",{ref:_,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/svg+xml",className:"hidden",onChange:a=>{const h=a.target.files?.[0];h&&(s("cover",h),s("cover_preview",URL.createObjectURL(h)),s("cover_path","")),a.target.value=""}}),r.cover_preview&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.cover_preview,alt:"Vista previa",className:"h-24 w-32 object-cover rounded border"}),e.jsx(o,{type:"button",variant:"ghost",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0 rounded-full bg-muted",onClick:()=>{s("cover",null),s("cover_preview",null),s("cover_path","")},children:"×"})]})]}),e.jsx(t,{children:l.cover_path})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Cuerpo"}),e.jsx(E,{initialContent:N,onChange:a=>s("body",a),placeholder:"Contenido del release…",uploadImageUrl:route("release-notes.upload-image")}),e.jsx(t,{children:l.body})]})]})]}),e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx(j,{children:"Publicación"}),e.jsx(v,{children:"Fecha, estado y destacado."})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"published_at",children:"Fecha de publicación"}),e.jsx(f,{id:"published_at",type:"date",value:r.published_at,onChange:a=>s("published_at",a.target.value)}),e.jsx(t,{children:l.published_at})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Estado"}),e.jsxs(c,{value:r.status,onValueChange:a=>s("status",a),children:[e.jsx(d,{children:e.jsx(p,{})}),e.jsxs(m,{children:[e.jsx(n,{value:"draft",children:"Borrador"}),e.jsx(n,{value:"published",children:"Publicado"})]})]}),e.jsx(t,{children:l.status})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{id:"is_featured",checked:r.is_featured,onCheckedChange:a=>s("is_featured",a)}),e.jsx(i,{htmlFor:"is_featured",children:"Marcar como destacado"})]}),e.jsx(t,{children:l.is_featured})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"submit",disabled:w,children:"Crear release note"}),e.jsx(o,{type:"button",variant:"outline",asChild:!0,children:e.jsx(C,{href:route("release-notes.index"),children:"Cancelar"})})]})]})]})]})}export{Pe as default};
