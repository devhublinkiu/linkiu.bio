import{j as e,L as c,r as h,b as v,H as A}from"./app-BxeeMXn5.js";import{P as C,u as D}from"./PublicLayout-B_xlIeLf.js";import{B as p}from"./button-7JWLOcK_.js";import{f as n}from"./utils-C-R0dfCD.js";import{A as k,h as I,a as P,b as E,c as S,d as T,e as _,f as K,g as q}from"./alert-dialog-M1Oqq8sv.js";import{A as B}from"./arrow-left-CWUDc0In.js";import{S as u}from"./shopping-bag-CWfZSTHo.js";import{A as L}from"./index-DvJPHDSi.js";import{m as F}from"./proxy-Ap0O8bFH.js";import{M as H}from"./minus-BKMoU1rA.js";import{P as M}from"./plus-CGb4S1OW.js";import{T as z}from"./trash-2-Cefy4eHW.js";import"./chevron-right-DPgD6mkS.js";import"./createLucideIcon-MMsaX1RM.js";import"./lock-D8DYOORy.js";import"./truck-Dctgs6Id.js";import"./credit-card-DdNcKhKR.js";import"./headphones-DG2WmJqQ.js";import"./dialog-bj0tKiGn.js";import"./index-B6i64pSH.js";import"./index-BAK1YxAc.js";import"./index-YFI2wHgC.js";import"./index-qgmO2-AH.js";import"./x-CpN8cc9J.js";import"./input-DAizBa_g.js";import"./label-DvE9LE6F.js";import"./index-Dtj3r8is.js";import"./textarea-D2cLWPO4.js";import"./arrow-right-CWH0--9Y.js";import"./map-pin-DbqcMmJZ.js";const Q=({tenant:a})=>{const{items:l,cartTotal:i,updateQuantity:d,removeFromCart:f,clearCart:j,mergeProductImageUrls:g,isLoaded:m}=D(),[b,w]=h.useState(new Set),o=s=>{const t=typeof s.image_url=="string"?s.image_url.trim():"";return t&&(t.startsWith("http://")||t.startsWith("https://"))?t:null},N=s=>!!o(s)&&!b.has(s.lineKey),y=s=>{w(t=>new Set(t).add(s))};return h.useEffect(()=>{if(!a?.slug||!m||l.length===0)return;const s=l.filter(r=>!o(r));if(s.length===0)return;const t=[...new Set(s.map(r=>r.id))];v.post(route("tenant.menu.products.batch",[a.slug]),{ids:t}).then(r=>{const x=Array.isArray(r.data)?r.data:[];x.length&&g(x)}).catch(()=>{})},[a?.slug,m,l.length]),e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-32",children:[e.jsx(A,{title:"Tu Carrito"}),e.jsxs("div",{className:"bg-white sticky top-0 z-40 border-b px-4 py-4 flex items-center justify-between shadow-sm",children:[e.jsx(c,{href:route("tenant.home",a.slug),className:"p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(B,{className:"w-6 h-6"})}),e.jsx("h1",{className:"font-bold text-lg text-slate-800",children:"Tu Pedido"}),l.length>0?e.jsxs(k,{children:[e.jsx(I,{asChild:!0,children:e.jsx("button",{className:"text-xs font-bold text-red-500 hover:text-red-700 bg-red-50 px-3 py-1.5 rounded-full transition-colors",children:"Vaciar"})}),e.jsxs(P,{children:[e.jsxs(E,{children:[e.jsx(S,{children:"¿Estás seguro?"}),e.jsx(T,{children:"Esta acción eliminará todos los productos de tu carrito. No podrás deshacer esta acción."})]}),e.jsxs(_,{children:[e.jsx(K,{children:"Cancelar"}),e.jsx(q,{onClick:j,className:"bg-red-600 hover:bg-red-700 text-white",children:"Sí, vaciar carrito"})]})]})]}):e.jsx("div",{className:"w-10"})]}),e.jsx("div",{className:"max-w-2xl mx-auto p-4",children:l.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-6",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-200 rounded-full flex items-center justify-center",children:e.jsx(u,{className:"w-12 h-12 text-slate-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-slate-500 max-w-xs mx-auto",children:"Parece que aún no has agregado nada delicioso a tu pedido."})]}),e.jsx(c,{href:route("tenant.menu",a.slug),children:e.jsx(p,{className:"font-bold",size:"lg",children:"Ir al Menú"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsx(L,{initial:!1,children:l.map(s=>e.jsxs(F.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-xl overflow-hidden shrink-0 flex items-center justify-center",children:N(s)?e.jsx("img",{src:o(s),alt:s.name,className:"w-full h-full object-cover",onError:()=>y(s.lineKey)}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:e.jsx(u,{className:"w-8 h-8"})})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-slate-900 line-clamp-2",children:s.name}),e.jsx("span",{className:"font-bold text-slate-900 ml-2",children:n(s.price*s.quantity)})]}),s.variant_options&&s.variant_options.length>0&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s.variant_options.map(t=>t.value).join(", ")})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-slate-100 rounded-lg p-1",children:[e.jsx("button",{type:"button","aria-label":"Disminuir cantidad",onClick:()=>d(s.lineKey,s.quantity-1),className:"w-8 h-8 flex items-center justify-center bg-white rounded-md shadow-sm text-slate-600 active:scale-95 transition-transform",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-slate-800 w-6 text-center","aria-live":"polite",children:s.quantity}),e.jsx("button",{type:"button","aria-label":"Aumentar cantidad",onClick:()=>d(s.lineKey,s.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-white rounded-md shadow-sm text-slate-900 active:scale-95 transition-transform",children:e.jsx(M,{className:"w-4 h-4"})})]}),e.jsx("button",{type:"button","aria-label":"Quitar del carrito",onClick:()=>f(s.lineKey),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(z,{className:"w-5 h-5"})})]})]})]},s.lineKey))})}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg border-b pb-4",children:"Resumen"}),e.jsxs("div",{className:"flex justify-between text-slate-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:n(i)})]}),e.jsxs("div",{className:"flex justify-between text-slate-600",children:[e.jsx("span",{children:"Servicio (Opcional)"}),e.jsx("span",{children:"-"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t text-xl font-black text-slate-900",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:n(i)})]})]})]})})]})};function be({tenant:a}){const l=a.brand_colors?.bg_color||"#f8fafc";return e.jsx(C,{bgColor:l,showFloatingCart:!1,renderBottomAction:i=>i.items.length>0?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(c,{href:route("tenant.checkout",a.slug),className:"w-full block",children:e.jsx(p,{className:"w-full h-14 text-lg font-bold shadow-xl shadow-slate-900/20",children:"Continuar a Pagar"})})}):null,children:e.jsx(Q,{tenant:a})})}export{be as default};
