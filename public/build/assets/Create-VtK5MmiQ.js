import{c as k,u as S,j as e,H as L,L as g}from"./app-DvpAkplk.js";import{A as F}from"./AdminLayout-hY3b0G1y.js";import{B as v}from"./button-DOQ0axlO.js";import{I as n}from"./input-Bv-dfyAA.js";import{L as a}from"./label-BjDu_9e_.js";import{S as d,a as c,b as m,c as p,d as l}from"./select-AGOQu6Sd.js";import{F as o}from"./field-DZAR5qV8.js";import{C as V}from"./chevron-left-CFFX0xaS.js";import"./utils-Bt66apXy.js";import"./badge-IfxeRtOE.js";import"./card-CnT0l_PA.js";import"./progress-BHe2VIPc.js";import"./index-CVnMJ0kl.js";import"./index-CnuaM2Cu.js";import"./dropdown-menu-ubFSrLA8.js";import"./createLucideIcon-BAweqaF3.js";import"./chevron-right-wq5EBuGT.js";import"./index-Bw9aTihY.js";import"./index-D8KCWmzE.js";import"./index-DxV-pwI8.js";import"./index-DvNjLHaW.js";import"./circle-check-DihymiLa.js";import"./trash-2-Cl32KA5j.js";import"./check-BnQaAa8B.js";import"./credit-card-fEKVAskI.js";import"./shopping-bag-DhB74yIJ.js";import"./dialog-Cjxgu9dZ.js";import"./x-C_qF6Mva.js";import"./separator-BG2VS_Fl.js";import"./sheet-DsGG5XCT.js";import"./index-2KDpKUG2.js";import"./index-DAaNBk-s.js";import"./index-DGLOWnr1.js";import"./index-ahKcmWZ5.js";import"./index-Dcod572x.js";import"./index-CD1tTlGF.js";import"./menuConfig-CS7C2xYF.js";import"./video-Diu1usog.js";import"./chef-hat-4WRp0NMl.js";import"./table-9Iw8O0xw.js";import"./user-CXZ9uqcX.js";import"./map-pin-BY9e0G3n.js";import"./banknote-CNQnpK3Q.js";import"./star-Cq7jFrzE.js";import"./users-BDTVDblz.js";import"./calendar-check-rPKpguYk.js";import"./calendar-mikciA0V.js";import"./briefcase-5b91nXrO.js";import"./truck-SA0a2FWD.js";import"./message-circle-4blwuSBk.js";import"./package-D7hy5e4b.js";import"./layout-dashboard-Cf5aFky8.js";import"./badge-check-BhvL5u0B.js";import"./lock-DHVVRGwf.js";import"./sparkles-DyQnos2U.js";import"./external-link-DZTE9j3y.js";import"./chevron-down-tlhr8VnY.js";import"./headphones-Bg1cPLTV.js";import"./shield-BW7u8GoI.js";import"./sonner-DgVci-2A.js";import"./index-BdQq_4o_.js";import"./index-uxDWIACH.js";import"./chevron-up-C_1MuBUq.js";function Re({locations:h,categories:_,products:y,shorts_limit:u,shorts_count:f}){const{currentTenant:x}=k().props,b=u!==null&&f>=u,{data:t,setData:i,post:N,processing:j,errors:s}=S({location_id:h[0]?.id?.toString()??"",name:"",description:"",link_type:"category",external_url:"",linkable_type:"App\\Models\\Category",linkable_id:"",short_video:null,sort_order:"0"}),C=r=>{r.preventDefault(),N(route("tenant.shorts.store",x?.slug),{forceFormData:!0})};return e.jsxs(F,{title:"Nuevo short",children:[e.jsx(L,{title:"Nuevo short"}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs(g,{href:route("tenant.shorts.index",x?.slug),className:"text-sm font-medium text-muted-foreground hover:text-primary flex items-center gap-1 mb-4",children:[e.jsx(V,{className:"w-4 h-4"})," Volver a Shorts"]}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight mb-6",children:"Nuevo short"}),b?e.jsx("p",{className:"text-muted-foreground",children:"Has alcanzado el máximo de shorts permitidos en tu plan."}):e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"name",children:"Nombre de la promo *"}),e.jsx(n,{id:"name",value:t.name,onChange:r=>i("name",r.target.value),placeholder:"Ej. 2x1 en hamburguesas",maxLength:255}),e.jsx(o,{children:s.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Sede *"}),e.jsxs(d,{value:t.location_id,onValueChange:r=>i("location_id",r),children:[e.jsx(c,{children:e.jsx(m,{placeholder:"Escoge la sede"})}),e.jsx(p,{children:h.map(r=>e.jsx(l,{value:String(r.id),children:r.name},r.id))})]}),e.jsx(o,{children:s.location_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Enlace *"}),e.jsxs(d,{value:t.link_type,onValueChange:r=>{i("link_type",r),i("linkable_type",r==="category"?"App\\Models\\Category":r==="product"?"App\\Models\\Product":""),i("linkable_id",""),i("external_url","")},children:[e.jsx(c,{children:e.jsx(m,{})}),e.jsxs(p,{children:[e.jsx(l,{value:"category",children:"Categoría"}),e.jsx(l,{value:"product",children:"Producto"}),e.jsx(l,{value:"external",children:"URL externa"})]})]}),e.jsx(o,{children:s.link_type})]}),t.link_type==="category"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Categoría *"}),e.jsxs(d,{value:t.linkable_id,onValueChange:r=>i("linkable_id",r),children:[e.jsx(c,{children:e.jsx(m,{placeholder:"Selecciona categoría"})}),e.jsx(p,{children:_.map(r=>e.jsx(l,{value:String(r.id),children:r.name},r.id))})]}),e.jsx(o,{children:s.linkable_id})]}),t.link_type==="product"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Producto *"}),e.jsxs(d,{value:t.linkable_id,onValueChange:r=>i("linkable_id",r),children:[e.jsx(c,{children:e.jsx(m,{placeholder:"Selecciona producto"})}),e.jsx(p,{children:y.map(r=>e.jsx(l,{value:String(r.id),children:r.name},r.id))})]}),e.jsx(o,{children:s.linkable_id})]}),t.link_type==="external"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"URL *"}),e.jsx(n,{type:"url",value:t.external_url,onChange:r=>i("external_url",r.target.value),placeholder:"https://..."}),e.jsx(o,{children:s.external_url})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Subir short *"}),e.jsx(n,{type:"file",accept:".mp4,.mov",onChange:r=>i("short_video",r.target.files?.[0]??null)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"MP4 o MOV, máx. 50 MB"}),e.jsx(o,{children:s.short_video})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"description",children:"Descripción (máx. 50 caracteres)"}),e.jsx(n,{id:"description",value:t.description,onChange:r=>i("description",r.target.value.slice(0,50)),maxLength:50,placeholder:"Opcional"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.description.length,"/50"]}),e.jsx(o,{children:s.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"sort_order",children:"Orden"}),e.jsx(n,{id:"sort_order",type:"number",min:0,value:t.sort_order,onChange:r=>i("sort_order",r.target.value)}),e.jsx(o,{children:s.sort_order})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{type:"submit",disabled:j,children:j?"Guardando…":"Crear short"}),e.jsx(v,{type:"button",variant:"outline",asChild:!0,children:e.jsx(g,{href:route("tenant.shorts.index",x?.slug),children:"Cancelar"})})]})]})]})]})}export{Re as default};
