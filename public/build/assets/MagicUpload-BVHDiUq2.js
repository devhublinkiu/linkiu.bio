import{r,j as e,H as m,b as C,t as x}from"./app-B2i56772.js";import{B as u}from"./button-BddZHLbc.js";import{C as p,d as f,a as v,b as w,c as y}from"./card-BWsdLjRP.js";import{C as E}from"./circle-check-big-BligsDT3.js";import{C as P}from"./camera-BB49lPfY.js";import{L as S}from"./loader-circle-DonU1VRm.js";import"./index-BKbrreay.js";import"./utils-DyIEM9Hy.js";import"./createLucideIcon-D_eBnp1W.js";function M({token:h,tenant:s}){const[l,i]=r.useState(null),[o,c]=r.useState(null),[n,d]=r.useState(!1),[b,j]=r.useState(!1),g=a=>{if(a.target.files&&a.target.files[0]){const t=a.target.files[0];c(t),i(URL.createObjectURL(t))}},N=async()=>{if(!o)return;d(!0);const a=new FormData;a.append("image",o);try{await C.post(route("tenant.magic.store",{tenant:s.slug,token:h}),a,{headers:{"Content-Type":"multipart/form-data"}}),j(!0),x.success("¡Comprobante enviado exitosamente!")}catch(t){console.error(t),x.error("Error al subir el comprobante. Intenta nuevamente.")}finally{d(!1)}};return b?e.jsxs("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:[e.jsx(m,{title:"Comprobante Enviado"}),e.jsx(p,{className:"w-full max-w-sm text-center border-none shadow-lg",children:e.jsxs(f,{className:"pt-10 pb-10 space-y-4",children:[e.jsx("div",{className:"mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"w-10 h-10 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"¡Recibido!"}),e.jsxs("p",{className:"text-slate-600",children:["Tu comprobante ha sido enviado a la caja.",e.jsx("br",{}),"Ya puedes cerrar esta ventana."]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4",children:[e.jsx(m,{title:`Cargar Comprobante - ${s.name}`}),e.jsxs("div",{className:"mb-6 text-center",children:[s.logo_url&&e.jsx("img",{src:s.logo_url,alt:s.name,className:"h-12 w-auto mx-auto mb-2 object-contain"}),e.jsx("h1",{className:"text-lg font-bold text-slate-900",children:s.name})]}),e.jsxs(p,{className:"w-full max-w-sm border-none shadow-lg overflow-hidden",children:[e.jsxs(v,{className:"bg-white border-b pb-4",children:[e.jsx(w,{className:"text-center text-xl",children:"Adjuntar Comprobante"}),e.jsx(y,{className:"text-center",children:"Toma una foto o selecciona el pantallazo de tu transferencia."})]}),e.jsxs(f,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl bg-slate-50 min-h-[250px] flex flex-col items-center justify-center cursor-pointer hover:bg-slate-100 transition-colors relative overflow-hidden",onClick:()=>document.getElementById("file-upload")?.click(),children:[l?e.jsx("img",{src:l,alt:"Preview",className:"w-full h-full object-contain absolute inset-0"}):e.jsxs("div",{className:"text-center p-6 space-y-2",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 mb-2",children:e.jsx(P,{className:"w-6 h-6"})}),e.jsx("p",{className:"font-medium text-slate-800",children:"Tocar para subir foto"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Soporta JPG, PNG, WebP (Max 10MB)"})]}),e.jsx("input",{id:"file-upload",type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:g})]}),l&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(u,{variant:"outline",className:"w-full",onClick:()=>{i(null),c(null)},disabled:n,children:"Cambiar"}),e.jsx(u,{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold",onClick:N,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4 mr-2 animate-spin"}),"Enviando..."]}):"Confirmar Envío"})]})]})]}),e.jsx("p",{className:"mt-8 text-xs text-slate-400",children:"Powered by Linkiu POS"})]})}export{M as default};
