import{c as D,r as j,j as e,H as E,L as n,a as u}from"./app-D9wldZxo.js";import{S}from"./SuperAdminLayout-CPtcwFpO.js";import{B as l}from"./button-Dadb_Lep.js";import{C as k,a as A,b as T,c as B,d as H}from"./card-DbFVjWqh.js";import{T as _,a as L,b as m,c as a,d as z,e as r}from"./table-B6cmMBvL.js";import{B as o}from"./badge-DyYF213F.js";import{I}from"./input-rMsYcH4C.js";import{E as M,a as O,b as F,c as G,d as R}from"./empty-SlYDCCGq.js";import{A as V,h as q,a as J,b as K,c as Q,d as U,e as W,f as X,g as Y}from"./alert-dialog-BL6dXcRY.js";import{S as Z}from"./Pagination-3BS96hmy.js";import{P as $}from"./dropdown-menu-C4-9o8Rw.js";import{S as ee}from"./search-lqHHsKRN.js";import{P as f}from"./plus-evWAfx61.js";import{E as se}from"./eye-C5KGdmx8.js";import{P as re}from"./pencil-BtBbIayn.js";import{T as ae}from"./trash-2-CMPgRqgc.js";import"./echo-CmTENghG.js";import"./chevron-right-BSwXEIvG.js";import"./createLucideIcon-CJjlOp5I.js";import"./chevrons-up-down-Cepco8Sn.js";import"./badge-check-CEpGdEtW.js";import"./ApplicationLogo-DuPOXIDR.js";import"./users-OjDIvTV8.js";import"./layout-grid-DMUl8Ye2.js";import"./utils-B0KHI9vB.js";import"./index-BDWpq_YI.js";import"./index-BrcTw33p.js";import"./index-BMdzuiHN.js";import"./index-tfOuMV4B.js";import"./ellipsis-BfbyL5_C.js";import"./chevron-left-BFxUkP0a.js";import"./circle-check-CN90YBLh.js";import"./check-BAxbGpAF.js";import"./credit-card-CPDlDYf1.js";import"./shopping-bag-CQGcPT0-.js";import"./dialog-C0Lg02Tk.js";import"./x-dvUxMxq3.js";import"./separator-L5pP8n2q.js";import"./index-CZBSMaku.js";import"./sheet-BP6KOnln.js";import"./index-CbR7iZJO.js";import"./index-DeHGgcwY.js";import"./index-CXzOyCXW.js";import"./index-DdTS5Ad2.js";import"./index-fFU5c_p6.js";import"./index-Dvu8qGWr.js";import"./index-D4lOZYra.js";function Ye({plans:c}){const{auth:g}=D().props,h=g.permissions||[],i=s=>h.includes("*")||h.includes(s),[N,t]=j.useState(!1),d=c.data||c,y=c.links||[],[x,C]=j.useState(""),b=s=>{s.preventDefault(),u.get(route("plans.index"),{search:x},{preserveState:!0,replace:!0})},v=s=>{if(!i("sa.plans.delete")){t(!0);return}u.delete(route("plans.destroy",s),{onSuccess:()=>{}})},p=s=>{i("sa.plans.create")||(s.preventDefault(),t(!0))},P=s=>{i("sa.plans.update")||(s.preventDefault(),t(!0))};return e.jsxs(S,{header:"Planes de Suscripción",children:[e.jsx($,{open:N,onOpenChange:t}),e.jsx(E,{title:"Planes"}),e.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Planes y Precios"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona la oferta comercial por verticales y monedas."})]}),e.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[e.jsxs("form",{onSubmit:b,className:"relative w-full sm:w-80",children:[e.jsx(ee,{className:"absolute left-3 top-2 h-4 w-4 text-gray-400"}),e.jsx(I,{placeholder:"Buscar planes...",value:x,onChange:s=>C(s.target.value),className:"pl-9"})]}),e.jsx(l,{asChild:!0,children:e.jsxs(n,{href:route("plans.create"),onClick:p,children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"Crear Nuevo Plan"]})})]})]}),e.jsxs(k,{children:[e.jsxs(A,{children:[e.jsx(T,{children:"Listado de Planes"}),e.jsxs(B,{children:["Mostrando ",d.length," planes registrados."]})]}),e.jsxs(H,{children:[e.jsxs(_,{children:[e.jsx(L,{children:e.jsxs(m,{children:[e.jsx(a,{children:"Nombre"}),e.jsx(a,{children:"Vertical"}),e.jsx(a,{children:"Precio Base"}),e.jsx(a,{children:"Prueba"}),e.jsx(a,{children:"Estado"}),e.jsx(a,{className:"text-right",children:"Acciones"})]})}),e.jsxs(z,{children:[d.map(s=>e.jsxs(m,{children:[e.jsx(r,{className:"font-medium",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:s.name}),s.is_featured&&e.jsx("span",{className:"text-[10px] text-yellow-600 font-bold uppercase tracking-wider",children:"Destacado"})]})}),e.jsx(r,{children:e.jsx(o,{variant:"outline",children:s.vertical?.name||"General"})}),e.jsxs(r,{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat("es-CO",{style:"currency",currency:s.currency}).format(s.monthly_price)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:" / mes"})]}),e.jsx(r,{children:s.trial_days>0?e.jsxs(o,{variant:"secondary",children:[s.trial_days," días"]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),e.jsx(r,{children:e.jsx("div",{className:"flex items-center gap-2",children:s.is_public?e.jsx(o,{className:"bg-green-500 hover:bg-green-600",children:"Público"}):e.jsx(o,{variant:"secondary",children:"Oculto"})})}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(n,{href:route("plans.show",s.id),children:e.jsx(se,{className:"h-4 w-4 text-gray-500"})})}),e.jsx(l,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(n,{href:route("plans.edit",s.id),onClick:P,children:e.jsx(re,{className:"h-4 w-4 text-blue-600"})})}),e.jsxs(V,{children:[e.jsx(q,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",onClick:w=>{i("sa.plans.delete")||(w.preventDefault(),t(!0))},children:e.jsx(ae,{className:"h-4 w-4 text-red-500"})})}),i("sa.plans.delete")&&e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(Q,{children:"¿Eliminar este plan?"}),e.jsx(U,{children:"Esta acción no se puede deshacer. El plan dejará de estar disponible para nuevas suscripciones."})]}),e.jsxs(W,{children:[e.jsx(X,{children:"Cancelar"}),e.jsx(Y,{onClick:()=>v(s.id),className:"bg-red-600 hover:bg-red-700",children:"Eliminar"})]})]})]})]})})]},s.id)),d.length===0&&e.jsx(m,{children:e.jsx(r,{colSpan:6,className:"h-[400px]",children:e.jsxs(M,{className:"h-full",children:[e.jsx(O,{children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-full mb-4",children:e.jsx(f,{className:"h-8 w-8 text-gray-400"})})}),e.jsxs(F,{children:[e.jsx(G,{children:"No hay planes"}),e.jsx(R,{children:"Comienza creando tu primer plan de suscripción para las tiendas."})]}),e.jsx("div",{className:"mt-6",children:e.jsx(l,{asChild:!0,onClick:p,children:e.jsx(n,{href:route("plans.create"),children:"Crear Primer Plan"})})})]})})})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(Z,{links:y})})]})]})]})]})}export{Ye as default};
