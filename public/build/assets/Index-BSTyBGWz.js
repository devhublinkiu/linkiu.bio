import{c as D,r as d,j as e,H as T,L as m,a as A}from"./app-BWZ_nHt1.js";import{S as C}from"./SuperAdminLayout-Co4xClb9.js";import{P as y,T as S,O as P,Q as R,R as w}from"./dropdown-menu-BGaiVCet.js";import{B as t}from"./button-Zm_FOSge.js";import{T as k,a as E,b as p,c as i,d as H,e as a}from"./table-CtgZM28n.js";import{A as O,a as _,b as G,c as z,d as B,e as L,f as M,g as F}from"./alert-dialog-CfLaEbmj.js";import{P as I}from"./plus-BX107HBT.js";import{S as Q}from"./shield-CchamuUB.js";import{P as U}from"./pencil-w5uHXMHD.js";import{T as x}from"./trash-2-bA_uJBZi.js";import"./chevron-right-_55ej7ZQ.js";import"./createLucideIcon-DsHLbH4u.js";import"./chevrons-up-down-BWehE4NK.js";import"./badge-check-smr4Gzab.js";import"./ApplicationLogo-BAQzSBsF.js";import"./users-CrNYFBXW.js";import"./layout-grid-Doks1yyB.js";import"./utils-Vt5GpmJK.js";import"./index-DuSKGNGS.js";import"./index-D0LUdmaD.js";import"./index-B5MO-qFS.js";import"./index-C7sgVbPo.js";import"./circle-check-sQ4QhFFV.js";import"./check-DJuaI-ps.js";import"./credit-card-DAsMxP4w.js";import"./shopping-bag-BBv1wZ7q.js";import"./dialog-5zjqAkxW.js";import"./x-Bj9BVCWR.js";import"./input-DV8OdLmB.js";import"./separator-BzGk3VOl.js";import"./index-Bn4exDLh.js";import"./sheet-EfXDWqjX.js";import"./index-CJAdGrJl.js";import"./index-l3LWksYO.js";import"./index-4bmCwMJV.js";import"./index-BqHU8kdB.js";import"./index-CXJmo4iv.js";import"./index-DUhcubli.js";import"./index-DplrVXlQ.js";function we({roles:u}){const{auth:h}=D().props,c=h.permissions||[],o=s=>c.includes("*")||c.includes(s),[j,r]=d.useState(!1),[g,l]=d.useState(!1),[n,f]=d.useState(null),b=s=>{if(!o("sa.roles.delete")){r(!0);return}f(s),l(!0)},N=()=>{n&&A.delete(route("roles.destroy",n.id),{onSuccess:()=>l(!1)})};return e.jsxs(C,{header:"Gestión de Roles Globales",children:[e.jsx(y,{open:j,onOpenChange:r}),e.jsx(T,{title:"Roles Globales"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Roles del Sistema"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Define los roles y permisos globales para los administradores."})]}),e.jsx(t,{asChild:!0,className:"cursor-pointer",children:e.jsxs(m,{href:route("roles.create"),onClick:s=>{o("sa.roles.create")||(s.preventDefault(),r(!0))},children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Crear Nuevo Rol"]})})]}),e.jsx("div",{className:"bg-card rounded-md border border-border",children:e.jsxs(k,{children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(i,{children:"Nombre del Rol"}),e.jsx(i,{children:"Usuarios Asignados"}),e.jsx(i,{children:"Guard"}),e.jsx(i,{className:"text-right",children:"Acciones"})]})}),e.jsx(H,{children:u.data.map(s=>e.jsxs(p,{children:[e.jsx(a,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-primary"}),s.name,s.name==="Super Admin"&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-2 py-0.5 text-[10px] font-bold text-primary border border-primary/20 uppercase",children:"Sistema"})]})}),e.jsx(a,{children:e.jsxs("span",{className:"inline-flex items-center rounded-full bg-muted px-2.5 py-0.5 text-xs font-medium text-muted-foreground ring-1 ring-inset ring-border",children:[s.users_count," usuarios"]})}),e.jsx(a,{className:"text-muted-foreground text-xs",children:s.guard_name}),e.jsx(a,{className:"text-right space-x-2",children:s.name!=="Super Admin"&&e.jsxs(e.Fragment,{children:[e.jsx(t,{variant:"ghost",size:"icon",asChild:!0,className:"cursor-pointer",children:e.jsx(m,{href:route("roles.edit",s.id),onClick:v=>{o("sa.roles.update")||(v.preventDefault(),r(!0))},children:e.jsx(U,{className:"h-4 w-4 text-gray-500"})})}),s.users_count>0?e.jsx(S,{children:e.jsxs(P,{children:[e.jsx(R,{asChild:!0,children:e.jsx("span",{tabIndex:0,children:e.jsx(t,{variant:"ghost",size:"icon",className:"text-gray-300 cursor-not-allowed",disabled:!0,children:e.jsx(x,{className:"h-4 w-4"})})})}),e.jsx(w,{children:e.jsx("p",{children:"No se puede eliminar: tiene usuarios asignados"})})]})}):e.jsx(t,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10 cursor-pointer",onClick:()=>b(s),children:e.jsx(x,{className:"h-4 w-4"})})]})})]},s.id))})]})}),e.jsx(O,{open:g,onOpenChange:l,children:e.jsxs(_,{children:[e.jsxs(G,{children:[e.jsx(z,{children:"¿Eliminar este rol?"}),e.jsxs(B,{children:["Estás a punto de eliminar el rol ",e.jsx("strong",{children:n?.name}),". Esta acción no se puede deshacer."]})]}),e.jsxs(L,{children:[e.jsx(M,{className:"cursor-pointer",children:"Cancelar"}),e.jsx(F,{onClick:N,className:"bg-red-600 hover:bg-red-700 cursor-pointer",children:"Eliminar Rol"})]})]})})]})}export{we as default};
