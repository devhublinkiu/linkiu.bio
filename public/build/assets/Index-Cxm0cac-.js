import{r as u,j as e,H as D,a as j,t as b}from"./app-DvpAkplk.js";import{A}from"./AdminLayout-hY3b0G1y.js";import{B as g}from"./button-DOQ0axlO.js";import{T as P,a as y,b as c,c as t,d as C,e as i}from"./table-U0RLv7Tr.js";import{P as T,D as S,i as E,l as R,m as M,p as f}from"./dropdown-menu-ubFSrLA8.js";import{B as d}from"./badge-IfxeRtOE.js";import{A as k,a as B,b as H,c as _,d as q,e as z,f as F,g as I}from"./alert-dialog-BSAqmKQ6.js";import{P as L}from"./plus-CtD-lmm0.js";import{S as O}from"./shield-BW7u8GoI.js";import{E as G}from"./ellipsis-TzpxLlOx.js";import{S as J}from"./square-pen-CeXv8eOc.js";import{T as K}from"./trash-2-Cl32KA5j.js";import"./utils-Bt66apXy.js";import"./card-CnT0l_PA.js";import"./progress-BHe2VIPc.js";import"./index-CVnMJ0kl.js";import"./index-CnuaM2Cu.js";import"./menuConfig-CS7C2xYF.js";import"./video-Diu1usog.js";import"./createLucideIcon-BAweqaF3.js";import"./chef-hat-4WRp0NMl.js";import"./table-9Iw8O0xw.js";import"./user-CXZ9uqcX.js";import"./map-pin-BY9e0G3n.js";import"./banknote-CNQnpK3Q.js";import"./star-Cq7jFrzE.js";import"./users-BDTVDblz.js";import"./calendar-check-rPKpguYk.js";import"./calendar-mikciA0V.js";import"./briefcase-5b91nXrO.js";import"./truck-SA0a2FWD.js";import"./message-circle-4blwuSBk.js";import"./credit-card-fEKVAskI.js";import"./package-D7hy5e4b.js";import"./shopping-bag-DhB74yIJ.js";import"./layout-dashboard-Cf5aFky8.js";import"./badge-check-BhvL5u0B.js";import"./lock-DHVVRGwf.js";import"./chevron-right-wq5EBuGT.js";import"./sparkles-DyQnos2U.js";import"./separator-BG2VS_Fl.js";import"./external-link-DZTE9j3y.js";import"./chevron-down-tlhr8VnY.js";import"./headphones-Bg1cPLTV.js";import"./sonner-DgVci-2A.js";import"./index-Bw9aTihY.js";import"./index-D8KCWmzE.js";import"./index-DxV-pwI8.js";import"./index-DvNjLHaW.js";import"./circle-check-DihymiLa.js";import"./check-BnQaAa8B.js";import"./dialog-Cjxgu9dZ.js";import"./x-C_qF6Mva.js";import"./input-Bv-dfyAA.js";import"./sheet-DsGG5XCT.js";import"./index-2KDpKUG2.js";import"./index-DAaNBk-s.js";import"./index-DGLOWnr1.js";import"./index-ahKcmWZ5.js";import"./index-Dcod572x.js";import"./index-CD1tTlGF.js";function es({auth:Q,roles:p,currentUserRole:o,currentTenant:a}){const[N,n]=u.useState(!1),[l,m]=u.useState(null),h=s=>o?o.is_owner||o.permissions.includes("*")||o.permissions.includes(s):!1,x=(s,r,w)=>{s.preventDefault(),h(r)?j.visit(w):n(!0)},v=(s,r)=>{h(s)?j.delete(r,{onSuccess:()=>b.success("Rol eliminado con éxito")}):n(!0)};return e.jsxs(A,{title:"Roles y Permisos",children:[e.jsx(D,{title:"Roles y Permisos"}),e.jsx(T,{open:N,onOpenChange:n}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Roles y Permisos"}),e.jsx("p",{className:"text-slate-500",children:"Administra los roles y niveles de acceso de tu equipo."})]}),e.jsxs(g,{className:"cursor-pointer",onClick:s=>x(s,"roles.create",route("tenant.roles.create",{tenant:a?.slug})),children:[e.jsx(L,{}),"Crear Nuevo Rol"]})]}),e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white overflow-hidden shadow-sm",children:e.jsxs(P,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(t,{className:"w-[300px]",children:"Nombre del Rol"}),e.jsx(t,{children:"Permisos Asignados"}),e.jsx(t,{children:"Tipo"}),e.jsx(t,{className:"text-right",children:"Acciones"})]})}),e.jsxs(C,{children:[p.map(s=>e.jsxs(c,{children:[e.jsx(i,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),s.name]})}),e.jsx(i,{children:e.jsxs(d,{variant:"secondary",className:"font-mono",children:[s.permissions_count," permisos"]})}),e.jsx(i,{children:s.is_system?e.jsx(d,{variant:"secondary",children:"Sistema"}):e.jsx(d,{variant:"outline",children:"Personalizado"})}),e.jsx(i,{className:"text-right",children:e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Abrir menú"})]})}),e.jsxs(R,{align:"end",children:[e.jsx(M,{children:"Acciones"}),e.jsxs(f,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onClick:r=>x(r,"roles.update",route("tenant.roles.edit",{tenant:a?.slug,role:s.id})),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Editar Permisos"]}),!s.is_system&&e.jsx(e.Fragment,{children:e.jsxs(f,{variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onSelect:()=>m(s),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Eliminar Rol"]})})]})]})})]},s.id)),p.length===0&&e.jsx(c,{children:e.jsx(i,{colSpan:4,className:"h-24 text-center text-slate-500",children:"No hay roles creados."})})]})]})})]}),e.jsx(k,{open:!!l,onOpenChange:s=>!s&&m(null),children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(_,{children:"¿Eliminar Rol?"}),e.jsxs(q,{children:["¿Estás seguro de que deseas eliminar el rol ",e.jsx("span",{className:"font-bold",children:l?.name}),"? Esta acción no se puede deshacer."]})]}),e.jsxs(z,{children:[e.jsx(F,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Cancelar"}),e.jsx(I,{onClick:()=>{v("roles.delete",route("tenant.roles.destroy",{tenant:a?.slug,role:l?.id})),m(null)},variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Eliminar"})]})]})})]})}export{es as default};
