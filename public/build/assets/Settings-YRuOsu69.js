import{c as N,r as v,u as y,j as e,H as w,t as l}from"./app-Bo0l-nyL.js";import{A}from"./AdminLayout-C6Sg4Zll.js";import{B as m}from"./button-10Bc0E3d.js";import{I as C}from"./input-BQLGMA-c.js";import{L as z}from"./label-BvJxTSA7.js";import{C as _,a as S,b as P,c as D,d as E,e as M}from"./card-CLdEHqC0.js";import{A as k,b as L,a as B}from"./alert-C5scqmow.js";import{B as c}from"./badge-T_0PRSRY.js";import{P as I}from"./dropdown-menu-BLdek0j6.js";import{M as R}from"./message-circle-DoLMoG-m.js";import{S as p}from"./shield-check-C8RmYxKr.js";import{S as W}from"./shield-alert-363jSRgb.js";import{C as d}from"./circle-alert-BtaHG5e1.js";import{S as q}from"./smartphone-pb-6aARX.js";import{L as H}from"./loader-circle-PUm0Wiqp.js";import{S as T}from"./save-BcfYaDfb.js";import"./utils-DvD3N-9F.js";import"./progress-D0S33OG3.js";import"./index-DlxfeT00.js";import"./index-CS0_ycFC.js";import"./menuConfig-BOuu1B4n.js";import"./video-BGNY4j_B.js";import"./createLucideIcon-3AckdKRt.js";import"./chef-hat-CDDba4XX.js";import"./table-BLeiRYc-.js";import"./user-acg25hwS.js";import"./map-pin-D3kvadl2.js";import"./banknote-DJcUNiBm.js";import"./star-CdjPFmgy.js";import"./users-Cl7FA0jJ.js";import"./calendar-check-DPCeCTk6.js";import"./calendar-D4jj149y.js";import"./briefcase-BYvTdAUi.js";import"./truck-NgeJ0yFz.js";import"./credit-card-C_0EBMTX.js";import"./package-BgNM9KIq.js";import"./shopping-bag-ovPa-jWO.js";import"./layout-dashboard-Cko18NrJ.js";import"./badge-check-DcDsd9yF.js";import"./lock-C0idjUkm.js";import"./chevron-right-B4UhmXxg.js";import"./sparkles-vlQ-BtbS.js";import"./separator-rnPeP9N4.js";import"./external-link-Y_4JyQ6V.js";import"./chevron-down-CPoZLJYe.js";import"./headphones-CjhisdwC.js";import"./shield-BGp86V--.js";import"./sonner-CzapNevX.js";import"./index-Bj75TZ4c.js";import"./index-nKjDUAgZ.js";import"./index-CXl70Eho.js";import"./index-BaTs_s0z.js";import"./circle-check-D-62-mjA.js";import"./trash-2-CGD0dP--.js";import"./check-BxakoWLx.js";import"./dialog-NO27f9rI.js";import"./x-0PRwyTAe.js";import"./sheet-Bz3Lea4F.js";import"./index-UkxbaV1a.js";import"./index-Ce-cpEu5.js";import"./index-DU1na7Ze.js";import"./index-DY8QIQU5.js";import"./index-BrTki0md.js";import"./index-Q_gv5oQO.js";function Ye({settings:x,hasFeature:a,tenant:i}){const{currentUserRole:r}=N().props,[u,o]=v.useState(!1),{data:h,setData:f,patch:g,processing:n,errors:t}=y({whatsapp_admin_phone:x.whatsapp_admin_phone||""}),j=s=>r?r.is_owner?!0:r.permissions.includes("*")||r.permissions.includes(s):!1,b=s=>{if(s.preventDefault(),!j("whatsapp.update")){o(!0);return}g(route("tenant.whatsapp.update",{tenant:i.slug}),{onSuccess:()=>l.success("Configuración guardada correctamente"),onError:()=>l.error("Error al guardar la configuración")})};return e.jsxs(A,{title:"Notificaciones WhatsApp",children:[e.jsx(w,{title:"Notificaciones WhatsApp - Linkiu.Bio"}),e.jsx(I,{open:u,onOpenChange:o}),e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 flex items-center gap-2",children:[e.jsx(R,{className:"size-8 text-primary"}),"Notificaciones WhatsApp"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configura cómo recibes las alertas de tu negocio."})]}),e.jsx("div",{className:"flex items-center gap-2",children:a?e.jsxs(c,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200 px-3 py-1 flex items-center gap-1.5",children:[e.jsx(p,{className:"size-4"}),"Módulo Activo"]}):e.jsxs(c,{variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50 px-3 py-1 flex items-center gap-1.5",children:[e.jsx(W,{className:"size-4"}),"Requiere Plan Pro"]})})]}),!a&&e.jsxs(k,{className:"mb-6 bg-amber-50 border-amber-200 text-amber-900",children:[e.jsx(d,{className:"size-4 text-amber-600"}),e.jsx(L,{className:"font-bold",children:"Módulo no incluido en tu plan"}),e.jsx(B,{className:"text-amber-800/80",children:"Tu plan actual no incluye notificaciones automáticas por WhatsApp. Para activar esta función y que tus clientes reciban sus reservas y pedidos, debes mejorar tu plan."}),e.jsx("div",{className:"mt-4",children:e.jsx(m,{variant:"outline",className:"border-amber-300 text-amber-800 hover:bg-amber-100",asChild:!0,children:e.jsx("a",{href:route("tenant.subscription.index",{tenant:i.slug}),children:"Ver Planes Disponibles"})})})]}),e.jsx("form",{onSubmit:b,className:"space-y-6",children:e.jsxs(_,{className:"border-0 shadow-lg shadow-black/5 bg-white overflow-hidden",children:[e.jsxs(S,{className:"pb-4 border-b border-gray-50 bg-gray-50/30",children:[e.jsxs(P,{className:"text-xl flex items-center gap-2 font-bold",children:[e.jsx(q,{className:"size-5 text-primary"}),"Alertas para el Administrador"]}),e.jsx(D,{className:"text-gray-500 font-medium",children:"Este número recibirá notificaciones cada vez que entre un nuevo pedido o una nueva reserva."})]}),e.jsxs(E,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(z,{htmlFor:"phone",className:"text-gray-700 font-bold",children:"Número de WhatsApp Administrativo"}),e.jsx(C,{id:"phone",value:h.whatsapp_admin_phone,onChange:s=>f("whatsapp_admin_phone",s.target.value),placeholder:"Ej: +573102223344",className:`h-12 text-lg px-4 border-gray-200 focus:ring-primary/20 ${t.whatsapp_admin_phone?"border-destructive ring-destructive/20":""}`}),t.whatsapp_admin_phone&&e.jsxs("p",{className:"text-xs font-bold text-destructive mt-1 flex items-center gap-1",children:[e.jsx(d,{className:"size-3"}),t.whatsapp_admin_phone]}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5 pt-1",children:[e.jsx("span",{className:"inline-block size-1.5 rounded-full bg-blue-500"}),"Usa el formato internacional (ej: +57310...)."]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-100",children:[e.jsxs("h4",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-slate-800",children:[e.jsx(p,{className:"size-4 text-green-600"}),"¿Qué notificaciones se enviarán?"]}),e.jsxs("ul",{className:"space-y-2.5",children:[e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Nuevas Reservas:"})," Al número configurado arriba."]})]}),e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Confirmación:"})," Al número que el cliente registre."]})]}),e.jsxs("li",{className:"flex items-start gap-3 text-xs text-slate-600",children:[e.jsx("div",{className:"size-2 rounded-full bg-primary/20 mt-1 flex items-center justify-center",children:e.jsx("div",{className:"size-1 rounded-full bg-primary"})}),e.jsxs("span",{children:[e.jsx("strong",{children:"Recordatorios:"})," Enviados automáticamente 1 hora antes."]})]})]})]})]}),e.jsxs(M,{className:"bg-slate-50/50 border-t border-slate-100 p-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-[11px] text-gray-500 font-medium text-center sm:text-left",children:["Integrado con ",e.jsx("strong",{children:"Infobip Direct API"})," para máxima velocidad."]}),e.jsxs(m,{type:"submit",disabled:n,className:"w-full sm:w-auto px-10 font-bold shadow-md shadow-primary/10 transition-all hover:scale-[1.02] active:scale-[0.98] cursor-pointer",children:[n?e.jsx(H,{className:"mr-2 size-4 animate-spin"}):e.jsx(T,{className:"mr-2 size-4"}),"Guardar Configuración"]})]})]})})]})]})}export{Ye as default};
