import{r as N,j as e,H as C,L as l,a as v}from"./app-DC0VdX9s.js";import{A as w}from"./AdminLayout-Dzjitp-M.js";import{B as i}from"./button-CwaftRC9.js";import{I as y}from"./input-DycfGEDM.js";import{T as A,a as D,b as j,c as a,d as T,e as t}from"./table-D7wH3Ebt.js";import{B as M}from"./badge-DFjV9KOO.js";import{D as S,i as E,l as F,m as _,p as b,n as B}from"./dropdown-menu-DQ3ZhwFW.js";import{A as H,a as L,b as I,c as P,d as q,e as R,f as k,g as z}from"./alert-dialog-aPMYaqyp.js";import{C as n,a as c,b as g,d}from"./card-Ctcbb2M4.js";import{P as O}from"./plus-B0JvlXZt.js";import{S as $}from"./search-Lvq2PmNZ.js";import{F as G}from"./funnel-CHa8SDPF.js";import{E as U}from"./ellipsis-DEr1fPYG.js";import{E as V}from"./external-link-B-C3sQPA.js";import{M as J}from"./message-square-DWMlVUIu.js";import"./utils-DBZkxVr1.js";import"./progress-CWUpZELJ.js";import"./index-DFaq0Ini.js";import"./index-BmeUzyeu.js";import"./menuConfig-CKxoUB1h.js";import"./video-MJZj3Bpt.js";import"./createLucideIcon-DJ4NDwYV.js";import"./chef-hat-BD-YlOcT.js";import"./table-CXHlPgh7.js";import"./user-CvUPnKZS.js";import"./map-pin-N8LTMDOp.js";import"./banknote-oh6wB0_E.js";import"./star-Ccup-E-P.js";import"./users-Cgy2ffiO.js";import"./calendar-check-D7EtMSGq.js";import"./calendar-BN8FUoZ8.js";import"./briefcase-D8fTsXA3.js";import"./truck-88x5atPF.js";import"./message-circle-dn3KuYwe.js";import"./credit-card-Br8ESLwS.js";import"./package-BYrkzaAT.js";import"./shopping-bag-C6Zaioqk.js";import"./layout-dashboard-CvWgsk9y.js";import"./badge-check-BS0cRFCH.js";import"./lock-DkNijD7J.js";import"./chevron-right-PTgBRbQi.js";import"./sparkles-DvAZDr9v.js";import"./separator-BvfwgiHl.js";import"./chevron-down-DoRy1-En.js";import"./headphones-FLe6YHx9.js";import"./shield-BUqaht8L.js";import"./sonner-CJs5tr0z.js";import"./index-0coVNd7N.js";import"./index-CzsG3l2v.js";import"./index-DnYW8pH5.js";import"./index-D2N1-uIE.js";import"./circle-check-C5cvU04D.js";import"./trash-2-BoAeUuPT.js";import"./check-CDE1QUCE.js";import"./dialog-BgrajDqf.js";import"./x-B_AiqYVR.js";import"./sheet-DMF7JpR0.js";import"./index-CfjIlq6E.js";import"./index-DdpLosxE.js";import"./index-B8PFW4lY.js";import"./index-BfEwHv9F.js";import"./index-CSYYB_ev.js";import"./index-rHpqUtkR.js";const m={open:{label:"Abierto",color:"bg-blue-100 text-blue-700"},in_progress:{label:"En progreso",color:"bg-amber-100 text-amber-700"},awaiting_response:{label:"Esperando respuesta",color:"bg-purple-100 text-purple-700"},resolved:{label:"Resuelto",color:"bg-emerald-100 text-emerald-700"},closed:{label:"Cerrado",color:"bg-slate-100 text-slate-700"}},p={low:{label:"Baja",color:"bg-slate-100 text-slate-700"},medium:{label:"Media",color:"bg-blue-100 text-blue-700"},high:{label:"Alta",color:"bg-orange-100 text-orange-700"},urgent:{label:"Urgente",color:"bg-red-100 text-red-700"}},K={technical:"Problema Técnico",billing:"Facturación",account:"Mi Cuenta",feature_request:"Solicitud de Funcionalidad",other:"Otros"},Q=o=>{try{const r=new Date(o);return isNaN(r.getTime())?"Fecha no disponible":r.toLocaleString()}catch{return"Fecha no disponible"}};function os({tickets:o,currentTenant:r,stats:x}){const[u,h]=N.useState(null),f=()=>{u&&v.post(route("tenant.support.close",{tenant:r.slug,support:u}),{},{onSuccess:()=>h(null)})};return e.jsxs(w,{title:"Soporte y Ayuda",breadcrumbs:[{label:"Soporte y Ayuda"}],children:[e.jsx(C,{title:"Soporte Técnico"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Tus tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona tus consultas y solicitudes de soporte."})]}),e.jsx(i,{asChild:!0,className:"gap-2",children:e.jsxs(l,{href:route("tenant.support.create",{tenant:r.slug}),className:"cursor-pointer",children:[e.jsx(O,{className:"h-4 w-4"})," Nuevo Ticket"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Resueltos"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:x.resolved})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Pendientes"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:x.pending})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Total"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.total})})]})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx($,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(y,{type:"search",placeholder:"Buscar tickets...",className:"pl-8"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(i,{variant:"outline",size:"sm",className:"gap-2 cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"})," Filtros"]})})]})}),e.jsx(d,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(A,{children:[e.jsx(D,{children:e.jsxs(j,{children:[e.jsx(a,{className:"w-[100px]",children:"ID"}),e.jsx(a,{children:"Asunto"}),e.jsx(a,{children:"Estado"}),e.jsx(a,{children:"Prioridad"}),e.jsx(a,{children:"Última respuesta"}),e.jsx(a,{className:"text-right",children:"Acciones"})]})}),e.jsx(T,{children:o.data.length>0?o.data.map(s=>e.jsxs(j,{children:[e.jsx(t,{className:"font-mono text-xs font-bold text-blue-600 truncate max-w-[120px]",children:s.reference_id||`#${s.id}`}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(l,{href:route("tenant.support.show",{tenant:r.slug,support:s.id}),className:"font-semibold hover:underline decoration-primary cursor-pointer",children:s.subject}),e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-tight",children:K[s.category]||s.category})]})}),e.jsx(t,{children:e.jsx(M,{className:(m?.[s.status]||m?.open||{color:"bg-blue-100"}).color,variant:"secondary",children:(m?.[s.status]||m?.open||{label:"Abierto"}).label})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${(p[s.priority]||p.medium||{color:"bg-slate-400"}).color.split(" ")[0]}`}),e.jsx("span",{className:"text-sm",children:(p?.[s.priority]||p?.medium||{label:"Media"}).label})]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsxs("span",{className:"text-muted-foreground line-clamp-1 italic",children:['"',s.last_reply?.message||"Sin respuestas",'"']}),e.jsx("span",{className:"text-[10px] text-slate-400",children:Q(s.updated_at)})]})}),e.jsx(t,{className:"text-right",children:e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"cursor-pointer",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsxs(F,{align:"end",children:[e.jsx(_,{children:"Acciones"}),e.jsx(b,{asChild:!0,className:"cursor-pointer",children:e.jsxs(l,{href:route("tenant.support.show",{tenant:r.slug,support:s.id}),children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," Ver conversación"]})}),e.jsx(B,{}),e.jsx(b,{className:"text-red-600 cursor-pointer",onClick:()=>h(s.id),children:"Cerrar Ticket"})]})]})})]},s.id)):e.jsx(j,{children:e.jsx(t,{colSpan:6,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(J,{className:"h-8 w-8 text-muted-foreground/50"}),e.jsx("p",{children:"No tienes tickets de soporte registrados."}),e.jsx(i,{variant:"link",asChild:!0,className:"cursor-pointer",children:e.jsx(l,{href:route("tenant.support.create",{tenant:r.slug}),children:"Crea tu primer ticket aquí"})})]})})})})]})})})]})]}),e.jsx(H,{open:!!u,onOpenChange:s=>!s&&h(null),children:e.jsxs(L,{children:[e.jsxs(I,{children:[e.jsx(P,{children:"¿Cerrar este ticket de soporte?"}),e.jsx(q,{children:"Esta acción marcará el ticket como finalizado. No podrás enviar más respuestas a menos que sea reabierto por un administrador."})]}),e.jsxs(R,{children:[e.jsx(k,{className:"cursor-pointer",children:"Cancelar"}),e.jsx(z,{onClick:f,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:"Confirmar y Cerrar"})]})]})})]})}export{os as default};
