import{r as u,j as e,H as D,a as j,t as b}from"./app-arqQV-bc.js";import{A}from"./AdminLayout-DCtk7OxF.js";import{B as g}from"./button-Bd640uTA.js";import{T as P,a as y,b as c,c as t,d as C,e as i}from"./table-BF9Ri8Ro.js";import{P as T,D as S,i as E,l as R,m as M,p as f}from"./dropdown-menu-mNq1McYa.js";import{B as d}from"./badge-t3wrEXXG.js";import{A as k,a as B,b as H,c as _,d as q,e as z,f as F,g as I}from"./alert-dialog-Bm-s-qWR.js";import{P as L}from"./plus-BcxWVO6n.js";import{S as O}from"./shield-BQB1r0z5.js";import{E as G}from"./ellipsis-DmatcEia.js";import{S as J}from"./square-pen-jABg8ITC.js";import{T as K}from"./trash-2-D8UpIHBH.js";import"./utils-BegMJZHH.js";import"./card-BQPJWSk4.js";import"./progress-BWnj_no5.js";import"./index-CVnnicxK.js";import"./index-C-vN8jX4.js";import"./menuConfig-C-Q0avcz.js";import"./video-B-ftvkxj.js";import"./createLucideIcon-kbomgvBs.js";import"./chef-hat-q1zMrLCc.js";import"./table-Bk0hf6m9.js";import"./user-KA4Ja2_R.js";import"./map-pin-D1VGCzYf.js";import"./banknote-byFf_CZb.js";import"./star-qP03KNv_.js";import"./users-DyLj9nwM.js";import"./calendar-check-BUphR3zi.js";import"./calendar-DHlqI9qY.js";import"./briefcase-CG7ArIFZ.js";import"./truck-DCx-3LGs.js";import"./message-circle-DV6RjH4d.js";import"./credit-card-4AdI57T8.js";import"./package-34OeiGxz.js";import"./shopping-bag-TtCDC01g.js";import"./layout-dashboard-DnE9OzLr.js";import"./badge-check-C3DjHgnO.js";import"./lock-Cb_9eXlT.js";import"./chevron-right-CyE8jcbn.js";import"./sparkles-fY3WANvl.js";import"./separator-DpUia1Ar.js";import"./external-link-r8YAPN_c.js";import"./chevron-down-CS-ozzzB.js";import"./headphones-Uo3Em3Q5.js";import"./sonner-SWZRrF5D.js";import"./index-CwhdJaVg.js";import"./index-B_Os2ghw.js";import"./index-CJZqa-kr.js";import"./index-C9GonLHF.js";import"./circle-check-CJmQNw_U.js";import"./check-BZhepUpU.js";import"./dialog-Do7ESPrT.js";import"./x-hBSqTjfa.js";import"./input-CnYabjbM.js";import"./sheet-BJFcoitR.js";import"./index-CfChaKac.js";import"./index-DzhEK4jt.js";import"./index-iS2GCZ5y.js";import"./index-Bz80iYGN.js";import"./index-DiBfayRM.js";import"./index-DDCOIm2e.js";function es({auth:Q,roles:p,currentUserRole:o,currentTenant:a}){const[N,n]=u.useState(!1),[l,m]=u.useState(null),h=s=>o?o.is_owner||o.permissions.includes("*")||o.permissions.includes(s):!1,x=(s,r,w)=>{s.preventDefault(),h(r)?j.visit(w):n(!0)},v=(s,r)=>{h(s)?j.delete(r,{onSuccess:()=>b.success("Rol eliminado con éxito")}):n(!0)};return e.jsxs(A,{title:"Roles y Permisos",children:[e.jsx(D,{title:"Roles y Permisos"}),e.jsx(T,{open:N,onOpenChange:n}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Roles y Permisos"}),e.jsx("p",{className:"text-slate-500",children:"Administra los roles y niveles de acceso de tu equipo."})]}),e.jsxs(g,{className:"cursor-pointer",onClick:s=>x(s,"roles.create",route("tenant.roles.create",{tenant:a?.slug})),children:[e.jsx(L,{}),"Crear Nuevo Rol"]})]}),e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white overflow-hidden shadow-sm",children:e.jsxs(P,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(t,{className:"w-[300px]",children:"Nombre del Rol"}),e.jsx(t,{children:"Permisos Asignados"}),e.jsx(t,{children:"Tipo"}),e.jsx(t,{className:"text-right",children:"Acciones"})]})}),e.jsxs(C,{children:[p.map(s=>e.jsxs(c,{children:[e.jsx(i,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),s.name]})}),e.jsx(i,{children:e.jsxs(d,{variant:"secondary",className:"font-mono",children:[s.permissions_count," permisos"]})}),e.jsx(i,{children:s.is_system?e.jsx(d,{variant:"secondary",children:"Sistema"}):e.jsx(d,{variant:"outline",children:"Personalizado"})}),e.jsx(i,{className:"text-right",children:e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Abrir menú"})]})}),e.jsxs(R,{align:"end",children:[e.jsx(M,{children:"Acciones"}),e.jsxs(f,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onClick:r=>x(r,"roles.update",route("tenant.roles.edit",{tenant:a?.slug,role:s.id})),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Editar Permisos"]}),!s.is_system&&e.jsx(e.Fragment,{children:e.jsxs(f,{variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",onSelect:()=>m(s),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Eliminar Rol"]})})]})]})})]},s.id)),p.length===0&&e.jsx(c,{children:e.jsx(i,{colSpan:4,className:"h-24 text-center text-slate-500",children:"No hay roles creados."})})]})]})})]}),e.jsx(k,{open:!!l,onOpenChange:s=>!s&&m(null),children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(_,{children:"¿Eliminar Rol?"}),e.jsxs(q,{children:["¿Estás seguro de que deseas eliminar el rol ",e.jsx("span",{className:"font-bold",children:l?.name}),"? Esta acción no se puede deshacer."]})]}),e.jsxs(z,{children:[e.jsx(F,{className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Cancelar"}),e.jsx(I,{onClick:()=>{v("roles.delete",route("tenant.roles.destroy",{tenant:a?.slug,role:l?.id})),m(null)},variant:"destructive",className:"cursor-pointer ring-0 hover:ring-0 focus:ring-0",children:"Eliminar"})]})]})})]})}export{es as default};
