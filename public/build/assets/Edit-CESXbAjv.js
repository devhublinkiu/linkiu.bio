import{c as k,u as C,j as e,H as N,L as j}from"./app-D9wldZxo.js";import{A as S}from"./AdminLayout-C86srUOQ.js";import{B as _}from"./button-Dadb_Lep.js";import{I as d}from"./input-rMsYcH4C.js";import{L as s}from"./label-DoqMNi9Z.js";import{S as c,a as m,b as p,c as x,d as n}from"./select-Bbe1RuXu.js";import{F as o}from"./field-C1EtKLDH.js";import{C as L}from"./chevron-left-BFxUkP0a.js";import"./echo-CmTENghG.js";import"./utils-B0KHI9vB.js";import"./badge-DyYF213F.js";import"./card-DbFVjWqh.js";import"./progress-D5NiGDeK.js";import"./index-DdTS5Ad2.js";import"./index-CZBSMaku.js";import"./dropdown-menu-C4-9o8Rw.js";import"./createLucideIcon-CJjlOp5I.js";import"./chevron-right-BSwXEIvG.js";import"./index-BDWpq_YI.js";import"./index-BrcTw33p.js";import"./index-BMdzuiHN.js";import"./index-tfOuMV4B.js";import"./circle-check-CN90YBLh.js";import"./trash-2-CMPgRqgc.js";import"./check-BAxbGpAF.js";import"./credit-card-CPDlDYf1.js";import"./shopping-bag-CQGcPT0-.js";import"./dialog-C0Lg02Tk.js";import"./x-dvUxMxq3.js";import"./separator-L5pP8n2q.js";import"./sheet-BP6KOnln.js";import"./index-CbR7iZJO.js";import"./index-DeHGgcwY.js";import"./index-CXzOyCXW.js";import"./index-fFU5c_p6.js";import"./index-Dvu8qGWr.js";import"./index-D4lOZYra.js";import"./menuConfig-GyORRgsI.js";import"./video-DRtFkuCB.js";import"./chef-hat-D6sEz8YW.js";import"./table-rgWYlWzZ.js";import"./user-D9c6nVY3.js";import"./map-pin-Du3W4-OO.js";import"./banknote-DTNMynPY.js";import"./star-D-Iirb7f.js";import"./users-OjDIvTV8.js";import"./calendar-check-fjlZrFwy.js";import"./calendar-BW0rhnMu.js";import"./briefcase-Crq0rSJT.js";import"./truck-Db-Ebch9.js";import"./message-circle-DrNrCoj8.js";import"./package-BPq1-jLc.js";import"./layout-dashboard-BqLojFjH.js";import"./badge-check-CEpGdEtW.js";import"./lock-BHZn93rL.js";import"./sparkles-JbdQIbjf.js";import"./external-link-pORnC0H4.js";import"./chevron-down-Dux0wLDw.js";import"./headphones-DD_UyCnk.js";import"./shield-BtuNH23d.js";import"./sonner-DQ2kSMfY.js";import"./index-BdQq_4o_.js";import"./index--Jev_GdI.js";import"./chevron-up-IlwuOcq-.js";function we({short:t,locations:g,categories:v,products:y}){const{currentTenant:h}=k().props,{data:i,setData:a,post:f,processing:u,errors:l}=C({_method:"put",location_id:t.location_id.toString(),name:t.name,description:t.description??"",link_type:t.link_type,external_url:t.external_url??"",linkable_type:t.link_type==="external"?"":t.linkable_type??(t.link_type==="product"?"App\\Models\\Product":"App\\Models\\Category"),linkable_id:t.link_type==="external"?"":t.linkable_id?.toString()??"",short_video:null,remove_short:!1,sort_order:t.sort_order.toString(),is_active:t.is_active}),b=r=>{r.preventDefault(),f(route("tenant.shorts.update",[h?.slug,t.id]),{forceFormData:!0})};return e.jsxs(S,{title:`Editar short - ${t.name}`,children:[e.jsx(N,{title:`Editar short - ${t.name}`}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs(j,{href:route("tenant.shorts.index",h?.slug),className:"text-sm font-medium text-muted-foreground hover:text-primary flex items-center gap-1 mb-4",children:[e.jsx(L,{className:"w-4 h-4"})," Volver a Shorts"]}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight mb-6",children:"Editar short"}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"name",children:"Nombre de la promo *"}),e.jsx(d,{id:"name",value:i.name,onChange:r=>a("name",r.target.value),maxLength:255}),e.jsx(o,{children:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{children:"Sede *"}),e.jsxs(c,{value:i.location_id,onValueChange:r=>a("location_id",r),children:[e.jsx(m,{children:e.jsx(p,{placeholder:"Escoge la sede"})}),e.jsx(x,{children:g.map(r=>e.jsx(n,{value:String(r.id),children:r.name},r.id))})]}),e.jsx(o,{children:l.location_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{children:"Enlace *"}),e.jsxs(c,{value:i.link_type,onValueChange:r=>{a("link_type",r),a("linkable_type",r==="category"?"App\\Models\\Category":r==="product"?"App\\Models\\Product":""),a("linkable_id",""),a("external_url","")},children:[e.jsx(m,{children:e.jsx(p,{})}),e.jsxs(x,{children:[e.jsx(n,{value:"category",children:"Categoría"}),e.jsx(n,{value:"product",children:"Producto"}),e.jsx(n,{value:"external",children:"URL externa"})]})]}),e.jsx(o,{children:l.link_type})]}),i.link_type==="category"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{children:"Categoría *"}),e.jsxs(c,{value:i.linkable_id,onValueChange:r=>a("linkable_id",r),children:[e.jsx(m,{children:e.jsx(p,{placeholder:"Selecciona categoría"})}),e.jsx(x,{children:v.map(r=>e.jsx(n,{value:String(r.id),children:r.name},r.id))})]}),e.jsx(o,{children:l.linkable_id})]}),i.link_type==="product"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{children:"Producto *"}),e.jsxs(c,{value:i.linkable_id,onValueChange:r=>a("linkable_id",r),children:[e.jsx(m,{children:e.jsx(p,{placeholder:"Selecciona producto"})}),e.jsx(x,{children:y.map(r=>e.jsx(n,{value:String(r.id),children:r.name},r.id))})]}),e.jsx(o,{children:l.linkable_id})]}),i.link_type==="external"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{children:"URL *"}),e.jsx(d,{type:"url",value:i.external_url,onChange:r=>a("external_url",r.target.value),placeholder:"https://..."}),e.jsx(o,{children:l.external_url})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{children:"Video del short"}),e.jsx(d,{type:"file",accept:".mp4,.mov",onChange:r=>a("short_video",r.target.files?.[0]??null)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Deja vacío para mantener el actual. MP4 o MOV, máx. 50 MB"}),e.jsx(o,{children:l.short_video})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"description",children:"Descripción (máx. 50)"}),e.jsx(d,{id:"description",value:i.description,onChange:r=>a("description",r.target.value.slice(0,50)),maxLength:50}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.description.length,"/50"]}),e.jsx(o,{children:l.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"sort_order",children:"Orden"}),e.jsx(d,{id:"sort_order",type:"number",min:0,value:i.sort_order,onChange:r=>a("sort_order",r.target.value)}),e.jsx(o,{children:l.sort_order})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{type:"submit",disabled:u,children:u?"Guardando…":"Guardar cambios"}),e.jsx(_,{type:"button",variant:"outline",asChild:!0,children:e.jsx(j,{href:route("tenant.shorts.index",h?.slug),children:"Cancelar"})})]})]})]})]})}export{we as default};
