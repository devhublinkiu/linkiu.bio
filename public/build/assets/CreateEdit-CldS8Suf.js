import{u as k,j as e,H as E,L as f}from"./app-D9wldZxo.js";import{A}from"./AdminLayout-C86srUOQ.js";import{B as p}from"./button-Dadb_Lep.js";import{I as L}from"./input-rMsYcH4C.js";import{L as x}from"./label-DoqMNi9Z.js";import{C as j}from"./checkbox-DWcs_tY8.js";import{C as g,a as N,b as $,c as D,d as v}from"./card-DbFVjWqh.js";import{A as F}from"./arrow-left-CN9XnZib.js";import{S as B}from"./shield-check-BbdwYXtK.js";import{S as G}from"./save-BHLpUb0H.js";import"./echo-CmTENghG.js";import"./utils-B0KHI9vB.js";import"./badge-DyYF213F.js";import"./progress-D5NiGDeK.js";import"./index-DdTS5Ad2.js";import"./index-CZBSMaku.js";import"./dropdown-menu-C4-9o8Rw.js";import"./createLucideIcon-CJjlOp5I.js";import"./chevron-right-BSwXEIvG.js";import"./index-BDWpq_YI.js";import"./index-BrcTw33p.js";import"./index-BMdzuiHN.js";import"./index-tfOuMV4B.js";import"./circle-check-CN90YBLh.js";import"./trash-2-CMPgRqgc.js";import"./check-BAxbGpAF.js";import"./credit-card-CPDlDYf1.js";import"./shopping-bag-CQGcPT0-.js";import"./dialog-C0Lg02Tk.js";import"./x-dvUxMxq3.js";import"./separator-L5pP8n2q.js";import"./sheet-BP6KOnln.js";import"./index-CbR7iZJO.js";import"./index-DeHGgcwY.js";import"./index-CXzOyCXW.js";import"./index-fFU5c_p6.js";import"./index-Dvu8qGWr.js";import"./index-D4lOZYra.js";import"./menuConfig-GyORRgsI.js";import"./video-DRtFkuCB.js";import"./chef-hat-D6sEz8YW.js";import"./table-rgWYlWzZ.js";import"./user-D9c6nVY3.js";import"./map-pin-Du3W4-OO.js";import"./banknote-DTNMynPY.js";import"./star-D-Iirb7f.js";import"./users-OjDIvTV8.js";import"./calendar-check-fjlZrFwy.js";import"./calendar-BW0rhnMu.js";import"./briefcase-Crq0rSJT.js";import"./truck-Db-Ebch9.js";import"./message-circle-DrNrCoj8.js";import"./package-BPq1-jLc.js";import"./layout-dashboard-BqLojFjH.js";import"./badge-check-CEpGdEtW.js";import"./lock-BHZn93rL.js";import"./sparkles-JbdQIbjf.js";import"./external-link-pORnC0H4.js";import"./chevron-down-Dux0wLDw.js";import"./headphones-DD_UyCnk.js";import"./shield-BtuNH23d.js";import"./sonner-DQ2kSMfY.js";import"./index--Jev_GdI.js";function Ke({role:m,permissions:b,currentTenant:l}){const n=!!m,{data:o,setData:c,post:C,put:y,processing:u,errors:h}=k({name:m?.name||"",permissions:m?.permissions.map(s=>s.id)||[]}),w=s=>{s.preventDefault(),n?y(route("tenant.roles.update",{tenant:l.slug,role:m.id})):C(route("tenant.roles.store",{tenant:l.slug}))},S=s=>{const r=new Set(o.permissions);r.has(s)?r.delete(s):r.add(s),c("permissions",Array.from(r))},R=s=>{const r=s.map(i=>i.id),d=r.every(i=>o.permissions.includes(i));let a=[...o.permissions];d?a=a.filter(i=>!r.includes(i)):r.forEach(i=>{a.includes(i)||a.push(i)}),c("permissions",a)};return e.jsxs(A,{title:n?"Editar Rol":"Crear Nuevo Rol",children:[e.jsx(E,{title:n?"Editar Rol":"Crear Nuevo Rol"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(p,{variant:"ghost",size:"icon",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:e.jsx(F,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:n?`Editar Rol: ${m.name}`:"Crear Nuevo Rol"}),e.jsx("p",{className:"text-muted-foreground",children:"Define el nombre del rol y sus permisos de acceso."})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs(g,{children:[e.jsxs(N,{children:[e.jsx($,{children:"Información Básica"}),e.jsx(D,{children:"Asigna un nombre descriptivo para identificar este rol en tu equipo."})]}),e.jsx(v,{children:e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx(x,{htmlFor:"name",children:"Nombre del Rol"}),e.jsx(L,{id:"name",placeholder:"Ej. Gerente de Tienda",value:o.name,onChange:s=>c("name",s.target.value)}),h.name&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:h.name})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Permisos del Sistema"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Selecciona las acciones que este rol podrá realizar."})]}),e.jsxs("div",{className:"text-sm font-medium text-slate-500",children:[o.permissions.length," permisos seleccionados"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(b).map(([s,r])=>{const d=r.map(t=>t.id),a=d.every(t=>o.permissions.includes(t)),i=d.some(t=>o.permissions.includes(t));return e.jsxs(g,{children:[e.jsxs(N,{className:"bg-muted/30 pb-3 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"font-bold flex items-center gap-2",children:[e.jsx(B,{className:`h-4 w-4 ${i?"text-primary":"text-muted-foreground"}`}),s]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{id:`module-${s}`,checked:a,onCheckedChange:()=>R(r)}),e.jsx(x,{htmlFor:`module-${s}`,className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground cursor-pointer select-none",children:"Todos"})]})]}),e.jsx(v,{className:"p-4 grid gap-3",children:r.map(t=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{id:`perm-${t.id}`,checked:o.permissions.includes(t.id),onCheckedChange:()=>S(t.id)}),e.jsx("div",{className:"grid gap-1.5 leading-none",children:e.jsx(x,{htmlFor:`perm-${t.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:t.label||t.name})})]},t.id))})]},s)})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 pb-12",children:[e.jsx(p,{variant:"outline",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:"Cancelar"})}),e.jsxs(p,{type:"submit",disabled:u,className:"min-w-[150px] cursor-pointer",children:[e.jsx(G,{}),u?"Guardando...":"Guardar Rol"]})]})]})]})]})}export{Ke as default};
