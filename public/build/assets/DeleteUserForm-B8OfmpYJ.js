import{r as c,c as w,u as y,j as e}from"./app-DvpAkplk.js";import{B as n}from"./button-DOQ0axlO.js";import{D as E,a as b,b as F,c as S,d as U,e as q}from"./dialog-Cjxgu9dZ.js";import{F as N}from"./field-DZAR5qV8.js";import{I as k}from"./input-Bv-dfyAA.js";import{L as A}from"./label-BjDu_9e_.js";import{C as I,a as _,b as z,c as B,d as H}from"./card-CnT0l_PA.js";import"./utils-Bt66apXy.js";import"./index-Bw9aTihY.js";import"./index-D8KCWmzE.js";import"./index-DxV-pwI8.js";import"./index-DvNjLHaW.js";import"./x-C_qF6Mva.js";import"./createLucideIcon-BAweqaF3.js";import"./separator-BG2VS_Fl.js";import"./index-CnuaM2Cu.js";function se({className:d="",onPermissionDenied:u}){const[m,r]=c.useState(!1),o=c.useRef(null),{auth:a}=w().props,t=a.permissions||[],p=!(a.user?.is_super_admin||t.some(s=>s.startsWith("sa."))&&!a.user?.tenant_id)||t.includes("*")||t.includes("sa.account.delete"),{data:h,setData:f,delete:x,processing:j,reset:i,errors:C,clearErrors:g}=y({password:""}),v=()=>{if(!p){u();return}r(!0)},D=s=>{s.preventDefault(),x(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>l(),onError:()=>o.current?.focus(),onFinish:()=>i()})},l=()=>{r(!1),g(),i()};return e.jsxs(I,{className:d,children:[e.jsxs(_,{children:[e.jsx(z,{children:"Eliminar Cuenta"}),e.jsx(B,{children:"Una vez que se elimine tu cuenta, todos sus recursos y datos se eliminarán permanentemente. Antes de eliminar tu cuenta, descarga cualquier dato o información que desees conservar."})]}),e.jsxs(H,{children:[e.jsx(n,{variant:"destructive",onClick:v,children:"Eliminar Cuenta"}),e.jsx(E,{open:m,onOpenChange:r,children:e.jsx(b,{children:e.jsxs("form",{onSubmit:D,children:[e.jsxs(F,{children:[e.jsx(S,{children:"¿Seguro de que deseas eliminar tu cuenta?"}),e.jsx(U,{children:"Una vez que se elimine tu cuenta, todos sus recursos y datos se eliminarán permanentemente. Por favor, ingresa tu contraseña para confirmar que deseas eliminar permanentemente tu cuenta."})]}),e.jsxs("div",{className:"my-6",children:[e.jsx(A,{htmlFor:"password",title:"Contraseña",className:"sr-only",children:"Contraseña"}),e.jsx(k,{id:"password",type:"password",name:"password",ref:o,value:h.password,onChange:s=>f("password",s.target.value),className:"mt-1 block w-3/4",autoFocus:!0,placeholder:"Contraseña"}),e.jsx(N,{children:C.password})]}),e.jsxs(q,{children:[e.jsx(n,{variant:"secondary",onClick:l,type:"button",children:"Cancelar"}),e.jsx(n,{variant:"destructive",className:"ms-3",disabled:j,type:"submit",children:"Eliminar Cuenta"})]})]})})})]})]})}export{se as default};
