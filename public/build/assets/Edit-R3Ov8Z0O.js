const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-DvpAkplk.js","assets/app-CsiEKPpb.css"])))=>i.map(i=>d[i]);
import{r as P,u as A,j as e,H as J,t as l,_ as K}from"./app-DvpAkplk.js";import{A as Q}from"./AdminLayout-hY3b0G1y.js";import{B as f}from"./button-DOQ0axlO.js";import{I as r}from"./input-Bv-dfyAA.js";import{L as t}from"./label-BjDu_9e_.js";import{C as g,d as N,e as v,a as E,b as D,c as F}from"./card-CnT0l_PA.js";import{T as X,a as Y,b as S,c as T}from"./tabs-DWlDHLH4.js";import{P as Z,A as $,j as ee,k as se}from"./dropdown-menu-ubFSrLA8.js";import{B as b}from"./badge-IfxeRtOE.js";import{A as ae,b as re,a as te}from"./alert-BcALHO-Y.js";import{C as oe}from"./camera-5H-c154v.js";import{U as ie}from"./user-CXZ9uqcX.js";import{L as w}from"./lock-DHVVRGwf.js";import{P as le}from"./phone-Bnx2TXLx.js";import{M as ne}from"./map-pin-BY9e0G3n.js";import{G as ce}from"./globe-BmOqmHJs.js";import{S as de}from"./save-Cpj6gcmT.js";import"./utils-Bt66apXy.js";import"./progress-BHe2VIPc.js";import"./index-CVnMJ0kl.js";import"./index-CnuaM2Cu.js";import"./menuConfig-CS7C2xYF.js";import"./video-Diu1usog.js";import"./createLucideIcon-BAweqaF3.js";import"./chef-hat-4WRp0NMl.js";import"./table-9Iw8O0xw.js";import"./banknote-CNQnpK3Q.js";import"./star-Cq7jFrzE.js";import"./users-BDTVDblz.js";import"./calendar-check-rPKpguYk.js";import"./calendar-mikciA0V.js";import"./briefcase-5b91nXrO.js";import"./truck-SA0a2FWD.js";import"./message-circle-4blwuSBk.js";import"./credit-card-fEKVAskI.js";import"./package-D7hy5e4b.js";import"./shopping-bag-DhB74yIJ.js";import"./layout-dashboard-Cf5aFky8.js";import"./badge-check-BhvL5u0B.js";import"./chevron-right-wq5EBuGT.js";import"./sparkles-DyQnos2U.js";import"./separator-BG2VS_Fl.js";import"./external-link-DZTE9j3y.js";import"./chevron-down-tlhr8VnY.js";import"./headphones-Bg1cPLTV.js";import"./shield-BW7u8GoI.js";import"./sonner-DgVci-2A.js";import"./index-D8KCWmzE.js";import"./index-CD1tTlGF.js";import"./index-ahKcmWZ5.js";import"./index-Bw9aTihY.js";import"./index-DxV-pwI8.js";import"./index-DvNjLHaW.js";import"./index-Dcod572x.js";import"./circle-check-DihymiLa.js";import"./trash-2-Cl32KA5j.js";import"./check-BnQaAa8B.js";import"./dialog-Cjxgu9dZ.js";import"./x-C_qF6Mva.js";import"./sheet-DsGG5XCT.js";import"./index-2KDpKUG2.js";import"./index-DAaNBk-s.js";import"./index-DGLOWnr1.js";function bs({auth:z,status:me,tenant:m,currentUserRole:c,currentTenant:L}){const k=c?.label||"Miembro",a=z.user,p=L||m,y=P.useRef(null),[M,C]=P.useState(!1),I=c?.is_owner||c?.permissions?.includes("profile.edit")||c?.permissions?.includes("*"),u=s=>{if(!I){C(!0);return}s()},{data:o,setData:n,patch:B,processing:G,errors:d}=A({name:a.name,email:a.email,phone:a.phone||"",address:a.address||"",city:a.city||"",state:a.state||"",country:a.country||"Colombia"}),{data:x,setData:h,put:H,processing:R,errors:i,reset:V}=A({current_password:"",password:"",password_confirmation:""}),O=s=>{s.preventDefault(),u(()=>{B(route("tenant.profile.update",{tenant:p.slug}),{onSuccess:()=>l.success("Perfil actualizado correctamente"),onError:()=>l.error("Error al actualizar el perfil")})})},W=s=>{s.preventDefault(),u(()=>{H(route("tenant.profile.password.update",{tenant:p.slug}),{onSuccess:()=>{V(),l.success("Contraseña actualizada correctamente")},onError:()=>l.error("Error al actualizar la contraseña")})})},U=s=>{const _=s.target.files?.[0];_&&K(async()=>{const{router:j}=await import("./app-DvpAkplk.js").then(q=>q.i);return{router:j}},__vite__mapDeps([0,1])).then(({router:j})=>{j.post(route("tenant.profile.photo.update",{tenant:p.slug}),{photo:_},{preserveScroll:!0,onSuccess:()=>{l.success("Foto de perfil actualizada")},onError:()=>l.error("Error al actualizar la foto")})})};return e.jsxs(Q,{title:"Mi Perfil",children:[e.jsx(J,{title:"Mi Perfil - Linkiu.Bio"}),e.jsx("input",{type:"file",ref:y,className:"hidden",accept:"image/*",onChange:U}),e.jsx(Z,{open:M,onOpenChange:C}),e.jsx("div",{className:"max-w-5xl mx-auto py-8 px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"md:w-1/3",children:e.jsxs(g,{className:"sticky",children:[e.jsxs(N,{className:"pt-10 pb-8 flex flex-col items-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs($,{className:"h-32 w-32",children:[e.jsx(ee,{src:a.profile_photo_url,className:"object-cover"}),e.jsx(se,{className:"text-3xl",children:a.name.substring(0,2).toUpperCase()})]}),e.jsx(f,{size:"icon",onClick:()=>u(()=>y.current?.click()),className:"absolute bottom-0 right-0 rounded-full shadow-lg cursor-pointer",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsx("h3",{className:"mt-4 text-xl font-bold",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.email}),e.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-2",children:[a.phone&&e.jsxs(b,{variant:"secondary",className:"gap-1.5",children:[e.jsx("div",{className:"size-1.5 bg-green-500 rounded-full animate-pulse"}),"WhatsApp Verificado"]}),e.jsx(b,{variant:"outline",children:k})]}),e.jsx("div",{className:"mt-8 w-full pt-6 border-t space-y-4",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest text-muted-foreground font-bold px-1",children:"Información de Negocio"}),e.jsxs("div",{className:"bg-muted/50 rounded-xl p-3 border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] font-bold text-muted-foreground",children:"Tipo de Negocio"}),e.jsx(b,{variant:"secondary",children:m?.vertical_name||"Particular"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[11px] font-bold text-muted-foreground",children:"Categoría"}),e.jsx("span",{className:"text-[11px] font-bold",children:m?.category_name||"N/A"})]})]})]})})]}),e.jsx(v,{className:"py-4 border-t bg-muted/30 rounded-b-xl px-6",children:e.jsxs("p",{className:"text-[11px] text-muted-foreground font-medium text-center w-full uppercase tracking-wider",children:["Miembro desde ",new Date(a.created_at).toLocaleDateString("es-ES",{month:"long",year:"numeric"})]})})]})}),e.jsx("div",{className:"md:w-2/3",children:e.jsxs(X,{defaultValue:"general",className:"w-full",children:[e.jsxs(Y,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(S,{value:"general",className:"cursor-pointer",children:[e.jsx(ie,{className:"mr-2"}),"Información General"]}),e.jsxs(S,{value:"security",className:"cursor-pointer",children:[e.jsx(w,{className:"mr-2"}),"Seguridad"]})]}),e.jsx(T,{value:"general",className:"space-y-6",children:e.jsxs(g,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Datos Personales"}),e.jsx(F,{children:"Actualiza tu información básica de contacto."})]}),e.jsxs("form",{onSubmit:O,children:[e.jsxs(N,{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Nombre Completo"}),e.jsx(r,{id:"name",value:o.name,onChange:s=>n("name",s.target.value)}),d.name&&e.jsx("p",{className:"text-xs text-destructive font-medium",children:d.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",children:"Correo Electrónico"}),e.jsx(r,{id:"email",type:"email",value:o.email,disabled:!0}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Tu correo es tu identificador único y no puede modificarse."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"phone",children:"WhatsApp Personal"}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(r,{id:"phone",value:o.phone,onChange:s=>n("phone",s.target.value),className:"pl-10",placeholder:"Ej: +57 300 000 0000"})]}),d.phone&&e.jsx("p",{className:"text-xs text-destructive font-medium",children:d.phone})]}),e.jsx("div",{className:"pt-4 pb-2 border-b",children:e.jsxs("h4",{className:"flex items-center gap-2 text-sm font-bold",children:[e.jsx(ne,{className:"w-4 h-4"}),"Ubicación"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"address",children:"Dirección de Residencia"}),e.jsx(r,{id:"address",value:o.address,onChange:s=>n("address",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"city",children:"Ciudad"}),e.jsx(r,{id:"city",value:o.city,onChange:s=>n("city",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"country",children:"País"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(r,{id:"country",value:o.country,onChange:s=>n("country",s.target.value),className:"pl-10"})]})]})]})]}),e.jsx(v,{className:"bg-muted/30 rounded-b-xl border-t px-6 py-4 flex justify-end",children:e.jsxs(f,{disabled:G,className:"cursor-pointer",children:[e.jsx(de,{}),"Guardar Cambios"]})})]})]})}),e.jsxs(T,{value:"security",className:"space-y-6",children:[e.jsxs(g,{children:[e.jsxs(E,{children:[e.jsx(D,{children:"Cambiar Contraseña"}),e.jsx(F,{children:"Asegúrate de usar una contraseña fuerte y única."})]}),e.jsxs("form",{onSubmit:W,children:[e.jsxs(N,{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"current_password",children:"Contraseña Actual"}),e.jsx(r,{id:"current_password",type:"password",value:x.current_password,onChange:s=>h("current_password",s.target.value)}),i.current_password&&e.jsx("p",{className:"text-xs text-destructive font-medium",children:i.current_password})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"password",children:"Nueva Contraseña"}),e.jsx(r,{id:"password",type:"password",value:x.password,onChange:s=>h("password",s.target.value)}),i.password&&e.jsx("p",{className:"text-xs text-destructive font-medium",children:i.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"password_confirmation",children:"Confirmar Nueva Contraseña"}),e.jsx(r,{id:"password_confirmation",type:"password",value:x.password_confirmation,onChange:s=>h("password_confirmation",s.target.value)}),i.password_confirmation&&e.jsx("p",{className:"text-xs text-destructive font-medium",children:i.password_confirmation})]})]})]}),e.jsx(v,{className:"bg-muted/30 rounded-b-xl border-t px-6 py-4 flex justify-end",children:e.jsxs(f,{disabled:R,className:"cursor-pointer",children:[e.jsx(w,{}),"Actualizar Contraseña"]})})]})]}),e.jsxs(ae,{children:[e.jsxs(re,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Recomendación de Seguridad"]}),e.jsx(te,{children:"Te recomendamos cambiar tu contraseña al menos cada 3 meses para mantener tu cuenta segura."})]})]})]})})]})})]})}export{bs as default};
