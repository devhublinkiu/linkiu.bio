import{u as E,r as n,b as I,j as e,L as z,t as j}from"./app-arqQV-bc.js";import{c as b}from"./utils-BegMJZHH.js";import{s as i}from"./index-BsxvijQw.js";import{O as R}from"./OnboardingLayout-BENCve6e.js";import{B as D}from"./button-Bd640uTA.js";import{I as N}from"./input-CnYabjbM.js";import{L as v}from"./label-DAA58jPO.js";import{B as $}from"./badge-t3wrEXXG.js";import{S as B}from"./sparkles-fY3WANvl.js";import{S as F}from"./store-DuTQP6r9.js";import{R as M}from"./refresh-cw-B9LMUw7v.js";import{G as T}from"./globe-CD_KGZLd.js";import{L as V}from"./loader-circle-C7WOXZ8A.js";import{C as m}from"./circle-check-CJmQNw_U.js";import{C as G}from"./chevron-left-BDLIoQOo.js";import{A as O}from"./arrow-right-CgtrnG0j.js";import"./index-C-vN8jX4.js";import"./createLucideIcon-kbomgvBs.js";function ne({onboardingData:c,siteSettings:y}){const{data:a,setData:o,post:w,processing:d,errors:x}=E({tenant_name:c?.tenant_name||"",slug:c?.slug||""}),[u,p]=n.useState(!1),[l,h]=n.useState(null),[S,g]=n.useState(!1),[C,L]=n.useState(()=>Math.floor(1e3+Math.random()*9e3)),f=s=>s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),k=s=>{const t=Math.floor(1e3+Math.random()*9e3);L(t);const r=f(s);return r?`${r}-${t}`:`tienda-${t}`};n.useEffect(()=>{const s=setTimeout(async()=>{if(a.slug){p(!0),h(null);try{const t=await I.post(i("onboarding.validate"),{field:"slug",value:a.slug});t.data.valid||h(t.data.message)}catch(t){console.error("Validation error",t)}finally{p(!1)}}},600);return()=>clearTimeout(s)},[a.slug]);const _=s=>{if(s.preventDefault(),l){j.error(l);return}w(i("onboarding.complete"),{onError:t=>{const r=Object.values(t)[0];j.error(typeof r=="string"?r:"Revisa los datos de tu tienda")}})};return e.jsx(R,{currentStep:3,siteSettings:y,title:"Nombra tu tienda | Linkiu",children:e.jsxs("div",{className:"max-w-xl mx-auto space-y-10 animate-in fade-in slide-in-from-bottom-6 duration-700",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs($,{variant:"outline",className:"px-4 py-1.5 border-primary/20 bg-primary/5 text-primary",children:[e.jsx(B,{className:"w-3.5 h-3.5 mr-2"}),"Paso 3: Identidad"]}),e.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight text-slate-900",children:["¿Cómo se llama tu ",e.jsx("span",{className:"text-primary",children:"Negocio"}),"?"]}),e.jsx("p",{className:"text-slate-500",children:"Este será el nombre público de tu tienda y tu dirección web única."})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-8 border border-slate-100 shadow-xl shadow-slate-200/50 space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"tenant_name",className:"text-sm font-bold text-slate-700 ml-1",children:"Nombre de la Tienda"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx(N,{id:"tenant_name",placeholder:"Ej: Deluxe Burger",className:b("h-14 pl-12 rounded-2xl border-slate-200 transition-all focus:ring-4 focus:ring-primary/10 font-medium",x.tenant_name&&"border-destructive ring-destructive/10"),value:a.tenant_name,onChange:s=>{const t=s.target.value;if(S)o("tenant_name",t);else{const r=f(t);o({...a,tenant_name:t,slug:r?`${r}-${C}`:""})}},required:!0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between ml-1",children:[e.jsx(v,{htmlFor:"slug",className:"text-sm font-bold text-slate-700",children:"Tu dirección web (Link)"}),e.jsxs("button",{type:"button",onClick:()=>{g(!0),o("slug",k(a.tenant_name))},className:"text-xs font-bold text-primary hover:underline flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),"Generar otro"]})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-medium text-sm flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"linkiu.bio/"})]}),e.jsx(N,{id:"slug",className:b("h-14 pl-[105px] pr-12 rounded-2xl border-slate-200 transition-all focus:ring-4 focus:ring-primary/10 font-bold text-primary",(x.slug||l)&&"border-destructive ring-destructive/10"),value:a.slug,onChange:s=>{g(!0),o("slug",s.target.value.toLowerCase().replace(/ /g,"-"))},required:!0}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:u?e.jsx(V,{className:"w-5 h-5 text-primary animate-spin"}):a.slug&&!l&&e.jsx(m,{className:"w-5 h-5 text-green-500 animate-in zoom-in"})})]}),e.jsx("p",{className:"text-[11px] text-slate-400 ml-1 leading-normal",children:l?e.jsx("span",{className:"text-destructive font-medium",children:l}):"Puedes personalizar este link ahora o cambiarlo más tarde desde tu panel."})]}),e.jsxs("div",{className:"pt-4 flex items-center justify-center gap-6 opacity-40 grayscale hover:grayscale-0 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold",children:[e.jsx(m,{className:"w-4 h-4 text-green-600"}),"SSL Seguro"]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold",children:[e.jsx(m,{className:"w-4 h-4 text-green-600"}),"CDN Ultra Rápido"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-6",children:[e.jsxs(z,{href:i("onboarding.step2"),className:"flex items-center text-sm font-bold text-slate-400 hover:text-primary transition-colors group",children:[e.jsx(G,{className:"mr-2 w-4 h-4 transition-transform group-hover:-translate-x-1"}),"Volver a cuenta"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs font-bold text-slate-300 tracking-widest uppercase",children:"¡Casi listo!"}),e.jsxs(D,{type:"submit",size:"lg",disabled:d||u,className:"h-14 px-10 rounded-2xl font-bold bg-primary hover:bg-primary/90 text-white shadow-lg shadow-primary/25 transition-all active:scale-95 group",children:[d?"Finalizando...":"Empezar ahora",e.jsx(O,{className:"ml-2 w-5 h-5 transition-transform group-hover:translate-x-1"})]})]})]})]})]})})}export{ne as default};
