import{u as w,j as e,H as y,L as p}from"./app-Bo0l-nyL.js";import{S as k}from"./SuperAdminLayout-C--MnbTX.js";import{B as l}from"./button-10Bc0E3d.js";import{I as A}from"./input-BQLGMA-c.js";import{L}from"./label-BvJxTSA7.js";import{C as x}from"./checkbox-02kus2C7.js";import{C as h,a as R,b as E,c as F,d as u}from"./card-CLdEHqC0.js";import{A as $}from"./arrow-left-iwTIuTJY.js";import{S as B}from"./shield-check-C8RmYxKr.js";import{S as D}from"./save-BcfYaDfb.js";import"./dropdown-menu-BLdek0j6.js";import"./createLucideIcon-3AckdKRt.js";import"./utils-DvD3N-9F.js";import"./chevron-right-B4UhmXxg.js";import"./index-Bj75TZ4c.js";import"./index-nKjDUAgZ.js";import"./index-CXl70Eho.js";import"./index-BaTs_s0z.js";import"./circle-check-D-62-mjA.js";import"./trash-2-CGD0dP--.js";import"./check-BxakoWLx.js";import"./credit-card-C_0EBMTX.js";import"./shopping-bag-ovPa-jWO.js";import"./dialog-NO27f9rI.js";import"./x-0PRwyTAe.js";import"./separator-rnPeP9N4.js";import"./index-CS0_ycFC.js";import"./sheet-Bz3Lea4F.js";import"./index-UkxbaV1a.js";import"./index-Ce-cpEu5.js";import"./index-DU1na7Ze.js";import"./index-DlxfeT00.js";import"./index-DY8QIQU5.js";import"./index-BrTki0md.js";import"./index-Q_gv5oQO.js";import"./chevrons-up-down-CDiH0g-q.js";import"./badge-check-DcDsd9yF.js";import"./ApplicationLogo-BrXO3AMH.js";import"./users-Cl7FA0jJ.js";import"./layout-grid-CS-h8BvL.js";import"./index-DwXGMyUE.js";function Ce({role:d,permissions:f,rolePermissions:j}){const{data:t,setData:m,put:g,processing:c,errors:n}=w({name:d.name,permissions:j}),b=(r,i)=>{i?m("permissions",[...t.permissions,r]):m("permissions",t.permissions.filter(a=>a!==r))},v=(r,i)=>{const a=r.map(o=>o.name);if(i){const o=new Set([...t.permissions,...a]);m("permissions",Array.from(o))}else m("permissions",t.permissions.filter(o=>!a.includes(o)))},N=r=>{r.preventDefault(),g(route("roles.update",d.id))};return e.jsxs(k,{header:`Editar Rol: ${d.name}`,children:[e.jsx(y,{title:"Editar Rol"}),e.jsx("div",{className:"mb-6",children:e.jsx(l,{variant:"ghost",asChild:!0,className:"pl-0 hover:bg-transparent hover:text-blue-600",children:e.jsxs(p,{href:route("roles.index"),children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Volver a Roles"]})})}),e.jsx("form",{onSubmit:N,children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs(h,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Información Básica"}),e.jsx(F,{children:"Modifica el nombre del rol para identificarlo correctamente."})]}),e.jsx(u,{children:e.jsxs("div",{className:"grid w-full max-w-md items-center gap-1.5",children:[e.jsx(L,{htmlFor:"name",children:"Nombre del Rol"}),e.jsx(A,{id:"name",value:t.name,onChange:r=>m("name",r.target.value),placeholder:"Ej. Administrador de Soporte",className:n.name?"border-destructive":""}),n.name&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:n.name})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Sistema Global"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona las acciones y accesos para este rol."})]}),e.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:[t.permissions.length," permisos seleccionados"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(f).map(([r,i])=>{const a=i.map(s=>s.name),o=a.every(s=>t.permissions.includes(s)),C=a.some(s=>t.permissions.includes(s));return e.jsxs(h,{className:"overflow-hidden border-border bg-card",children:[e.jsxs("div",{className:"bg-muted p-3 border-b border-border flex items-center justify-between",children:[e.jsxs("div",{className:"font-bold flex items-center gap-2 text-foreground",children:[e.jsx(B,{className:`h-4 w-4 ${C?"text-primary":"text-muted-foreground"}`}),r]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{id:`module-${r}`,checked:o,onCheckedChange:s=>v(i,s===!0)}),e.jsx("label",{htmlFor:`module-${r}`,className:"text-xs font-medium text-muted-foreground cursor-pointer select-none",children:"Todos"})]})]}),e.jsx(u,{className:"p-3 grid gap-2",children:i.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx(x,{id:s.name,checked:t.permissions.includes(s.name),onCheckedChange:S=>b(s.name,S===!0)}),e.jsx("div",{className:"grid gap-1.5 leading-none",children:e.jsx("label",{htmlFor:s.name,className:"text-sm font-medium leading-none cursor-pointer",children:s.label||s.name})})]},s.id))})]},r)})})]}),n.permissions&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:n.permissions}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 pb-12",children:[e.jsx(l,{variant:"outline",asChild:!0,children:e.jsx(p,{href:route("roles.index"),children:"Cancelar"})}),e.jsxs(l,{type:"submit",disabled:c,className:"min-w-[150px] font-bold",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),c?"Guardando...":"Actualizar Rol"]})]})]})})]})}export{Ce as default};
