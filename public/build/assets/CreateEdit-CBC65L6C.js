import{u as k,j as e,H as E,L as f}from"./app-CzmtjlCW.js";import{A}from"./AdminLayout-8eumfWMV.js";import{B as p}from"./button-DHDYV-Vu.js";import{I as L}from"./input-CkrKzdip.js";import{L as x}from"./label-s6Z-YQDs.js";import{C as j}from"./checkbox-CzUTQ9CK.js";import{C as g,a as N,b as $,c as D,d as v}from"./card-Cio2ZpWt.js";import{A as F}from"./arrow-left-CHMgq-Bp.js";import{S as B}from"./shield-check-D5cBpLFJ.js";import{S as G}from"./save-DgmmtjZl.js";import"./utils-BH2tHD_A.js";import"./badge-C86koyY8.js";import"./progress-thUTkzo2.js";import"./index-CoSHAo9V.js";import"./index-B7u58P25.js";import"./dropdown-menu-CkPxOfJq.js";import"./createLucideIcon-CaH5oZCX.js";import"./chevron-right-CP3Al_6X.js";import"./index-DLCIQy2W.js";import"./index-Bik950zP.js";import"./index-tuvqS7go.js";import"./index-D4uLenfM.js";import"./circle-check-DxCp2NCp.js";import"./trash-2-D8FHOsLd.js";import"./check-CDpry8EA.js";import"./credit-card-o3EdvoAE.js";import"./shopping-bag-BzAvYKks.js";import"./dialog-CDtZpi6V.js";import"./x-B2qOMX6F.js";import"./separator-C7VYnuGU.js";import"./sheet-BCCP-sjc.js";import"./index-0rkHg0Ic.js";import"./index-i2FoVhyH.js";import"./index-DewdYm7G.js";import"./index-Bdv8as05.js";import"./index-BKdn1L7U.js";import"./index-BPIYxXZn.js";import"./menuConfig-CPl-cWmx.js";import"./video-C_obWpYx.js";import"./chef-hat-DMkmJSds.js";import"./table-BzVM_9Rr.js";import"./user-D2yrztw3.js";import"./map-pin-BE5u9cGW.js";import"./banknote-B4QtVHv_.js";import"./star-BWFeNTek.js";import"./users-CiV-Fhl_.js";import"./calendar-check-BhZMHGo-.js";import"./calendar-CLz13BXv.js";import"./briefcase-BgyLfkCE.js";import"./truck-BuohTmzx.js";import"./message-circle-BMB1KwoB.js";import"./package-A6FRi7Sy.js";import"./layout-dashboard-C295RkTP.js";import"./badge-check-bj2LNrR7.js";import"./lock-nV4mWcAC.js";import"./sparkles-p-mrIi5N.js";import"./external-link-Ckra4gVk.js";import"./chevron-down-DmTOaxVY.js";import"./headphones-CE-eXCS3.js";import"./shield-1cQx-8mE.js";import"./sonner-CR6Tr01l.js";import"./index-CqTlmCQK.js";function Je({role:m,permissions:b,currentTenant:l}){const n=!!m,{data:o,setData:c,post:C,put:y,processing:u,errors:h}=k({name:m?.name||"",permissions:m?.permissions.map(s=>s.id)||[]}),w=s=>{s.preventDefault(),n?y(route("tenant.roles.update",{tenant:l.slug,role:m.id})):C(route("tenant.roles.store",{tenant:l.slug}))},S=s=>{const r=new Set(o.permissions);r.has(s)?r.delete(s):r.add(s),c("permissions",Array.from(r))},R=s=>{const r=s.map(i=>i.id),d=r.every(i=>o.permissions.includes(i));let a=[...o.permissions];d?a=a.filter(i=>!r.includes(i)):r.forEach(i=>{a.includes(i)||a.push(i)}),c("permissions",a)};return e.jsxs(A,{title:n?"Editar Rol":"Crear Nuevo Rol",children:[e.jsx(E,{title:n?"Editar Rol":"Crear Nuevo Rol"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(p,{variant:"ghost",size:"icon",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:e.jsx(F,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:n?`Editar Rol: ${m.name}`:"Crear Nuevo Rol"}),e.jsx("p",{className:"text-muted-foreground",children:"Define el nombre del rol y sus permisos de acceso."})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs(g,{children:[e.jsxs(N,{children:[e.jsx($,{children:"Información Básica"}),e.jsx(D,{children:"Asigna un nombre descriptivo para identificar este rol en tu equipo."})]}),e.jsx(v,{children:e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx(x,{htmlFor:"name",children:"Nombre del Rol"}),e.jsx(L,{id:"name",placeholder:"Ej. Gerente de Tienda",value:o.name,onChange:s=>c("name",s.target.value)}),h.name&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:h.name})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Permisos del Sistema"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Selecciona las acciones que este rol podrá realizar."})]}),e.jsxs("div",{className:"text-sm font-medium text-slate-500",children:[o.permissions.length," permisos seleccionados"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(b).map(([s,r])=>{const d=r.map(t=>t.id),a=d.every(t=>o.permissions.includes(t)),i=d.some(t=>o.permissions.includes(t));return e.jsxs(g,{children:[e.jsxs(N,{className:"bg-muted/30 pb-3 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"font-bold flex items-center gap-2",children:[e.jsx(B,{className:`h-4 w-4 ${i?"text-primary":"text-muted-foreground"}`}),s]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{id:`module-${s}`,checked:a,onCheckedChange:()=>R(r)}),e.jsx(x,{htmlFor:`module-${s}`,className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground cursor-pointer select-none",children:"Todos"})]})]}),e.jsx(v,{className:"p-4 grid gap-3",children:r.map(t=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{id:`perm-${t.id}`,checked:o.permissions.includes(t.id),onCheckedChange:()=>S(t.id)}),e.jsx("div",{className:"grid gap-1.5 leading-none",children:e.jsx(x,{htmlFor:`perm-${t.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:t.label||t.name})})]},t.id))})]},s)})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 pb-12",children:[e.jsx(p,{variant:"outline",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:"Cancelar"})}),e.jsxs(p,{type:"submit",disabled:u,className:"min-w-[150px] cursor-pointer",children:[e.jsx(G,{}),u?"Guardando...":"Guardar Rol"]})]})]})]})]})}export{Je as default};
