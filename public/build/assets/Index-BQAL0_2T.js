import{r as N,j as e,H as C,L as l,a as v}from"./app-CzmtjlCW.js";import{A as w}from"./AdminLayout-8eumfWMV.js";import{B as i}from"./button-DHDYV-Vu.js";import{I as y}from"./input-CkrKzdip.js";import{T as A,a as D,b as j,c as a,d as T,e as t}from"./table-BLm2Cm7o.js";import{B as M}from"./badge-C86koyY8.js";import{D as S,i as E,l as F,m as _,p as b,n as B}from"./dropdown-menu-CkPxOfJq.js";import{A as H,a as L,b as I,c as P,d as q,e as R,f as k,g as z}from"./alert-dialog-BdvmeaMn.js";import{C as n,a as c,b as g,d}from"./card-Cio2ZpWt.js";import{P as O}from"./plus-BCBDbY-P.js";import{S as $}from"./search-CetFsz5w.js";import{F as G}from"./funnel-D5hvKfjJ.js";import{E as U}from"./ellipsis-tJHsxw3Y.js";import{E as V}from"./external-link-Ckra4gVk.js";import{M as J}from"./message-square-CtyJBufv.js";import"./utils-BH2tHD_A.js";import"./progress-thUTkzo2.js";import"./index-CoSHAo9V.js";import"./index-B7u58P25.js";import"./menuConfig-CPl-cWmx.js";import"./video-C_obWpYx.js";import"./createLucideIcon-CaH5oZCX.js";import"./chef-hat-DMkmJSds.js";import"./table-BzVM_9Rr.js";import"./user-D2yrztw3.js";import"./map-pin-BE5u9cGW.js";import"./banknote-B4QtVHv_.js";import"./star-BWFeNTek.js";import"./users-CiV-Fhl_.js";import"./calendar-check-BhZMHGo-.js";import"./calendar-CLz13BXv.js";import"./briefcase-BgyLfkCE.js";import"./truck-BuohTmzx.js";import"./message-circle-BMB1KwoB.js";import"./credit-card-o3EdvoAE.js";import"./package-A6FRi7Sy.js";import"./shopping-bag-BzAvYKks.js";import"./layout-dashboard-C295RkTP.js";import"./badge-check-bj2LNrR7.js";import"./lock-nV4mWcAC.js";import"./chevron-right-CP3Al_6X.js";import"./sparkles-p-mrIi5N.js";import"./separator-C7VYnuGU.js";import"./chevron-down-DmTOaxVY.js";import"./headphones-CE-eXCS3.js";import"./shield-1cQx-8mE.js";import"./sonner-CR6Tr01l.js";import"./index-DLCIQy2W.js";import"./index-Bik950zP.js";import"./index-tuvqS7go.js";import"./index-D4uLenfM.js";import"./circle-check-DxCp2NCp.js";import"./trash-2-D8FHOsLd.js";import"./check-CDpry8EA.js";import"./dialog-CDtZpi6V.js";import"./x-B2qOMX6F.js";import"./sheet-BCCP-sjc.js";import"./index-0rkHg0Ic.js";import"./index-i2FoVhyH.js";import"./index-DewdYm7G.js";import"./index-Bdv8as05.js";import"./index-BKdn1L7U.js";import"./index-BPIYxXZn.js";const m={open:{label:"Abierto",color:"bg-blue-100 text-blue-700"},in_progress:{label:"En progreso",color:"bg-amber-100 text-amber-700"},awaiting_response:{label:"Esperando respuesta",color:"bg-purple-100 text-purple-700"},resolved:{label:"Resuelto",color:"bg-emerald-100 text-emerald-700"},closed:{label:"Cerrado",color:"bg-slate-100 text-slate-700"}},p={low:{label:"Baja",color:"bg-slate-100 text-slate-700"},medium:{label:"Media",color:"bg-blue-100 text-blue-700"},high:{label:"Alta",color:"bg-orange-100 text-orange-700"},urgent:{label:"Urgente",color:"bg-red-100 text-red-700"}},K={technical:"Problema Técnico",billing:"Facturación",account:"Mi Cuenta",feature_request:"Solicitud de Funcionalidad",other:"Otros"},Q=o=>{try{const r=new Date(o);return isNaN(r.getTime())?"Fecha no disponible":r.toLocaleString()}catch{return"Fecha no disponible"}};function os({tickets:o,currentTenant:r,stats:x}){const[u,h]=N.useState(null),f=()=>{u&&v.post(route("tenant.support.close",{tenant:r.slug,support:u}),{},{onSuccess:()=>h(null)})};return e.jsxs(w,{title:"Soporte y Ayuda",breadcrumbs:[{label:"Soporte y Ayuda"}],children:[e.jsx(C,{title:"Soporte Técnico"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Tus tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona tus consultas y solicitudes de soporte."})]}),e.jsx(i,{asChild:!0,className:"gap-2",children:e.jsxs(l,{href:route("tenant.support.create",{tenant:r.slug}),className:"cursor-pointer",children:[e.jsx(O,{className:"h-4 w-4"})," Nuevo Ticket"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Resueltos"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:x.resolved})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Pendientes"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:x.pending})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Total"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.total})})]})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx($,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(y,{type:"search",placeholder:"Buscar tickets...",className:"pl-8"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(i,{variant:"outline",size:"sm",className:"gap-2 cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"})," Filtros"]})})]})}),e.jsx(d,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(A,{children:[e.jsx(D,{children:e.jsxs(j,{children:[e.jsx(a,{className:"w-[100px]",children:"ID"}),e.jsx(a,{children:"Asunto"}),e.jsx(a,{children:"Estado"}),e.jsx(a,{children:"Prioridad"}),e.jsx(a,{children:"Última respuesta"}),e.jsx(a,{className:"text-right",children:"Acciones"})]})}),e.jsx(T,{children:o.data.length>0?o.data.map(s=>e.jsxs(j,{children:[e.jsx(t,{className:"font-mono text-xs font-bold text-blue-600 truncate max-w-[120px]",children:s.reference_id||`#${s.id}`}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(l,{href:route("tenant.support.show",{tenant:r.slug,support:s.id}),className:"font-semibold hover:underline decoration-primary cursor-pointer",children:s.subject}),e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-tight",children:K[s.category]||s.category})]})}),e.jsx(t,{children:e.jsx(M,{className:(m?.[s.status]||m?.open||{color:"bg-blue-100"}).color,variant:"secondary",children:(m?.[s.status]||m?.open||{label:"Abierto"}).label})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${(p[s.priority]||p.medium||{color:"bg-slate-400"}).color.split(" ")[0]}`}),e.jsx("span",{className:"text-sm",children:(p?.[s.priority]||p?.medium||{label:"Media"}).label})]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsxs("span",{className:"text-muted-foreground line-clamp-1 italic",children:['"',s.last_reply?.message||"Sin respuestas",'"']}),e.jsx("span",{className:"text-[10px] text-slate-400",children:Q(s.updated_at)})]})}),e.jsx(t,{className:"text-right",children:e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"cursor-pointer",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsxs(F,{align:"end",children:[e.jsx(_,{children:"Acciones"}),e.jsx(b,{asChild:!0,className:"cursor-pointer",children:e.jsxs(l,{href:route("tenant.support.show",{tenant:r.slug,support:s.id}),children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," Ver conversación"]})}),e.jsx(B,{}),e.jsx(b,{className:"text-red-600 cursor-pointer",onClick:()=>h(s.id),children:"Cerrar Ticket"})]})]})})]},s.id)):e.jsx(j,{children:e.jsx(t,{colSpan:6,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(J,{className:"h-8 w-8 text-muted-foreground/50"}),e.jsx("p",{children:"No tienes tickets de soporte registrados."}),e.jsx(i,{variant:"link",asChild:!0,className:"cursor-pointer",children:e.jsx(l,{href:route("tenant.support.create",{tenant:r.slug}),children:"Crea tu primer ticket aquí"})})]})})})})]})})})]})]}),e.jsx(H,{open:!!u,onOpenChange:s=>!s&&h(null),children:e.jsxs(L,{children:[e.jsxs(I,{children:[e.jsx(P,{children:"¿Cerrar este ticket de soporte?"}),e.jsx(q,{children:"Esta acción marcará el ticket como finalizado. No podrás enviar más respuestas a menos que sea reabierto por un administrador."})]}),e.jsxs(R,{children:[e.jsx(k,{className:"cursor-pointer",children:"Cancelar"}),e.jsx(z,{onClick:f,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:"Confirmar y Cerrar"})]})]})})]})}export{os as default};
