import{r as N,j as e,H as C,L as l,a as v}from"./app-D9wldZxo.js";import{A as w}from"./AdminLayout-C86srUOQ.js";import{B as i}from"./button-Dadb_Lep.js";import{I as y}from"./input-rMsYcH4C.js";import{T as A,a as D,b as j,c as a,d as T,e as t}from"./table-B6cmMBvL.js";import{B as M}from"./badge-DyYF213F.js";import{D as S,i as E,l as F,m as _,p as b,n as B}from"./dropdown-menu-C4-9o8Rw.js";import{A as H,a as L,b as I,c as P,d as q,e as R,f as k,g as z}from"./alert-dialog-BL6dXcRY.js";import{C as n,a as c,b as g,d}from"./card-DbFVjWqh.js";import{P as O}from"./plus-evWAfx61.js";import{S as $}from"./search-lqHHsKRN.js";import{F as G}from"./funnel-BZsMhn6I.js";import{E as U}from"./ellipsis-BfbyL5_C.js";import{E as V}from"./external-link-pORnC0H4.js";import{M as J}from"./message-square-CDhGEjmF.js";import"./echo-CmTENghG.js";import"./utils-B0KHI9vB.js";import"./progress-D5NiGDeK.js";import"./index-DdTS5Ad2.js";import"./index-CZBSMaku.js";import"./menuConfig-GyORRgsI.js";import"./video-DRtFkuCB.js";import"./createLucideIcon-CJjlOp5I.js";import"./chef-hat-D6sEz8YW.js";import"./table-rgWYlWzZ.js";import"./user-D9c6nVY3.js";import"./map-pin-Du3W4-OO.js";import"./banknote-DTNMynPY.js";import"./star-D-Iirb7f.js";import"./users-OjDIvTV8.js";import"./calendar-check-fjlZrFwy.js";import"./calendar-BW0rhnMu.js";import"./briefcase-Crq0rSJT.js";import"./truck-Db-Ebch9.js";import"./message-circle-DrNrCoj8.js";import"./credit-card-CPDlDYf1.js";import"./package-BPq1-jLc.js";import"./shopping-bag-CQGcPT0-.js";import"./layout-dashboard-BqLojFjH.js";import"./badge-check-CEpGdEtW.js";import"./lock-BHZn93rL.js";import"./chevron-right-BSwXEIvG.js";import"./sparkles-JbdQIbjf.js";import"./separator-L5pP8n2q.js";import"./chevron-down-Dux0wLDw.js";import"./headphones-DD_UyCnk.js";import"./shield-BtuNH23d.js";import"./sonner-DQ2kSMfY.js";import"./index-BDWpq_YI.js";import"./index-BrcTw33p.js";import"./index-BMdzuiHN.js";import"./index-tfOuMV4B.js";import"./circle-check-CN90YBLh.js";import"./trash-2-CMPgRqgc.js";import"./check-BAxbGpAF.js";import"./dialog-C0Lg02Tk.js";import"./x-dvUxMxq3.js";import"./sheet-BP6KOnln.js";import"./index-CbR7iZJO.js";import"./index-DeHGgcwY.js";import"./index-CXzOyCXW.js";import"./index-fFU5c_p6.js";import"./index-Dvu8qGWr.js";import"./index-D4lOZYra.js";const m={open:{label:"Abierto",color:"bg-blue-100 text-blue-700"},in_progress:{label:"En progreso",color:"bg-amber-100 text-amber-700"},awaiting_response:{label:"Esperando respuesta",color:"bg-purple-100 text-purple-700"},resolved:{label:"Resuelto",color:"bg-emerald-100 text-emerald-700"},closed:{label:"Cerrado",color:"bg-slate-100 text-slate-700"}},p={low:{label:"Baja",color:"bg-slate-100 text-slate-700"},medium:{label:"Media",color:"bg-blue-100 text-blue-700"},high:{label:"Alta",color:"bg-orange-100 text-orange-700"},urgent:{label:"Urgente",color:"bg-red-100 text-red-700"}},K={technical:"Problema Técnico",billing:"Facturación",account:"Mi Cuenta",feature_request:"Solicitud de Funcionalidad",other:"Otros"},Q=o=>{try{const r=new Date(o);return isNaN(r.getTime())?"Fecha no disponible":r.toLocaleString()}catch{return"Fecha no disponible"}};function ls({tickets:o,currentTenant:r,stats:x}){const[u,h]=N.useState(null),f=()=>{u&&v.post(route("tenant.support.close",{tenant:r.slug,support:u}),{},{onSuccess:()=>h(null)})};return e.jsxs(w,{title:"Soporte y Ayuda",breadcrumbs:[{label:"Soporte y Ayuda"}],children:[e.jsx(C,{title:"Soporte Técnico"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Tus tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona tus consultas y solicitudes de soporte."})]}),e.jsx(i,{asChild:!0,className:"gap-2",children:e.jsxs(l,{href:route("tenant.support.create",{tenant:r.slug}),className:"cursor-pointer",children:[e.jsx(O,{className:"h-4 w-4"})," Nuevo Ticket"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Resueltos"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:x.resolved})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Pendientes"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:x.pending})})]}),e.jsxs(n,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(g,{className:"text-sm font-medium text-muted-foreground",children:"Total"})}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold",children:x.total})})]})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx($,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(y,{type:"search",placeholder:"Buscar tickets...",className:"pl-8"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(i,{variant:"outline",size:"sm",className:"gap-2 cursor-pointer",children:[e.jsx(G,{className:"h-4 w-4"})," Filtros"]})})]})}),e.jsx(d,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(A,{children:[e.jsx(D,{children:e.jsxs(j,{children:[e.jsx(a,{className:"w-[100px]",children:"ID"}),e.jsx(a,{children:"Asunto"}),e.jsx(a,{children:"Estado"}),e.jsx(a,{children:"Prioridad"}),e.jsx(a,{children:"Última respuesta"}),e.jsx(a,{className:"text-right",children:"Acciones"})]})}),e.jsx(T,{children:o.data.length>0?o.data.map(s=>e.jsxs(j,{children:[e.jsx(t,{className:"font-mono text-xs font-bold text-blue-600 truncate max-w-[120px]",children:s.reference_id||`#${s.id}`}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(l,{href:route("tenant.support.show",{tenant:r.slug,support:s.id}),className:"font-semibold hover:underline decoration-primary cursor-pointer",children:s.subject}),e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-tight",children:K[s.category]||s.category})]})}),e.jsx(t,{children:e.jsx(M,{className:(m?.[s.status]||m?.open||{color:"bg-blue-100"}).color,variant:"secondary",children:(m?.[s.status]||m?.open||{label:"Abierto"}).label})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${(p[s.priority]||p.medium||{color:"bg-slate-400"}).color.split(" ")[0]}`}),e.jsx("span",{className:"text-sm",children:(p?.[s.priority]||p?.medium||{label:"Media"}).label})]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsxs("span",{className:"text-muted-foreground line-clamp-1 italic",children:['"',s.last_reply?.message||"Sin respuestas",'"']}),e.jsx("span",{className:"text-[10px] text-slate-400",children:Q(s.updated_at)})]})}),e.jsx(t,{className:"text-right",children:e.jsxs(S,{children:[e.jsx(E,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",className:"cursor-pointer",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsxs(F,{align:"end",children:[e.jsx(_,{children:"Acciones"}),e.jsx(b,{asChild:!0,className:"cursor-pointer",children:e.jsxs(l,{href:route("tenant.support.show",{tenant:r.slug,support:s.id}),children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," Ver conversación"]})}),e.jsx(B,{}),e.jsx(b,{className:"text-red-600 cursor-pointer",onClick:()=>h(s.id),children:"Cerrar Ticket"})]})]})})]},s.id)):e.jsx(j,{children:e.jsx(t,{colSpan:6,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(J,{className:"h-8 w-8 text-muted-foreground/50"}),e.jsx("p",{children:"No tienes tickets de soporte registrados."}),e.jsx(i,{variant:"link",asChild:!0,className:"cursor-pointer",children:e.jsx(l,{href:route("tenant.support.create",{tenant:r.slug}),children:"Crea tu primer ticket aquí"})})]})})})})]})})})]})]}),e.jsx(H,{open:!!u,onOpenChange:s=>!s&&h(null),children:e.jsxs(L,{children:[e.jsxs(I,{children:[e.jsx(P,{children:"¿Cerrar este ticket de soporte?"}),e.jsx(q,{children:"Esta acción marcará el ticket como finalizado. No podrás enviar más respuestas a menos que sea reabierto por un administrador."})]}),e.jsxs(R,{children:[e.jsx(k,{className:"cursor-pointer",children:"Cancelar"}),e.jsx(z,{onClick:f,className:"bg-red-600 hover:bg-red-700 text-white cursor-pointer",children:"Confirmar y Cerrar"})]})]})})]})}export{ls as default};
