import{u as k,j as e,H as E,L as f}from"./app-arqQV-bc.js";import{A}from"./AdminLayout-DCtk7OxF.js";import{B as p}from"./button-Bd640uTA.js";import{I as L}from"./input-CnYabjbM.js";import{L as x}from"./label-DAA58jPO.js";import{C as j}from"./checkbox-BVsmtN0_.js";import{C as g,a as N,b as $,c as D,d as v}from"./card-BQPJWSk4.js";import{A as F}from"./arrow-left-XHfuuPY4.js";import{S as B}from"./shield-check-BX6ttUPh.js";import{S as G}from"./save-Dv6NlijS.js";import"./utils-BegMJZHH.js";import"./badge-t3wrEXXG.js";import"./progress-BWnj_no5.js";import"./index-CVnnicxK.js";import"./index-C-vN8jX4.js";import"./dropdown-menu-mNq1McYa.js";import"./createLucideIcon-kbomgvBs.js";import"./chevron-right-CyE8jcbn.js";import"./index-CwhdJaVg.js";import"./index-B_Os2ghw.js";import"./index-CJZqa-kr.js";import"./index-C9GonLHF.js";import"./circle-check-CJmQNw_U.js";import"./trash-2-D8UpIHBH.js";import"./check-BZhepUpU.js";import"./credit-card-4AdI57T8.js";import"./shopping-bag-TtCDC01g.js";import"./dialog-Do7ESPrT.js";import"./x-hBSqTjfa.js";import"./separator-DpUia1Ar.js";import"./sheet-BJFcoitR.js";import"./index-CfChaKac.js";import"./index-DzhEK4jt.js";import"./index-iS2GCZ5y.js";import"./index-Bz80iYGN.js";import"./index-DiBfayRM.js";import"./index-DDCOIm2e.js";import"./menuConfig-C-Q0avcz.js";import"./video-B-ftvkxj.js";import"./chef-hat-q1zMrLCc.js";import"./table-Bk0hf6m9.js";import"./user-KA4Ja2_R.js";import"./map-pin-D1VGCzYf.js";import"./banknote-byFf_CZb.js";import"./star-qP03KNv_.js";import"./users-DyLj9nwM.js";import"./calendar-check-BUphR3zi.js";import"./calendar-DHlqI9qY.js";import"./briefcase-CG7ArIFZ.js";import"./truck-DCx-3LGs.js";import"./message-circle-DV6RjH4d.js";import"./package-34OeiGxz.js";import"./layout-dashboard-DnE9OzLr.js";import"./badge-check-C3DjHgnO.js";import"./lock-Cb_9eXlT.js";import"./sparkles-fY3WANvl.js";import"./external-link-r8YAPN_c.js";import"./chevron-down-CS-ozzzB.js";import"./headphones-Uo3Em3Q5.js";import"./shield-BQB1r0z5.js";import"./sonner-SWZRrF5D.js";import"./index-DLsOI5U2.js";function Je({role:m,permissions:b,currentTenant:l}){const n=!!m,{data:o,setData:c,post:C,put:y,processing:u,errors:h}=k({name:m?.name||"",permissions:m?.permissions.map(s=>s.id)||[]}),w=s=>{s.preventDefault(),n?y(route("tenant.roles.update",{tenant:l.slug,role:m.id})):C(route("tenant.roles.store",{tenant:l.slug}))},S=s=>{const r=new Set(o.permissions);r.has(s)?r.delete(s):r.add(s),c("permissions",Array.from(r))},R=s=>{const r=s.map(i=>i.id),d=r.every(i=>o.permissions.includes(i));let a=[...o.permissions];d?a=a.filter(i=>!r.includes(i)):r.forEach(i=>{a.includes(i)||a.push(i)}),c("permissions",a)};return e.jsxs(A,{title:n?"Editar Rol":"Crear Nuevo Rol",children:[e.jsx(E,{title:n?"Editar Rol":"Crear Nuevo Rol"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(p,{variant:"ghost",size:"icon",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:e.jsx(F,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:n?`Editar Rol: ${m.name}`:"Crear Nuevo Rol"}),e.jsx("p",{className:"text-muted-foreground",children:"Define el nombre del rol y sus permisos de acceso."})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs(g,{children:[e.jsxs(N,{children:[e.jsx($,{children:"Información Básica"}),e.jsx(D,{children:"Asigna un nombre descriptivo para identificar este rol en tu equipo."})]}),e.jsx(v,{children:e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx(x,{htmlFor:"name",children:"Nombre del Rol"}),e.jsx(L,{id:"name",placeholder:"Ej. Gerente de Tienda",value:o.name,onChange:s=>c("name",s.target.value)}),h.name&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:h.name})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Permisos del Sistema"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Selecciona las acciones que este rol podrá realizar."})]}),e.jsxs("div",{className:"text-sm font-medium text-slate-500",children:[o.permissions.length," permisos seleccionados"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Object.entries(b).map(([s,r])=>{const d=r.map(t=>t.id),a=d.every(t=>o.permissions.includes(t)),i=d.some(t=>o.permissions.includes(t));return e.jsxs(g,{children:[e.jsxs(N,{className:"bg-muted/30 pb-3 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"font-bold flex items-center gap-2",children:[e.jsx(B,{className:`h-4 w-4 ${i?"text-primary":"text-muted-foreground"}`}),s]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{id:`module-${s}`,checked:a,onCheckedChange:()=>R(r)}),e.jsx(x,{htmlFor:`module-${s}`,className:"text-[10px] font-bold uppercase tracking-wider text-muted-foreground cursor-pointer select-none",children:"Todos"})]})]}),e.jsx(v,{className:"p-4 grid gap-3",children:r.map(t=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{id:`perm-${t.id}`,checked:o.permissions.includes(t.id),onCheckedChange:()=>S(t.id)}),e.jsx("div",{className:"grid gap-1.5 leading-none",children:e.jsx(x,{htmlFor:`perm-${t.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:t.label||t.name})})]},t.id))})]},s)})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 pb-12",children:[e.jsx(p,{variant:"outline",asChild:!0,className:"cursor-pointer",children:e.jsx(f,{href:route("tenant.roles.index",{tenant:l.slug}),children:"Cancelar"})}),e.jsxs(p,{type:"submit",disabled:u,className:"min-w-[150px] cursor-pointer",children:[e.jsx(G,{}),u?"Guardando...":"Guardar Rol"]})]})]})]})]})}export{Je as default};
